<div class="container">

<table style="width: 100%;"><tr>
<td>flow_view</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>View function as flow chart</h2>

<h3>Description</h3>


<ul>
<li> <p><code>flow_view()</code> shows the code of a function as a flow diagram
</p>
</li>
<li> <p><code>flow_run()</code> runs a call and draws the logical path taken by the code.
</p>
</li>
<li> <p><code>flow_compare_runs()</code> shows on the same diagrams 2 calls to the same functions,
code blocks that are only touched by the <code>ref</code> call are colored green, code blocks
that are only touched by the <code>x</code> call are colored orange.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">flow_view(
  x,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  nested_fun = NULL,
  swap = TRUE,
  out = NULL,
  engine = c("nomnoml", "plantuml")
)

flow_run(
  x,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL,
  browse = FALSE
)

flow_compare_runs(
  x,
  ref,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a call, a function, or a path to a script</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>prefix to use for special comments in our code used as block headers,
must start with <code>"#"</code>, several prefixes can be provided</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>Whether to display the code in code blocks or only the header,
to be more compact, if <code>NA</code>, the code will be displayed only if no header
is defined by special comments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>narrow</code></td>
<td>
<p><code>TRUE</code> makes sure the diagram stays centered on one column
(they'll be longer but won't shift to the right)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncate</code></td>
<td>
<p>maximum number of characters to be printed per line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nested_fun</code></td>
<td>
<p>if not <code>NULL</code>, the index or name of the function definition found in
x that we wish to inspect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swap</code></td>
<td>
<p>whether to change <code>var &lt;- if(cond) expr</code> into
<code>if(cond) var &lt;- expr</code> so the diagram displays better</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>a path to save the diagram to.
Special values "html", "htm", "png", "pdf", "jpg" and "jpeg" can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>engine</code></td>
<td>
<p>either <code>"nomnoml"</code> (default) or <code>"plantuml"</code> (experimental, brittle
mostly for reasons out of our control), if the latter, arguments <code>prefix</code>,
<code>narrow</code>, and <code>code</code> are ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>browse</code></td>
<td>
<p>whether to debug step by step (block by block),
can also be a vector of block ids, in this case <code>browser()</code> calls will be
inserted at the start of these blocks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>
<p>the reference expression for <code>flow_compare_runs()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>On some systems the output might sometimes display the box character when using
the nomnoml engine, this is due to the system not recognizing the Braille
character <code style="white-space: pre;">⁠\u2800⁠</code>. This character is used to circumvent a shortcoming of the
nomnoml library:
lines can't start with a standard space and multiple subsequent spaces might be collapsed.
To choose another character, set the option <code>flow.indenter</code>, for instance :
<code>options(flow.indenter = "\u00b7")</code>. Setting the <code>options(flow.svg = FALSE)</code>
might also help.
</p>


<h3>Value</h3>

<p>depending on <code>out</code> :
</p>

<ul>
<li> <p><code>NULL</code> (default) : <code>flow_view()</code> and <code>flow_compare_runs()</code> return a <code>"flow_diagram"</code>
object, containing the diagram, the diagram's code and the data used to build
the code. <code>flow_run()</code> returns the output of the call.
</p>
</li>
<li>
<p> An output path or a file extension : the path where the file is saved
</p>
</li>
<li> <p><code>"data"</code>:  a list of 2 data frames "nodes" and "edges"
</p>
</li>
<li> <p><code>"code"</code>: A character vector of class "flow_code"
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">flow_view(rle)
flow_run(rle(c(1, 2, 2, 3)))
flow_compare_runs(rle(NULL), rle(c(1, 2, 2, 3)))
</code></pre>


</div>