<div class="container">

<table style="width: 100%;"><tr>
<td>multi_location_prep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimized multi-location partially replicated design</h2>

<h3>Description</h3>

<p>Optimized multi-location partially replicated design
</p>


<h3>Usage</h3>

<pre><code class="language-R">multi_location_prep(
  lines,
  nrows,
  ncols,
  l,
  planter = "serpentine",
  plotNumber,
  desired_avg,
  copies_per_entry,
  checks = NULL,
  rep_checks = NULL,
  exptName,
  locationNames,
  optim_list,
  seed,
  data = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lines</code></td>
<td>
<p>Number of genotypes, experimental lines or treatments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrows</code></td>
<td>
<p>Numeric vector with the number of rows field at each location.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncols</code></td>
<td>
<p>Numeric vector with the number of columns field at each location.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>
<p>Number of locations. By default <code>l = 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>planter</code></td>
<td>
<p>Option for <code>serpentine</code> or <code>cartesian</code> movement. By default  <code>planter = 'serpentine'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotNumber</code></td>
<td>
<p>Numeric vector with the starting plot number for each location. By default <code>plotNumber = 101</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desired_avg</code></td>
<td>
<p>(optional) Desired average of treatments across locations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copies_per_entry</code></td>
<td>
<p>Number of total copies per treatment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checks</code></td>
<td>
<p>Number of checks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rep_checks</code></td>
<td>
<p>Number of replications per check.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exptName</code></td>
<td>
<p>(optional) Name of the experiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locationNames</code></td>
<td>
<p>(optional) Name for each location.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optim_list</code></td>
<td>
<p>(optional) A list object of class "MultiPrep"generated by <code>do_optim()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>(optional) Real number that specifies the starting seed to obtain reproducible designs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(optional) Data frame with 2 columns: <code>ENTRY | NAME </code>. ENTRY must be numeric.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of class <code>FielDHub</code> with several elements.
</p>

<ul>
<li> <p><code>infoDesign</code> is a list with information on the design parameters.
</p>
</li>
<li> <p><code>layoutRandom</code> is a matrix with the randomization layout.
</p>
</li>
<li> <p><code>plotNumber</code> is a matrix with the layout plot number.
</p>
</li>
<li> <p><code>binaryField</code> is a matrix with the binary field.
</p>
</li>
<li> <p><code>dataEntry</code> is a data frame with the data input.
</p>
</li>
<li> <p><code>genEntries</code> is a list with the entries for replicated and non-replicated parts.
</p>
</li>
<li> <p><code>fieldBook</code> is a data frame with field book design. This includes the index (Row, Column).
</p>
</li>
<li> <p><code>min_pairwise_distance</code> is a data frame with the minimum pairwise distance between 
each pair of locations.
</p>
</li>
<li> <p><code>reps_info</code> is a data frame with information on the number of replicated and 
non-replicated treatments at each location.
</p>
</li>
<li> <p><code>pairsDistance</code> is a data frame with the pairwise distances between each pair of 
treatments.
</p>
</li>
<li> <p><code>treatments_with_reps</code> is a list with the entries for the replicated part of the design.
</p>
</li>
<li> <p><code>treatments_with_no_reps</code> is a list with the entries for the non-replicated part of the design.
</p>
</li>
<li> <p><code>list_locs</code> is a list with each location list of entries.
</p>
</li>
<li> <p><code>allocation</code> is a matrix with the allocation of treatments.
</p>
</li>
<li> <p><code>size_locations</code> is a data frame with one column for each 
location and one row with the size of the location.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Didier Murillo [aut],
Salvador Gezan [aut],
Jean-Marc Montpetit [ctb],
Ana Heilman [ctb]
</p>


<h3>References</h3>

<p>Edmondson, R.N. Multi-level Block Designs for Comparative Experiments. JABES 25, 
500â€“522 (2020). https://doi.org/10.1007/s13253-020-00416-0
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1: Generates a spatially optimized multi-location p-rep design with 142 
# genotypes. The number of copies per plant available for this experiment is 9. 
# This experiment is carried out in 5 locations, and there are seven seeds available 
# for each plant to make replications.
# In this case, we add three controls (checks) with six reps each.
# With this setup, the experiment will have 142 treatments + 3 checks = 145 
# entries and the number of plots per location after the allocation process 
# will be 196. 
# The average genotype allocation will be 1.5 copies per location.
## Not run: 
optim_multi_prep &lt;- multi_location_prep(
  lines = 150,  
  l = 5, 
  copies_per_entry = 7, 
  checks = 3, 
  rep_checks = c(6,6,6),
  locationNames = c("LOC1", "LOC2", "LOC3", "LOC4", "LOC5"), 
  seed = 1234
)
designs &lt;- optim_multi_prep$designs
field_book_loc_1 &lt;- designs$LOC1$fieldBook
head(field_book_loc_1, 10)

## End(Not run)
</code></pre>


</div>