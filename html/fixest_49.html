<div class="container">

<table style="width: 100%;"><tr>
<td>f</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Lags a variable in a <code>fixest</code> estimation</h2>

<h3>Description</h3>

<p>Produce lags or leads in the formulas of <code>fixest</code> estimations or when creating variables in
a <code>data.table::data.table</code>. The data must be set as a panel beforehand (either with
the function <code>panel</code> or with the argument <code>panel.id</code> in the estimation).
</p>


<h3>Usage</h3>

<pre><code class="language-R">f(x, k = 1, fill = NA)

d(x, k = 1, fill = NA)

l(x, k = 1, fill = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>A vector of integers giving the number of lags (for <code>l()</code> and <code>d()</code>) or
leads (for <code>f()</code>). For <code>l()</code> and <code>d()</code> negative values lead to leads. For <code>f()</code>
negative values lead to lags.
This argument can be a vector when using it in fixest estimations. When creating variables in
a <code>data.table::data.table</code>, it <strong>must</strong> be of length one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>A scalar, default is <code>NA</code>. How to fill the missing values due to the lag/lead?
Note that in a <code>fixest</code> estimation, 'fill' must be numeric (not required when
creating new variables).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>These functions can only be used i) in a formula of a <code>fixest</code> estimation, or ii) when
creating variables within a <code>fixest_panel</code> object (obtained with function <code>panel</code>) which
is alaos a <code>data.table::data.table</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>f()</code>: Forwards a variable (inverse of lagging) in a <code>fixest</code> estimation
</p>
</li>
<li> <p><code>d()</code>: Creates differences (i.e. x - lag(x)) in a <code>fixest</code> estimation
</p>
</li>
</ul>
<h3>See Also</h3>

<p>The function <code>panel</code> changes <code>data.frames</code> into a panel from which the functions <code>l</code>
and <code>f</code> can be called. Otherwise you can set the panel 'live' during the estimation using
the argument <code>panel.id</code> (see for example in the function <code>feols</code>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(base_did)

# Setting a data set as a panel...
pdat = panel(base_did, ~ id + period)

# ...then using the functions l and f
est1 = feols(y ~ l(x1, 0:1), pdat)
est2 = feols(f(y) ~ l(x1, -1:1), pdat)
est3 = feols(l(y) ~ l(x1, 0:3), pdat)
etable(est1, est2, est3, order = c("f", "^x"), drop = "Int")

# or using the argument panel.id
feols(f(y) ~ l(x1, -1:1), base_did, panel.id = ~id + period)
feols(d(y) ~ d(x1), base_did, panel.id = ~id + period)

# l() and f() can also be used within a data.table:
if(require("data.table")){
  pdat_dt = panel(as.data.table(base_did), ~id+period)
  # Now since pdat_dt is also a data.table
  #   you can create lags/leads directly
  pdat_dt[, x1_l1 := l(x1)]
  pdat_dt[, x1_d1 := d(x1)]
  pdat_dt[, c("x1_l1_fill0", "y_f2") := .(l(x1, fill = 0), f(y, 2))]
}



</code></pre>


</div>