<div class="container">

<table style="width: 100%;"><tr>
<td>stats-tsdiag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diagnostic plots and statistics for fitted GARCH models</h2>

<h3>Description</h3>

<p>Produce diagnostics for fitted GARCH/APARCH models. The method offers
several tests, plots of autocorrelations and partial autocorrelations
of the standardised conditional residuals, ability to control which
graphs are produced (including interactively), as well as their
layout.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'fGARCH'
tsdiag(object, gof.lag = NULL, ask = FALSE, ..., plot = c(4L, 5L, 7L), 
       layout = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>an object from class <code>"fGARCH"</code>, as returned by
<code>garchFit</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof.lag</code></td>
<td>
<p>maximal lag for portmanteau tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>if <code>TRUE</code> present a menu of available plots, see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>

<p>if <code>TRUE</code> all available plots; a vector of positive integers
specifies a subset of the available plots.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>

<p>a list with arguments for <code>graphics::layout</code> for the plots. The
default plots the autocorrelations of the standardised conditional
residuals and their squares, as well as a QQ-plot for the fitted
conditional distribution.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Compute and graph diagnostics for fitted ARMA-GARCH/APARCH models.
</p>








<p><code>plot</code> can be <code>TRUE</code> to ask for all plots or a vector of
positive integers specifying which plots to consider. Currently the
following options are available:
</p>

<table>
<tr>
<td style="text-align: right;">1 </td>
<td style="text-align: left;"> Residuals </td>
</tr>
<tr>
<td style="text-align: right;">
 2 </td>
<td style="text-align: left;"> Conditional SDs </td>
</tr>
<tr>
<td style="text-align: right;">
 3 </td>
<td style="text-align: left;"> Standardized Residuals </td>
</tr>
<tr>
<td style="text-align: right;">
 4 </td>
<td style="text-align: left;"> ACF of Standardized Residuals </td>
</tr>
<tr>
<td style="text-align: right;">
 5 </td>
<td style="text-align: left;"> ACF of Squared Standardized Residuals </td>
</tr>
<tr>
<td style="text-align: right;">
 6 </td>
<td style="text-align: left;"> Cross Correlation between r^2 and r </td>
</tr>
<tr>
<td style="text-align: right;">
 7 </td>
<td style="text-align: left;"> QQ-Plot of Standardized Residuals</td>
</tr>
</table>
<p> The
default produces plots of autocorrelations and partial
autocorrelations of the standardised conditional residuals, as well as
a QQ-plot for the fitted conditional distribution.  If <code>plot</code> is
<code>TRUE</code>, you probably need also <code>ask = TRUE</code>.
</p>
<p>If argument <code>plot</code> is of length two the graphics window is split
into 2 equal subwindows. Argument <code>layout</code> can still be used to
change this.  If argument <code>plot</code> is of length one the graphics
window is not split at all.
</p>
<p>In interactive sessions, if the number of requested graphs (as
specified by argument <code>plot</code>) is larger than the number of graphs
specified by the layout (by default 3), the function makes the first
graph and then presents a menu of the requested plots. 
</p>
<p>Argument <code>layout</code> can be used to change the layout of the plot,
for example to put two graphs per plot, see the examples. Currently it
should be a list of arguments for <code>layout</code>, see <code>?layout</code>.
Don't call <code>layout</code> youself, as that will change the graphics
device prematurely.
</p>
<p>The computed results are returned (invisibly). This is another
difference from <code>stats::tsdiag</code> which doesn't return them.
</p>


<h3>Value</h3>

<p>(experimental, may change)
a list with components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>standardised conditional residuals,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof</code></td>
<td>

<p>goodness-of-fit tests, pretending parameters are known,
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gof_composite</code></td>
<td>

<p>goodness-of-fit tests taking into account that the parameters are
estimated.
</p>
</td>
</tr>
</table>
<p>Only components that are actually computed are included, the rest are
NULL or absent.
</p>


<h3>Author(s)</h3>

<p>Georgi N. boshnakov</p>


<h3>See Also</h3>

<p><code>fGARCH</code> method for <code>plot</code>,
</p>
<p><code>tsdiag</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(20230612)
x &lt;- garchSim(n = 200)
fit &lt;- garchFit(formula = ~ garch(1, 1), data = x, trace = FALSE)
fit_test &lt;- tsdiag(fit)
fit_test

## 2x2 matrix with acf of r, r^2 on diag, cor(r,r^2) below it, and qq-plot
tsdiag(fit, plot = c(4, 6, 7, 5), layout = list(matrix(1:4, nrow = 2)))
</code></pre>


</div>