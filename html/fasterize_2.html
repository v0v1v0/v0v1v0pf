<div class="container">

<table style="width: 100%;"><tr>
<td>fasterize</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rasterize a vector or dataframe object of polygons</h2>

<h3>Description</h3>

<p>Rasterize set of polygons
</p>


<h3>Usage</h3>

<pre><code class="language-R">fasterize(
  sf,
  raster,
  field = NULL,
  fun = "last",
  background = NA_real_,
  by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sf</code></td>
<td>
<p>a polygon vector or data frame object with a geometry column of POLYGON and/or
MULTIPOLYGON (equivalent) objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raster</code></td>
<td>
<p>A raster  object. Used as a template for the raster output.
Can be created with <code>raster::raster()</code>.
The fasterize package provides a method to create a raster object from
an polygon dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p>character (or numeric vector). The name of a column in <code>sf</code>,
providing a value for each of the polygons rasterized. If NULL (default),
all polygons will be given a value of 1.  If a numeric vector this value
will be used as the value given to the pixel.   (No recycling is done).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>character. The name of a function by which to combine overlapping
polygons. Currently takes "sum", "first", "last", "min", "max", "count", or
"any".  Future versions may include more functions or the ability to pass
custom R/C++ functions. If you need to summarize by a different function,
use <code style="white-space: pre;">⁠by=⁠</code> to get a RasterBrick and then <code>raster::stackApply()</code> or
<code>raster::calc()</code> to summarize.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>numeric. Value to put in the cells that are not covered by
any of the features of x. Default is NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character.  The name of a column in <code>sf</code> by which to aggregate
layers.  If set, fasterize will return a RasterBrick with as many layers
as unique values of the <code>by</code> column.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a high-performance replacement for <code>raster::rasterize()</code>.
</p>
<p>The algorithm is based on the method described in course materials provided
by <a href="https://labs.wsu.edu/wayne-cochran/">Wayne O. Cochran</a>. The algorithm
is originally attributed to
Wylie et al. (1967) <a href="https://doi.org/10.1145/1465611.1465619">doi:10.1145/1465611.1465619</a>.
</p>
<p>Note that original implementation worked only for sf dataframes of class "sf", but this
now works for any polygon vector (sfc, wkt, wkb, geos) or dataframe with a polygon vector
supported by the wk package handlers.
</p>


<h3>Value</h3>

<p>A raster of the same size, extent, resolution and projection as the
provided raster template.
</p>


<h3>References</h3>

<p>Wylie, C., Romney, G., Evans, D., &amp; Erdahl, A. (1967).
Half-tone perspective drawings by computer. Proceedings of the November
14-16, 1967, Fall Joint Computer Conference. AFIPS '67 (Fall).
<a href="https://doi.org/10.1145/1465611.1465619">doi:10.1145/1465611.1465619</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(wk)
library(fasterize)
p123 &lt;- c(paste0("POLYGON ((-180 -20, -140 55, 10 0, -140 -60, -180 -20),", 
                 "(-150 -20, -100 -10, -110 20, -150 -20))"), 
            "POLYGON ((-10 0, 140 60, 160 0, 140 -55, -10 0))", 
            "POLYGON ((-125 0, 0 60, 40 5, 15 -45, -125 0))")
pols &lt;- data.frame(value = seq_along(p123), geometry = wk::as_wkt(p123))
ex &lt;- as.numeric(wk_bbox(pols))[c(1, 3, 2, 4)]
r &lt;- raster::raster(raster::extent(ex), res = 1)
r &lt;- fasterize(pols, r, field = "value", fun="sum")
plot(r)
</code></pre>


</div>