<div class="container">

<table style="width: 100%;"><tr>
<td>ftply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read, process each block and return a data.table</h2>

<h3>Description</h3>

<p><code>ftply</code> takes as input the path to a file and a function, and
returns a <code>data.table</code>. It is a faster equivalent to using
<code>l &lt;- flply(...)</code> followed by <code>do.call(rbind, l)</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ftply(
  input,
  FUN = function(d, by) d,
  ...,
  key.sep = "\t",
  sep = "\t",
  skip = 0,
  header = TRUE,
  nblocks = Inf,
  stringsAsFactors = FALSE,
  colClasses = NULL,
  select = NULL,
  drop = NULL,
  col.names = NULL,
  parallel = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>Path of the input file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>Function to be applied to each block. It must take at least two arguments,
the first of which is a <code>data.table</code> containing the current block, <em>without
the first field</em>; the second argument is a character vector containing the
value of the first field for the current block.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to FUN.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.sep</code></td>
<td>
<p>The character that delimits the first field from the rest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>The field delimiter (often equal to <code>key.sep</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>Number of lines to skip at the beginning of the file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p>Whether the file has a header.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nblocks</code></td>
<td>
<p>The number of blocks to read.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stringsAsFactors</code></td>
<td>
<p>Whether to convert strings into factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colClasses</code></td>
<td>
<p>Vector or list specifying the class of each field.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>The columns (names or numbers) to be read.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>The columns (names or numbers) not to be read.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.names</code></td>
<td>
<p>Names of the columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Number of cores to use.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ftply</code> is similar to <code>ffply</code>, but while the latter writes
to disk the result of the processing after each block, the former
keeps the result in memory until all the file has been processed, and
then returns the complete <code>data.table</code>.
</p>


<h3>Value</h3>

<p>Returns a <code>data.table</code> with the results of the
processing.
</p>


<h3>Slogan</h3>

<p>ftply: from <strong>f</strong>ile to data.<strong>t</strong>able
</p>


<h3>Examples</h3>

<pre><code class="language-R">f1 &lt;- system.file("extdata", "dt_iris.csv", package = "fplyr")

# Compute the mean of the columns for each species
ftply(f1, function(d, by) d[, lapply(.SD, mean)])

# Read only the first two blocks
ftply(f1, nblocks = 2)

</code></pre>


</div>