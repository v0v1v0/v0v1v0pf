<div class="container">

<table style="width: 100%;"><tr>
<td>iterate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply a function repeatedly</h2>

<h3>Description</h3>

<p>Apply a function to a value, then reapply the same function to the result and
so on... until a condition on the result is met (or a certain number of
iterations reached).
</p>


<h3>Usage</h3>

<pre><code class="language-R">iterate(x, f, stop_fun = NULL, stop_n = Inf, accumulate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>initial value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>the function to apply.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop_fun</code></td>
<td>
<p>a predicate (function) evaluated on the current result, which
will stop the process if its result is <code>TRUE</code>. If not provided, the
process will stop after <code>stop_n</code> iteration (see below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop_n</code></td>
<td>
<p>maximal number of times the function will be applied (mandatory
if <code>stop_fun</code> is not defined).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accumulate</code></td>
<td>
<p>by default, the function returns only the last element. To
get the list of all intermediate results, turn this parameter to
<code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>As it is a very generic function (<code>x</code> can be any type of object) and the
number of computations cannot be known in advance, <code>iterate</code> can be
quite inefficient (particularly if you use <code>accumulate = TRUE</code>).
</p>


<h3>Value</h3>

<p>The last result, or the list of all results if
<code>accumulate = TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># https://en.wikipedia.org/wiki/Collatz_conjecture
syracuse &lt;- function(x) if (x %% 2) 3 * x + 1 else x / 2
iterate(
  10,
  syracuse,
  stop_fun = function(n) n == 1,
  accumulate = TRUE
)

# https://en.wikipedia.org/wiki/H%C3%A9non_map
henon_attractor &lt;-
  iterate(
    c(-1, 0.1),
    function(x) c(1 - 1.4 * x[1]^2 + x[2], 0.3 * x[1]),
    stop_n = 5000,
    accumulate = TRUE
  )
plot(
  sapply(henon_attractor, function(.) .[1]),
  sapply(henon_attractor, function(.) .[2]),
  pch = "."
)
</code></pre>


</div>