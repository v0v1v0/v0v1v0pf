<div class="container">

<table style="width: 100%;"><tr>
<td>fsr_geometric_operations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute fuzzy geometric set operations</h2>

<h3>Description</h3>

<p>The spatial plateau set operations <em>plateau intersection</em>, <em>plateau union</em>, and <em>plateau difference</em> implement
the respective operations <em>fuzzy geometric intersection</em>, <em>fuzzy geometric union</em>, and <em>fuzzy geometric difference</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spa_intersection(pgo1, pgo2, itype = "min", as_pcomposition = FALSE)

spa_union(pgo1, pgo2, utype = "max", as_pcomposition = FALSE)

spa_difference(pgo1, pgo2, dtype = "f_diff", as_pcomposition = FALSE)

spa_common_points(pline1, pline2, itype = "min")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pgo1</code></td>
<td>
<p>A <code>pgeometry</code> object of any type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pgo2</code></td>
<td>
<p>A <code>pgeometry</code> object of any type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itype</code></td>
<td>
<p>A character value that indicates the name of a function implementing a t-norm. The default value is <code>"min"</code>, which is the standard operator of the intersection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_pcomposition</code></td>
<td>
<p>A logical value; if <code>TRUE</code>, it returns a spatial plateau composition object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>utype</code></td>
<td>
<p>A character value that refers to a t-conorm. The default value is <code>"max"</code>, which is the standard operator of the union.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dtype</code></td>
<td>
<p>A character value that indicates the name of a difference operator. The default value is <code>"f_diff"</code>, which implements the standard fuzzy difference.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pline1</code></td>
<td>
<p>A <code>pgeometry</code> object of the type <code>PLATEAULINE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pline2</code></td>
<td>
<p>A <code>pgeometry</code> object of the type <code>PLATEAULINE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>They receive two <code>pgeometry</code> objects of the <em>any type</em> as input and yield another <code>pgeometry</code> object as output.
The family of fuzzy geometric set operations consists of the following functions:
</p>

<ul>
<li> <p><code>spa_intersection()</code> computes the geometric intersection of two spatial plateau objects.
The membership degree of common points are calculated by using a t-norm operator given by the parameter <code>itype</code>. Currently, it can assume <code>"min"</code> (default) or <code>"prod"</code>.
</p>
</li>
<li> <p><code>spa_union()</code> computes the geometric union of two spatial plateau objects.
The membership degree of common points are calculated by using a t-conorm operator given by the parameter <code>utype</code>. Currently, it can assume <code>"max"</code> (default).
</p>
</li>
<li> <p><code>spa_difference()</code> computes the geometric difference of two spatial plateau objects.
The membership degree of common points are calculated by using a difference operator given by the parameter <code>dtype</code>.
Currently, it can assume <code>"f_diff"</code> (default fuzzy difference), <code>"f_bound_diff"</code> (fuzzy bounded difference), <code>"f_symm_diff"</code> (fuzzy symmetric difference), or <code>"f_abs_diff"</code> (fuzzy absolute difference).
</p>
</li>
</ul>
<p>Other t-norms, t-conorms, and difference operators can be implemented and given as values for the parameters <code>itype</code>, <code>utype</code>, and <code>dtype</code>, respectively.
For this, the following steps should be performed:
</p>

<ol>
<li>
<p> Implement your function that accepts two numeric values in [0, 1] as inputs and yields another numeric value in [0, 1] as output. Recall that t-norms and t-conorms must have some specific properties according to the fuzzy set theory.
</p>
</li>
<li>
<p> Use the name of your function as the character value of the corresponding parameter <code>itype</code>, <code>utype</code>, or <code>dtype</code>.
</p>
</li>
</ol>
<p>An example of operator is the source code of <code>f_bound_diff()</code>:
</p>
<p><code>f_bound_diff &lt;- function(x, y) { max(0, (x - y)) }</code>
</p>
<p>The <code>spa_common_points()</code> is deprecated. In the past, it computed the common points of two plateau line objects; now, you can use <code>spa_intersection()</code>.
</p>


<h3>Value</h3>

<p>A <code>pgeometry</code> object that is the result of a fuzzy geometric set operation.
</p>


<h3>References</h3>

<p><a href="https://onlinelibrary.wiley.com/doi/10.1111/tgis.13044">Carniel, A. C.; Ven√¢ncio, P. V. A. B; Schneider, M. fsr: An R package for fuzzy spatial data handling. Transactions in GIS, vol. 27, no. 3, pp. 900-927, 2023.</a>
</p>
<p>Underlying concepts and formal definitions of spatial plateau set operations are explained in detail in:
</p>

<ul>
<li> <p><a href="https://ieeexplore.ieee.org/document/8491565">Carniel, A. C.; Schneider, M. Spatial Plateau Algebra: An Executable Type System for Fuzzy Spatial Data Types. In Proceedings of the 2018 IEEE International Conference on Fuzzy Systems (FUZZ-IEEE 2018), pp. 1-8, 2018.</a>
</p>
</li>
<li> <p><a href="https://ieeexplore.ieee.org/document/9177620">Carniel, A. C.; Schneider, M. Spatial Data Types for Heterogeneously Structured Fuzzy Spatial Collections and Compositions. In Proceedings of the 2020 IEEE International Conference on Fuzzy Systems (FUZZ-IEEE 2020), pp. 1-8, 2020.</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)

# Point components
pcp1 &lt;- create_component("POINT(0 0)", 0.3)
pcp2 &lt;- create_component("MULTIPOINT((2 2), (2 4), (2 0))", 0.5)
pcp3 &lt;- create_component("MULTIPOINT((1 1), (3 1), (1 3), (3 3))", 0.9)

pcp4 &lt;- create_component("MULTIPOINT((2 2), (2 4), (3 2))", 1)
pcp5 &lt;- create_component("MULTIPOINT((0 0), (2 3))", 0.7)
pcp6 &lt;- create_component("MULTIPOINT((0 1), (3 3))", 0.85)
pcp7 &lt;- create_component("MULTIPOINT((1 0), (4 2))", 0.4)
# Line components
lcp1 &lt;- create_component("LINESTRING(0 0, 1 1.5)", 0.2)
lcp2 &lt;- create_component("LINESTRING(1 3, 1 2, 2 0.5)", 0.5)
lcp3 &lt;- create_component("LINESTRING(2 1.2, 3 1.6, 4 4)", 0.7)

lcp4 &lt;- create_component("LINESTRING(1 1.5, 2 1.2)", 1.0)
lcp5 &lt;- create_component("LINESTRING(-1 1, 2 2)", 0.9)
# Polygon components
rcp1 &lt;- create_component("POLYGON((0 0, 1 4, 2 2, 0 0))", 0.4)
rcp2 &lt;- create_component("POLYGON((2 0.5, 4 1, 4 0, 2 0.5))", 0.8)

# Creating plateau point objects
ppoint1 &lt;- create_pgeometry(list(pcp1, pcp2, pcp3), "PLATEAUPOINT")
ppoint2 &lt;- create_pgeometry(list(pcp4, pcp5, pcp6, pcp7), "PLATEAUPOINT")
# Creating plateau line objects
pline1 &lt;- create_pgeometry(list(lcp1, lcp2, lcp3), "PLATEAULINE")
pline2 &lt;- create_pgeometry(list(lcp4, lcp5), "PLATEAULINE")
# Creating a plateau region objects
pregion &lt;- create_pgeometry(list(rcp1, rcp2), "PLATEAUREGION")

# Defining a wrapper to combine plots side by side, for convenience
combine_plots &lt;- function(plot1, plot2, plot3) {
  # setting the same range of coordinates and removing the legend of plot1 and plot2
  plot1 &lt;- plot1 + coord_sf(xlim = c(0, 4), ylim = c(0, 4)) + theme(legend.position = "none")
  plot2 &lt;- plot2 + coord_sf(xlim = c(0, 4), ylim = c(0, 4)) + theme(legend.position = "none")
  plot3 &lt;- plot3 + coord_sf(xlim = c(0, 4), ylim = c(0, 4))
  ggplot() +
    annotation_custom(ggplotGrob(plot1), xmin = 0, xmax = 0.5, ymin = 0.5, ymax = 1) +
    annotation_custom(ggplotGrob(plot2), xmin = 0.5, xmax = 1, ymin = 0.5, ymax = 1) +
    annotation_custom(ggplotGrob(plot3), xmin = 0, xmax = 1, ymin = 0, ymax = 0.5) +
    coord_cartesian(xlim = c(0, 1), ylim = c(0, 1)) +
    theme_void()
}

plot_ppoint1 &lt;- plot(ppoint1) + ggtitle("Plateau point 1")
plot_ppoint2 &lt;- plot(ppoint2) + ggtitle("Plateau point 2")
plot_pline1 &lt;- plot(pline1) + ggtitle("Plateau line 1")
plot_pline2 &lt;- plot(pline2) + ggtitle("Plateau line 2")
plot_pregion &lt;- plot(pregion) + ggtitle("Plateau region")

# Computing the intersection
ppoints_intersec &lt;- spa_intersection(ppoint1, ppoint2)
plot_inter &lt;- plot(ppoints_intersec) + ggtitle("Intersection")
combine_plots(plot_ppoint1, plot_ppoint2, plot_inter)

## Not run: 
# varying the t-norm 
ppoints_intersec &lt;- spa_intersection(ppoint1, ppoint2, itype = "prod")
plot_inter &lt;- plot(ppoints_intersec) + ggtitle("Intersection (prod)")
combine_plots(plot_ppoint1, plot_ppoint2, plot_inter)

plines_intersec &lt;- spa_intersection(pline1, pline2)
plot_inter &lt;- plot(plines_intersec) + ggtitle("Intersection")
combine_plots(plot_pline1, plot_pline2, plot_inter)

pregion_pline_intersec &lt;- spa_intersection(pline1, pregion)
plot_inter &lt;- plot(pregion_pline_intersec) + ggtitle("Intersection")
combine_plots(plot_pline1, plot_pregion, plot_inter)

# Computing the union
ppoints_union &lt;- spa_union(ppoint1, ppoint2)
plot_union &lt;- plot(ppoints_union) + ggtitle("Union")
combine_plots(plot_ppoint1, plot_ppoint2, plot_union)

plines_union &lt;- spa_union(pline1, pline2)
plot_union &lt;- plot(plines_union) + ggtitle("Union")
combine_plots(plot_pline1, plot_pline2, plot_union)

pregion_pline_union &lt;- spa_union(pline1, pregion)
plot_union &lt;- plot(pregion_pline_union) + ggtitle("Union")
combine_plots(plot_pline1, plot_pregion, plot_union)

# Computing the difference
ppoints_diff &lt;- spa_difference(ppoint1, ppoint2)
plot_diff &lt;- plot(ppoints_diff) + ggtitle("Difference")
combine_plots(plot_ppoint1, plot_ppoint2, plot_diff)

plines_diff &lt;- spa_difference(pline1, pline2)
plot_diff &lt;- plot(plines_diff) + ggtitle("Difference")
combine_plots(plot_pline1, plot_pline2, plot_diff)

pregion_pline_diff &lt;- spa_difference(pline1, pregion)
plot_diff &lt;- plot(pregion_pline_diff) + ggtitle("Difference")
combine_plots(plot_pline1, plot_pregion, plot_diff)

## End(Not run)
</code></pre>


</div>