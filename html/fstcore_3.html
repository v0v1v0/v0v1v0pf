<div class="container">

<table style="width: 100%;"><tr>
<td>threads_fstlib</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get or set the number of threads used in parallel operations</h2>

<h3>Description</h3>

<p>For parallel operations, the performance is determined to a great extend by the number of threads
used. More threads will allow the CPU to perform more computational intensive tasks simultaneously,
speeding up the operation. Using more threads also introduces some overhead that will scale with the
number of threads used. Therefore, using the maximum number of available threads is not always the
fastest solution. With <code>threads_fstlib</code> the number of threads can be adjusted to the users
specific requirements. As a default, <code>fstcore</code> uses a number of threads equal to the number of
logical cores in the system.
</p>


<h3>Usage</h3>

<pre><code class="language-R">threads_fstlib(nr_of_threads = NULL, reset_after_fork = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nr_of_threads</code></td>
<td>
<p>number of threads to use or <code>NULL</code> to get the current number of threads used in
multithreaded operations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reset_after_fork</code></td>
<td>
<p>when <code>fstcore</code> is running in a forked process, the usage of OpenMP can
create problems. To prevent these, <code>fstcore</code> switches back to single core usage when it detects a fork.
After the fork, the number of threads is reset to it's initial setting. However, on some compilers
(e.g. Intel), switching back to multi-threaded mode can lead to issues. When <code>reset_after_fork</code>
is set to <code>FALSE</code>, <code>fstcore</code> is left in single-threaded mode after the fork ends. After the fork,
multithreading can be activated again manually by calling <code>threads_fstlib</code> with an appropriate value
for <code>nr_of_threads</code>. The default (<code>reset_after_fork = NULL</code>) leaves the fork behavior unchanged.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The number of threads can also be set with <code>options(fst_threads = N)</code>.
NOTE: This option is only read when the package's namespace is first loaded, with commands like
<code>library</code>, <code>require</code>, or <code>::</code>. If you have already used one of these, you
must use <code>threads_fstlib</code> to set the number of threads.
</p>


<h3>Value</h3>

<p>the number of threads (previously) used
</p>


<h3>Examples</h3>

<pre><code class="language-R"># get current number of threads
threads_fstlib()

# set the number of threads
threads_fstlib(12)

# leave in single threaded mode after a fork
threads_fstlib(12, reset_after_fork = FALSE)

# reset number of threads after a fork
threads_fstlib(12, reset_after_fork = TRUE)
</code></pre>


</div>