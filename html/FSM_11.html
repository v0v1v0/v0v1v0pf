<div class="container">

<table style="width: 100%;"><tr>
<td>tasmd_rand</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Target Absolute Standardized Mean Differences (TASMD)</h2>

<h3>Description</h3>

<p>Computes the mean and standard deviation of Target Absolute Standardized Mean Differences (TASMD) of 
multiple covariates (or transformations thereof) in a treatment group relative to a target population 
or a target individual for a set of assignments under one or two designs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tasmd_rand(
  data_frame,
  index_col = FALSE,
  alloc1,
  alloc2,
  treat_lab = 1,
  legend = c("CRD", "FSM"),
  mean_tar = NULL,
  sd_tar = NULL,
  denom = "target",
  roundoff = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data_frame</code></td>
<td>
<p>Data frame containing a column of unit indices (optional) and covariates 
(or transformations thereof).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_col</code></td>
<td>
<p>if <code>TRUE</code>, <code>data_frame</code> contains a column of unit indices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alloc1</code></td>
<td>
<p>A matrix or vector of treatment assignments. If <code>alloc1</code> is a matrix, then each row
should correspond to an assignment vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alloc2</code></td>
<td>
<p>A (optional) matrix or vector of treatment assignment. If <code>alloc2</code> is a matrix, then each row
should correspond to an assignment vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat_lab</code></td>
<td>
<p>Label of the treatment group in which the TASMD is computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>Legend of the two designs under consideration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean_tar</code></td>
<td>
<p>A (optional) vector of target profile of the covariates under consideration, 
e.g., mean of the covariates in the target population. Applicable only when <code>imbalance = 'TASMD'</code>. 
If <code>mean_tar = NULL</code>, the full-sample average of the covariates is considered as the target profile.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_tar</code></td>
<td>
<p>A optional vector of the standard deviation of the covariates in the target population. 
Applicable only when <code>imbalance = 'TASMD'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denom</code></td>
<td>
<p>Specifies the denominator for the computation of TASMD. If <code>denom = 'target'</code>, 
the standard deviations of the covariates in the target population are used. If <code>denom = 'group'</code>, 
the standard deviations of the covariates in the treatment group given by <code>treat_lab</code> are used. 
Applicable only when <code>imbalance = 'TASMD'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundoff</code></td>
<td>
<p>A number indicating the number of decimal places to be used for rounding off the TASMDs.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the following items (if <code>alloc1</code> and <code>alloc2</code> are matrices)
</p>
<p><code>tasmd_table</code>: A matrix containing the means (standard deviations in parenthesis) of the TASMDs
for the designs under consideration. If <code>alloc1</code> or <code>alloc2</code> is a vector, the
TASMD of the corresponding assignment is returned.
</p>
<p><code>tasmd_mean</code>: A matrix containing the means of the TASMDs for the designs under consideration.
</p>
<p><code>tasmd_sd</code>: A matrix containing the standard deviations of the TASMDs for the designs under consideration.
</p>
<p>If <code>alloc1</code> and <code>alloc2</code> are vectors, <code>tasmd_rand</code> produces a data frame of the corresponding TASMDs.
</p>


<h3>Author(s)</h3>

<p>Ambarish Chattopadhyay, Carl N. Morris and Jose R. Zubizarreta.
</p>


<h3>References</h3>

<p>Chattopadhyay, A., Morris, C. N., and Zubizarreta, J. R. (2020), â€œRandomized and Balanced Allocation 
of Units into Treatment Groups Using the Finite Selection Model for <code>R</code>".
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Consider the Lalonde dataset.
# Get the full sample size.
N = nrow(Lalonde)
# Get the treatment group sizes.
n1 = floor(N/2)
n2 = N-n1
# Generate an SOM.
som_obs = som(n_treat = 2, treat_sizes = c(n1,n2),include_discard = FALSE,
method = 'SCOMARS', marginal_treat = rep((n2/N),N), control = FALSE)
# Generate a treatment assignment given som_obs.
f = fsm(data_frame = Lalonde, SOM = som_obs, s_function = 'Dopt', eps = 0.0001, 
ties = 'random', intercept = TRUE, standardize = TRUE, units_print = FALSE)
# Get assignment vector under the FSM.
Z_fsm_obs = f$data_frame_allocated$Treat
# Draw a random CRD.
Z_crd_obs = crd(data_frame = Lalonde, n_treat = 2, treat_sizes = c(n1, n2), 
control = FALSE)$Treat
# Calculate the TASMD.
TASMD = tasmd_rand(data_frame = Lalonde, index_col = TRUE, alloc1 = Z_crd_obs, 
alloc2 = Z_fsm_obs, treat_lab = 1, mean_tar = NULL, sd_tar = NULL, 
denom = 'target', legend = c('CRD','FSM'), roundoff = 3)
</code></pre>


</div>