<div class="container">

<table style="width: 100%;"><tr>
<td>ft_insert</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Insert New Levels into a Factor Vector After Specified Targets</h2>

<h3>Description</h3>

<p>Inserts one or more new levels into a factor vector immediately after specified target levels or
positions. Each new level corresponds to its respective target in a one-to-one manner.
Supports exact matches, position-based targeting, and pattern-based matching with optional case sensitivity.
Can handle multiple insertions, manage duplicates, and optionally reorder the data vector's elements to
align with the new levels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ft_insert(
  factor_vec,
  insert,
  target = NULL,
  positions = NULL,
  pattern = NULL,
  case = FALSE,
  insert_after_na = FALSE,
  allow_duplicates = FALSE,
  inplace = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>factor_vec</code></td>
<td>
<p>A factor vector into which new levels will be inserted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>insert</code></td>
<td>
<p>A character vector of new levels to insert. Each new level corresponds to the respective target level or position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>A character vector specifying the levels after which the new levels will be inserted. Overrides <code>positions</code> and <code>pattern</code> if provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>positions</code></td>
<td>
<p>An integer vector specifying the positions of levels after which the new levels will be inserted. Overrides <code>target</code> and <code>pattern</code> if both are provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>A regular expression pattern to identify target levels for insertion. Overrides both <code>target</code> and <code>positions</code> if provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case</code></td>
<td>
<p>Logical. Should pattern matching be case-sensitive? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>insert_after_na</code></td>
<td>
<p>Logical. Should <code>NA</code> be considered as a target level for insertion? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_duplicates</code></td>
<td>
<p>Logical. If <code>TRUE</code>, allows insertion of new levels that already exist in the factor by making them unique (appending suffixes). Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inplace</code></td>
<td>
<p>Logical. If <code>TRUE</code>, returns a new factor vector with elements reordered to align with the new levels' order. If <code>FALSE</code>, returns a new factor vector with only the levels' order adjusted, leaving the data vector's elements' order unchanged. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A new factor vector with the new levels inserted at the specified positions. If <code>inplace = TRUE</code>, the data vector's elements are reordered to match the new levels' order. If <code>inplace = FALSE</code>, only the levels' order is adjusted without changing the data vector's elements' order.
</p>


<h3>Author(s)</h3>

<p>Kai Guo
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1: Insert 'date' after position 2 and 'grape' after position 4
# without allowing duplicates, returning a new factor vector
factor_vec &lt;- factor(c('apple', 'banana', 'cherry', 'date', 'fig', 'grape'))
new_factor &lt;- ft_insert(
  factor_vec,
  insert = c('date', 'grape'),
  positions = c(2, 4),
  inplace = FALSE
)
print(new_factor)
# [1] apple  banana date   cherry fig    grape
# Levels: apple banana date cherry fig grape

# Example 2: Insert 'date' after position 2 and 'grape' after position 4,
# allowing duplicates, returning a new factor vector
new_factor_dup &lt;- ft_insert(
  factor_vec,
  insert = c('date', 'grape'),
  positions = c(2, 4),
  allow_duplicates = TRUE,
  inplace = FALSE
)
print(new_factor_dup)
# [1] apple  banana date   cherry fig    grape.1
# Levels: apple banana date cherry fig grape.1

# Example 3: Insert 'date' after position 2 and 'grape' after position 4,
# and reorder data elements
new_factor_inplace &lt;- ft_insert(
  factor_vec,
  insert = c('date', 'grape'),
  positions = c(2, 4),
  inplace = TRUE
)
print(new_factor_inplace)
# [1] apple  banana date   cherry fig    grape
# Levels: apple banana date cherry fig grape

# Example 4: Insert 'kiwi' after 'banana' and 'grape', case-sensitive,
# allowing duplicates, returning a new factor vector
factor_vec_case &lt;- factor(c('Apple', 'banana', 'Cherry', 'date', 'Fig', 'grape'))
new_factor_case &lt;- ft_insert(
  factor_vec_case,
  insert = c('kiwi', 'kiwi'),
  target = c('banana', 'grape'),
  case = TRUE,
  allow_duplicates = TRUE,
  inplace = FALSE
)
print(new_factor_case)
# [1] Apple   banana  Cherry  date    Fig     grape   kiwi    kiwi.1

# Example 5: Insert 'lychee' after NA, returning a new factor vector
factor_vec_na &lt;- factor(c('apple', NA, 'banana', 'cherry', NA, 'date'))
new_factor_na &lt;- ft_insert(
  factor_vec_na,
  insert = 'lychee',
  insert_after_na = TRUE,
  inplace = FALSE
)
print(new_factor_na)
# [1] apple  &lt;NA&gt;    lychee banana cherry &lt;NA&gt;    date
# Example 6:
factor_vec &lt;- factor(c('apple', 'banana', 'cherry', 'date', 'fig', 'grape'))
</code></pre>


</div>