<div class="container">

<table style="width: 100%;"><tr>
<td>construct.treeRK</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Constructs a classification tree on the (training) dataset, by implementing
the RK (Random 'K') algorithm
</h2>

<h3>Description</h3>

<p>Constructs a classification tree based on the dataset of interest by
implementing the RK (Random 'K') algorithm.
</p>
<p>The package <code>rapportools</code> is loaded internally when this function is
called; this is to use the method <code>is.boolean</code> to check one of the
stopping criteria in the beginning of the function. The functions specifically
from the <code>forestRK</code> package that are being used inside
<code>construct.treeRK</code> are <code>criteria.calculator</code> and
<code>cutoff.node.and.covariate.index.finder</code>.
</p>
<p>The <code>construct.treeRK</code> output is one of the arguments that is used to call
the <code>pred.treeRK</code> function.
</p>
<p>DESCRIPTIONS OF THE RETURNED VALUES:
</p>
<p>The hirarchical flag of a rktree (<code>construct.treeRK()$flag</code>) is
constructed in the following way:
</p>
<p>(1) the first entry of the flag, "r" denotes for "root";
(2) the subsequent strings of the flag is constructed in the way that last "x"
denotes for the left child node of the node represented by the series of
characters that are before the last "x", and the last "y" denotes for the
right child node of the node represented by the series of characters that are
before the last "y".
</p>
<p>For example, the flag "rxyx" is the left child node of the node represented
by "rxy".
</p>
<p><code>x.node.list</code> and <code>y.node.list</code> are the lists of children nodes
(for <code>x</code> and <code>y</code>, respectively) of the <code>rktree</code>,
listed in the order consistent to the order of the nodes represented in the
<code>rktree</code>'s hirarchical flag.
</p>
<p><code>covariate.split</code> is a matrix that lists the numericized covariate names
that were used for the splits to construct the rktree. The first entry of
<code>covariate.split</code> is <code>NA</code>, which stands for the condition at the
root. The number immediately underneath <code>NA</code> is the numericized covariate
name that was used for the first split in the <code>rktree</code>, and the number
below that is the numericized covariate name that was used for the
second split, etc. If the numericized covariate name listed under
<code>covariate.split</code> is the number "n", this corresponds to the "n"-th
covariate or the name of the "n"-th column of the data frame <code>x.train</code>.
</p>
<p><code>value.at.split</code> is a vector that lists the actual values of the
covariates at which the split had occured while constructing the rktree.
The first entry of <code>value.at.split</code> is <code>NA</code>, which denotes for the
root prior to any splits. To give an example of how to interpret the
<code>value.at.split</code>, if the second entry appear in the <code>covariate.split</code>
is 4, and the second entry appear under <code>value.at.split</code> is 0.5, this
indicates that the first split of the rktree had occured on the covariate
corresponds to the 4th column of the data frame <code>x.train</code>, and the exact
criteria for that first split was (4th covariate value) &lt;= 0.5 vs.
(4th covariate value) &gt; 0.5.
</p>
<p><code>amount.decrease.criteria</code> is a matrix that lists the amount of decrease
in splitting criteria (Entropy or Gini Index) after each split had occurred.
The first entry of <code>amount.decrease.criteria</code> is <code>NA</code>,
which denotes for the condition at the root (no split). To give an example,
if the second entry appear in the <code>amount.decrease.criteria</code> is 0.91,
and if <code>entropy</code> was set to <code>TRUE</code>, this means that after the first
split, the Entropy of the original node had decreased by 0.91.
</p>
<p><code>num.obs</code> is a matrix that stores the number of observations contained
within a parent node prior to the split; the matrix starts with the entry "NA",
in order to reflect the condition at "root". The 2nd entry of <code>num.obs</code>
would inform us on the number of observations contained within the parent node
on which the 1st split had took place while the <code>rktree</code> was built; the
3rd entry of the <code>num.obs</code> would inform us on the number of observations
contained within the parent node on which the 2nd split had took place,
and so on.
</p>


<h3>Usage</h3>

<pre><code class="language-R"> construct.treeRK(x.train = data.frame(), y.new.train = c(),
                  min.num.obs.end.node.tree = 5, entropy = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x.train</code></td>
<td>

<p>a numericized data frame of covariates of the data on which we want to
build our rktree models (typically the training data); this data frame can be
obtained by applying the <code>x.organizer</code> function. <code>x.train</code> should
contain no <code>NA</code> or <code>NaN</code>'s.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.new.train</code></td>
<td>

<p>a numericized class types of the observations from the dataset on which we
want to build our rktree models (typically the training data).
<code>y.new.train</code> should contain no <code>NA</code> or <code>NaN</code>'s.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.num.obs.end.node.tree</code></td>
<td>

<p>the minimum number of observations that we want each end node of our
rktree to contain. Default is set to '5'.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entropy</code></td>
<td>

<p><code>TRUE</code> if Entropy is used as the splitting criteria;
<code>FALSE</code> if Gini Index is used as the splitting criteria.
Default is set to <code>TRUE</code>.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the following items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>covariate.names</code></td>
<td>

<p>a vector of the names of all covariates that we consider in our model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>

<p>length of the hierarchical flag.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.node.list</code></td>
<td>

<p>a list containing a series of children nodes produced from the numericized
data frame <code>x.train</code> as the <code>rktree</code> model was building up.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.new.node.list</code></td>
<td>

<p>a list containing a series of children nodes produced from the numericized
vector of class type <code>y.new.train</code> as the <code>rktree</code> model was
building up.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flag</code></td>
<td>

<p>hierchical flag that characterizes each split in the <code>rktree</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariate.split</code></td>
<td>

<p>a matrix that lists numericized covariates used for each split as the
<code>rktree</code> was built.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value.at.split</code></td>
<td>

<p>a vector that lists the values at which each node of the <code>rktree</code>
was split.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>amt.decrease.criteria</code></td>
<td>

<p>a matrix that lists the amount of decrease in splitting criteria after
each split as the <code>rktree</code> was built.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.obs</code></td>
<td>

<p>a matrix that stores the number of observations contained in each parent node
right before each split.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Hyunjin Cho, <a href="mailto:h56cho@uwaterloo.ca">h56cho@uwaterloo.ca</a>
Rebecca Su, <a href="mailto:y57su@uwaterloo.ca">y57su@uwaterloo.ca</a>
</p>


<h3>See Also</h3>

<p><code>pred.treeRK</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">  ## example: iris dataset
  ## load the forestRK package
  library(forestRK)

  ## numericize the data
  x.train &lt;- x.organizer(iris[,1:4], encoding = "num")[c(1:25,51:75,101:125),]
  y.train &lt;- y.organizer(iris[c(1:25,51:75,101:125),5])$y.new

  # Construct a tree
  # min.num.obs.end.node.tree is set to 5 by default;
  # entropy is set to TRUE by default
  tree.entropy &lt;- construct.treeRK(x.train, y.train)
  tree.gini &lt;- construct.treeRK(x.train, y.train,
                                min.num.obs.end.node.tree = 6, entropy = FALSE)
  tree.entropy$covariate.names
  tree.gini$flag # ...etc...
</code></pre>


</div>