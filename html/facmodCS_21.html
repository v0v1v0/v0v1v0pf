<div class="container">

<table style="width: 100%;"><tr>
<td>fmTstats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>fmTstats.ffm t-stats and plots for a fitted Fundamental Factor Model object</h2>

<h3>Description</h3>

<p>Calculate and plot the time series of t-statistic values and the
number of risk indices with significant t-stats for a fundamental factor 
model of class <code>ffm</code> produced by <code>fitFfm</code> or <code>fitFfmDT</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">fmTstats(
  ffmObj,
  isPlot = TRUE,
  isPrint = FALSE,
  whichPlot = "tStats",
  color = c("black", "cyan"),
  lwd = 2,
  digits = 2,
  z.alpha = 1.96,
  layout = c(2, 3),
  type = "h",
  scale = "free",
  stripText.cex = 1,
  axis.cex = 1,
  title = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ffmObj</code></td>
<td>
<p>an object of class <code>ffm</code> produced by <code>fitFfm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isPlot</code></td>
<td>
<p>logical. If <code>FALSE</code> no plots are displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isPrint</code></td>
<td>
<p>logical. if <code>TRUE</code>, the time series of the computed 
factor model values is printed. Default is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>whichPlot</code></td>
<td>
<p>string indicating the plot(s) to be plotted. Choose from 
("all", "tStats", "significantTstatsV", "significantTstatsH", "significantTstatsLikert").
Three variants of significantTstats stand for vertical, horizontal and likert barplots. 
Default is <code>tStats</code> plotting t-stats and significant t-stats with vertical bars.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>length 2 vector specifying the plotting color for t-stats plot 
and for barplot respectively. default is <code>c("black", "cyan")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>line width relative to the default. default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>an integer indicating the number of decimal places to be used 
for rounding. default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z.alpha</code></td>
<td>
<p>critical value corresponding to the confidence interval. 
Default is 1.96 i.e 95% C.I</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>numeric vector of length 2 or 3 giving the number of columns, 
rows, and pages (optional) in the xyplot of t-statistics. default is c(2,3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type character. Type of the xyplot of t-statistics; <code>"l"</code> 
for lines, <code>"p"</code> for points, <code>"h"</code> for histogram like (or high-density) 
vertical lines and <code>"b"</code> for both. Default is <code>"h"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>character. It determines how axis limits are calculated for each 
panel. Possible values are "same" , "free" (default) and "sliced".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stripText.cex</code></td>
<td>
<p>a number indicating the amount by which strip text in 
the plot(s) should be scaled relative to the default. 1=default, 1.5 is 50% 
larger, 0.5 is 50% smaller, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.cex</code></td>
<td>
<p>a number indicating the amount by which axis in the plot(s) 
should be scaled relative to the default. Default = 1. 1.5 is 50% larger, 
0.5 is 50% smaller, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>logical. if <code>TRUE</code>, the plots will have the main title. 
Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>potentially further arguments passed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>fmTstats</code> plots the t-stats and significant t-stats values  
if <code>isPlot</code> is <code>TRUE</code> and returns a list with following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>tstats</code></td>
<td>
<p> an xts object of t-stats values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z.alpha</code></td>
<td>
<p> critical value corresponding to the confidence interval.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Avinash Acharya and Doug Martin
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(PCRA)
# load data 
data(stocksCRSP)
data(factorsSPGMI)
dateRange &lt;- c("2006-01-31","2010-12-31")
stockItems &lt;-  c("Date", "TickerLast", "CapGroupLast", "Return",
                "Ret13WkBill","MktIndexCRSP","Sector")
                factorItems &lt;- c("BP","Beta60M","PM12M1M")
stocks_factors &lt;- selectCRSPandSPGMI("monthly", dateRange = dateRange, 
stockItems = stockItems, factorItems = factorItems, outputType ="data.table")
                                    

# fit a fundamental factor model with style variables BP and LogMktCap

fundamental_model &lt;- fitFfm(data = stocks_factors, 
                           asset.var = "TickerLast", 
                           ret.var = "Return", 
                           date.var = "Date", 
                           exposure.vars = c("BP", "PM12M1M")
                           )

#Compute time series of t-stats and number of significant t-stats 
 stats = fmTstats(fundamental_model, isPlot = TRUE, lwd = 2, color = c("blue", "blue"), 
                  z.alpha = 1.96)
               
# Fit a SECTOR+COUNTRY+Style model with Intercept
# Create a COUNTRY column with just 3 countries
#
#  factorDataSetDjia5Yrs$COUNTRY = rep(rep(c(rep("US", 1 ), rep("GERMANY", 1 )), 11), 60)
# 
#  fit.MICM &lt;- fitFfm(data = factorDataSetDjia5Yrs, 
#                    asset.var = "TICKER",
#                    exposure.vars = c("SECTOR", "COUNTRY","P2B", "MKTCAP"),
#                    ret.var = "RETURN", 
#                    date.var = "DATE", 
#                    addIntercept = FALSE)
#  
 # Load library 'HH' to access the Likert option
#  library("HH")                   
#  stats = fmTstats(fit.MICM, isPlot = TRUE, z.alpha =1.96,
#                   whichPlot = "significantTstatsLikert")

</code></pre>


</div>