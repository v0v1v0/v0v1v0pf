<div class="container">

<table style="width: 100%;"><tr>
<td>DataPreprocessing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extremes Data Preprocessing</h2>

<h3>Description</h3>

<p>A collection and description of functions for data 
preprocessing of extreme values. This includes tools 
to separate data beyond a threshold value, to compute 
blockwise data like block maxima, and to decluster 
point process data.
<br></p>
<p>The functions are:
</p>

<table>
<tr>
<td style="text-align: left;">
    <code>blockMaxima</code> </td>
<td style="text-align: left;"> Block Maxima from a vector or a time series, </td>
</tr>
<tr>
<td style="text-align: left;"> 
    <code>findThreshold</code> </td>
<td style="text-align: left;"> Upper threshold for a given number of extremes, </td>
</tr>
<tr>
<td style="text-align: left;">  
    <code>pointProcess</code> </td>
<td style="text-align: left;"> Peaks over Threshold from a vector or a time series, </td>
</tr>
<tr>
<td style="text-align: left;"> 
    <code>deCluster</code> </td>
<td style="text-align: left;"> Declusters clustered point process data. </td>
</tr>
</table>
<h3>Usage</h3>

<pre><code class="language-R">blockMaxima(x, block = c("monthly", "quarterly"), doplot = FALSE)
findThreshold(x, n = floor(0.05*length(as.vector(x))), doplot = FALSE)
pointProcess(x, u = quantile(x, 0.95), doplot = FALSE)
deCluster(x, run = 20, doplot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>block</code></td>
<td>

<p>the block size. A numeric value is interpreted as the number  
of data values in each successive block. All the data is used,
so the last block may not contain <code>block</code> observations. 
If the <code>data</code> has a  <code>times</code> attribute containing (in
an object of class <code>"POSIXct"</code>, or an object that can be
converted to that class, see <code>as.POSIXct</code>) the
times/dates of each observation, then <code>block</code> may instead
take the character values <code>"month"</code>, <code>"quarter"</code>,
<code>"semester"</code> or <code>"year"</code>. By default monthly blocks
from daily data are assumed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doplot</code></td>
<td>

<p>a logical value. Should the results be plotted? By 
default <code>TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>a numeric value or vector giving number of extremes above 
the threshold. By default, <code>n</code> is 
set to an integer representing 5% of the data from the 
whole data set <code>x</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run</code></td>
<td>

<p>parameter to be used in the runs method; any two consecutive 
threshold exceedances separated by more than this number of 
observations/days are considered to belong to different clusters.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>u</code></td>
<td>

<p>a numeric value at which level the data are to be truncated. By 
default the threshold value which belongs to the 95% quantile,
<code>u=quantile(x,0.95)</code>.       
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a numeric data vector from which <code>findThreshold</code> and 
<code>blockMaxima</code> determine the threshold values and block 
maxima values. 
For the function <code>deCluster</code> the argument
<code>x</code> represents a numeric vector of threshold exceedances
with a <code>times</code> attribute which should be a numeric
vector containing either the indices or the times/dates
of each exceedance (if times/dates, the attribute should
be an object of class <code>"POSIXct"</code> or an object that
can be converted to that class; see <code>as.POSIXct</code>).
</p>
</td>
</tr>
</table>
<h3>Details</h3>

  
<p><b>Computing Block Maxima:</b> 
<br><br>  
The function <code>blockMaxima</code> calculates block maxima from a vector 
or a time series, whereas the function
<code>blocks</code> is more general and allows for the calculation of
an arbitrary function <code>FUN</code> on blocks.
<br></p>
<p><b>Finding Thresholds:</b> 
<br><br>
The function <code>findThreshold</code> finds a threshold so that a given 
number of extremes lie above. When the data are tied a threshold is 
found so that at least the specified number of extremes lie above.
<br></p>
<p><b>De-Clustering Point Processes:</b> 
<br><br>
The function <code>deCluster</code> declusters clustered point process 
data so that Poisson assumption is more tenable over a high threshold.
</p>


<h3>Value</h3>

<p><code>blockMaxima</code> 
<br>
returns a timeSeries object or a numeric vector of block 
maxima data.
</p>
<p><code>findThreshold</code> 
<br>
returns a numeric value or vector of suitable thresholds. 
</p>
<p><code>pointProcess</code> 
<br>
returns a timeSeries object or a numeric vector of peaks over
a threshold.
</p>
<p><code>deCluster</code> 
<br>
returns a timeSeries object or a numeric vector for the 
declustered point process. 
</p>


<h3>Author(s)</h3>

<p>Some of the functions were implemented from Alec Stephenson's 
R-package <code>evir</code> ported from Alexander McNeil's S library 
<code>EVIS</code>, <em>Extreme Values in S</em>, some from Alec Stephenson's 
R-package <code>ismev</code> based on Stuart Coles code from his book, 
<em>Introduction to Statistical Modeling of Extreme Values</em> and 
some were written by Diethelm Wuertz.
</p>


<h3>References</h3>

<p>Coles S. (2001);
<em>Introduction to Statistical Modelling of Extreme Values</em>,
Springer.
</p>
<p>Embrechts, P., Klueppelberg, C., Mikosch, T. (1997);
<em>Modelling Extremal Events</em>, Springer.  
</p>


<h3>Examples</h3>

<pre><code class="language-R"> 
## findThreshold -
# Threshold giving (at least) fifty exceedances for Danish data:
library(timeSeries)
x &lt;- as.timeSeries(data(danishClaims))
findThreshold(x, n = c(10, 50, 100))    

## blockMaxima -
# Block Maxima (Minima) for left tail of BMW log returns:
BMW &lt;- as.timeSeries(data(bmwRet))
colnames(BMW) &lt;- "BMW.RET"
head(BMW)
x &lt;- blockMaxima( BMW, block = 65)
head(x)
## Not run: 
y &lt;- blockMaxima(-BMW, block = 65)    
head(y) 
y &lt;- blockMaxima(-BMW, block = "monthly")    
head(y)
## End(Not run)

## pointProcess -
# Return Values above threshold in negative BMW log-return data:
PP = pointProcess(x = -BMW, u = quantile(as.vector(x), 0.75))
PP
nrow(PP)

## deCluster -
# Decluster the 200 exceedances of a particular  
DC = deCluster(x = PP, run = 15, doplot = TRUE) 
DC
nrow(DC)
</code></pre>


</div>