<div class="container">

<table style="width: 100%;"><tr>
<td>communalities_optimal_solution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates the Optimal Solution for Communalities in a Dataframe</h2>

<h3>Description</h3>

<p><code>communalities_optimal_solution()</code> call upon either the <code>principal</code> or <code>fa</code> functions from <code>psych</code> package to iterate over the variables of a dataframe.
</p>


<h3>Usage</h3>

<pre><code class="language-R">communalities_optimal_solution(
  df,
  nfactors,
  type,
  rotate = "varimax",
  fm = "minres",
  squared = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>a dataframe with only <code>int</code> or <code>num</code> type of variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfactors</code></td>
<td>
<p>number of factors to extract in principal components or factor analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>either <code>principal</code> for <em>Principal Components Analysis</em> or <code>fa</code> for <em>Factor Analysis</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate</code></td>
<td>
<p>rotation to be employed (default is <em>varimax</em>). "none", "varimax", "quartimax", "bentlerT", "equamax", "varimin", "geominT" and "bifactor" are orthogonal rotations. "Promax", "promax", "oblimin", "simplimax", "bentlerQ, "geominQ" and "biquartimin" and "cluster" are possible oblique transformations of the solution. The default is to do a oblimin transformation, although versions prior to 2009 defaulted to varimax. SPSS seems to do a Kaiser normalization before doing Promax, this is done here by the call to "promax" which does the normalization before calling Promax in GPArotation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fm</code></td>
<td>
<p>Factoring method fm="minres" (default) will do a minimum residual as will fm="uls". Both of these use a first derivative. fm="ols" differs very slightly from "minres" in that it minimizes the entire residual matrix using an OLS procedure but uses the empirical first derivative. This will be slower. fm="wls" will do a weighted least squares (WLS) solution, fm="gls" does a generalized weighted least squares (GLS), fm="pa" will do the principal factor solution, fm="ml" will do a maximum likelihood factor analysis. fm="minchi" will minimize the sample size weighted chi square when treating pairwise correlations with different number of subjects per pair. fm ="minrank" will do a minimum rank factor analysis. "old.min" will do minimal residual the way it was done prior to April, 2017 (see discussion below). fm="alpha" will do alpha factor analysis as described in Kaiser and Coffey (1965)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>squared</code></td>
<td>
<p>TRUE if matrix is squared (such as adjacency matrices), FALSE otherwise</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If finds any individual communality below the optimal value of 0.5 then removes the lowest communality value variable until no more variable has not-optimal communality values.
</p>


<h3>Value</h3>

<p>A list with </p>

<ol>
<li> <p><code>df</code> - A dataframe that has reached its optimal solution in terms of KMO values
</p>
</li>
<li> <p><code>removed</code> - A list of removed variables ordered by the first to last removed during the procedure
</p>
</li>
<li> <p><code>loadings</code> - A table with the communalities loadings from the variables final iteration
</p>
</li>
<li> <p><code>results</code> - Results of the final iteration of either the <code>principal</code> or <code>fa</code> functions from <code>psych</code> package
</p>
</li>
</ol>
<h3>See Also</h3>

<p><code>principal</code> the PCA function from psych and
<code>fa</code> the Factor Analysis function from psych
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
df &lt;- as.data.frame(matrix(rnorm(100*10, 1, .5), ncol=10))
communalities_optimal_solution(df, nfactors = 2,type = "principal", squared = FALSE)

</code></pre>


</div>