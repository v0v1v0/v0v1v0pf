<div class="container">

<table style="width: 100%;"><tr>
<td>dynupdate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dynamic updates via BM, OLS, RR and PLS methods</h2>

<h3>Description</h3>

 
<p>Four methods, namely block moving (BM), ordinary least squares (OLS) regression, 
ridge regression (RR), penalized least squares (PLS) regression, were proposed to 
address the problem of dynamic updating, when partial data in the most recent curve 
are observed. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">dynupdate(data, newdata = NULL, holdoutdata, method = c("ts", "block", 
 "ols", "pls", "ridge"), fmethod = c("arima", "ar", "ets", "ets.na", 
  "rwdrift", "rw"), pcdmethod = c("classical", "M", "rapca"), 
   ngrid = max(1000, ncol(data$y)), order = 6, 
    robust_lambda = 2.33, lambda = 0.01, value = FALSE, 
     interval = FALSE, level = 80, 
      pimethod = c("parametric", "nonparametric"), B = 1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An object of class <code>sfts</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>A data vector of newly arrived observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>holdoutdata</code></td>
<td>
<p>A data vector of holdout sample to evaluate point forecast accuracy.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Forecasting methods. The latter four can dynamically update point forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fmethod</code></td>
<td>
<p>Univariate time series forecasting methods used in <code>method = "ts"</code> 
or <code>method = "block"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcdmethod</code></td>
<td>
<p>Method to use for principal components decomposition. Possibilities are "M", "rapca" and "classical".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ngrid</code></td>
<td>
<p>Number of grid points to use in calculations. Set to maximum of 1000 and <code>ncol(data$y)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Number of principal components to fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust_lambda</code></td>
<td>
<p>Tuning parameter in the two-step robust functional principal component analysis, when <code>pcdmethod = "M"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>Penalty parameter used in <code>method = "pls"</code> or <code>method = "ridge"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>When <code>value = TRUE</code>, returns forecasts or when <code>value = FALSE</code>, returns forecast errors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>
<p>When <code>interval = TRUE</code>, produces distributional forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Nominal coverage probability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pimethod</code></td>
<td>
<p>Parametric or nonparametric method to construct prediction intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>Number of bootstrap samples.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is designed to dynamically update point and interval forecasts, when partial data in the most recent curve are observed.
</p>
<p>If <code>method = "classical"</code>, then standard functional principal component decomposition is used, as described by Ramsay and Dalzell (1991). 
</p>
<p>If <code>method = "rapca"</code>, then the robust principal component algorithm of Hubert, Rousseeuw and Verboven (2002) is used. 
</p>
<p>If <code>method = "M"</code>, then the hybrid algorithm of Hyndman and Ullah (2005) is used. 
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>forecasts</code></td>
<td>
<p>An object of class <code>fts</code> containing the dynamic updated point forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootsamp</code></td>
<td>
<p>An object of class <code>fts</code> containing the bootstrapped point forecasts, which are updated by the PLS method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>low</code></td>
<td>
<p>An object of class <code>fts</code> containing the lower bound of prediction intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>up</code></td>
<td>
<p>An object of class <code>fts</code> containing the upper bound of prediction intervals.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Han Lin Shang</p>


<h3>References</h3>

<p>J. O. Ramsay and C. J. Dalzell (1991) "Some tools for functional data analysis (with discussion)", <em>Journal of the Royal Statistical Society: Series B</em>, <b>53</b>(3), 539-572. 
</p>
<p>M. Hubert and P. J. Rousseeuw and S. Verboven (2002) "A fast robust method for principal components with applications to chemometrics", <em>Chemometrics and Intelligent Laboratory Systems</em>, <b>60</b>(1-2), 101-111. 
</p>
<p>R. J. Hyndman and M. S. Ullah (2007) "Robust forecasting of mortality and fertility rates: A functional data approach", <em>Computational Statistics and Data Analysis</em>, <b>51</b>(10), 4942-4956.
</p>
<p>H. Shen and J. Z. Huang (2008) "Interday forecasting and intraday updating of call center arrivals", <em>Manufacturing and Service Operations Management</em>, <b>10</b>(3), 391-410.
</p>
<p>H. Shen (2009) "On modeling and forecasting time series of curves", <em>Technometrics</em>, <b>51</b>(3), 227-238.
</p>
<p>H. L. Shang and R. J. Hyndman (2011) "Nonparametric time series forecasting with dynamic updating", Mathematics and Computers in Simulation, <b>81</b>(7), 1310-1324.
</p>
<p>H. L. Shang (2013) "Functional time series approach for forecasting very short-term electricity demand", <em>Journal of Applied Statistics</em>, <b>40</b>(1), 152-168.
</p>
<p>H. L. Shang (2017) "Forecasting Intraday S&amp;P 500 Index Returns: A Functional Time Series Approach", <em>Journal of Forecasting</em>, <b>36</b>(7), 741-755.
</p>
<p>H. L. Shang (2017) "Functional time series forecasting with dynamic updating: An application to intraday particulate matter concentration", <em>Econometrics and Statistics</em>, <b>1</b>, 184-200.
</p>


<h3>See Also</h3>

<p><code>ftsm</code>, <code>forecast.ftsm</code>, <code>plot.fm</code>, <code>residuals.fm</code>, <code>summary.fm</code></p>


<h3>Examples</h3>

<pre><code class="language-R">  
# ElNino is an object of sliced functional time series, constructed from a univariate time series. 
# When we observe some newly arrived information in the most recent time period, this function  
# allows us to update the point and interval forecasts for the remaining time period. 
dynupdate(data = ElNino_ERSST_region_1and2, newdata = ElNino_ERSST_region_1and2$y[1:4,69], 
	holdoutdata = ElNino_ERSST_region_1and2$y[5:12,57], method = "block", interval = FALSE) 
</code></pre>


</div>