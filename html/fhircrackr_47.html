<div class="container">

<table style="width: 100%;"><tr>
<td>fhir_design</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a fhir_design object</h2>

<h3>Description</h3>

<p>A <code>fhir_design</code> is a named list of <code>fhir_table_description</code> objects (See <code>fhir_table_description()</code>)
and should be created using the function described here. The design is used in <code>fhir_crack()</code> to tell
the function how to flatten each resource type.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fhir_design(...)

## S4 method for signature 'fhir_table_description'
fhir_design(...)

## S4 method for signature 'list'
fhir_design(...)

## S4 method for signature 'fhir_table_list'
fhir_design(...)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more <code>fhir_table_description</code> objects or a named list containing
<code>fhir_table_description</code> objects, or an object of class fhir_df_list/fhir_dt_list.
See <code>fhir_table_description()</code>.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>A <code>fhir_design</code> looks for example like this:
</p>
<div class="sourceCode"><pre>A fhir_design with 2 table_descriptions:
A fhir_table_description with the following elements:

	fhir_resource_type: Patient

fhir_columns:
	------------ -----------------
	column name | xpath expression
------------ -----------------
	id          | id
name        | name/family
gender      | gender
------------ -----------------

	sep:           '||'
brackets:      '[', ']'
rm_empty_cols: FALSE
format:        'compact'
keep_attr:     TRUE

A fhir_table_description with the following elements:

	fhir_resource_type: MedicationAdministration

fhir_columns:
	An empty fhir_columns object

sep:           ':::'
brackets:      no brackets
rm_empty_cols: FALSE
format:        'wide'
keep_attr:     TRUE
</pre></div>
<p>The names of the table_descriptions are taken from the names of the arguments. If the table_descriptions are
created within the call to <code>fhir_design</code> and therefore have no names, the names will be created from the respective
resource type. See examples.
</p>
<p>For backwards compatibility it is for the moment also possible to build it from an
old-style design as used in <code style="white-space: pre;">⁠fhircrackr (&lt; 1.0.0)⁠</code>. See examples.
</p>
<p>If this function is given an object of class fhir_df_list or fhir_dt_list, it will
extract the design that was used to create the respective list.
</p>


<h3>See Also</h3>

<p><code>fhir_table_description()</code>, <code>fhir_crack()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
####Example 1####

###create fhir_table_descriptions first
#see ?fhir_table_description for explanation

pat &lt;- fhir_table_description(
    resource      = "Patient",
    cols          = c(
        id            = "id",
        name          = "name/family",
        gender        = "gender"
    ),
    sep           = "||",
    brackets      = c("[", "]"),
    rm_empty_cols = FALSE

)

meds &lt;- fhir_table_description(resource = "MedicationAdministration")

###create design
#First option: Explicitly define names

design1 &lt;- fhir_design(Pats = pat, Medics = meds)
print(design1)


#Second option: Names are taken from the object names

design2 &lt;- fhir_design(pat, meds)
print(design2)


#Third option: Create table_description within fhir_design

design3 &lt;- fhir_design(fhir_table_description(resource = "MedicationAdministration"))
print(design3)


#Fourth option: Names are taken from named list

design3 &lt;- fhir_design(list(Patients = pat, Medications = meds))
print(design3)


###Example 2###
###Extract design from fhir_df_list/fhir_dt_list

#unserialize and crack example bundles
med_bundles &lt;- fhir_unserialize(bundles = medication_bundles)
dfs &lt;- fhir_crack(bundles = med_bundles, design = design1)

#extract design

fhir_design(dfs)

</code></pre>


</div>