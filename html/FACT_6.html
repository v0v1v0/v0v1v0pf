<div class="container">

<table style="width: 100%;"><tr>
<td>IDEA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Idea - Isolated Effect on Assignment</h2>

<h3>Description</h3>

<p><code>IDEA</code> with a soft label predictor (sIDEA) <br>
tacks changes the soft label of being assigned to each existing cluster
throughout a (multidimensional) feature space
<code>IDEA</code> with a hard label predictor (hIDEA) <br>
tacks changes the soft label of being assigned to each existing cluster
throughout a (multidimensional) feature space
</p>


<h3>Details</h3>

<p><code>IDEA</code> for soft labeling algorithms (sIDEA) indicates the soft label that an
observation <code class="reqn">\textbf{x}</code> with replaced values <code class="reqn">\tilde{\textbf{x}}_S</code> is assigned to
the k-th cluster. <code>IDEA</code> for hard labeling algorithms (hIDEA) indicates
the cluster assignment of an observation <code class="reqn">\textbf{x}</code> with replaced values
<code class="reqn">\tilde{\textbf{x}}_S</code>. <br></p>
<p>The global <code>IDEA</code> is denoted by the corresponding data set X:
</p>
<p style="text-align: center;"><code class="reqn">
\text{sIDEA}_X(\tilde{\textbf{x}}_S) = \left(\frac{1}{n} \sum_{i = 1}^n
\text{sIDEA}^{(1)}_{\textbf{x}^{(i)}}(\tilde{\textbf{x}}_S), \dots, \frac{1}{n}
\sum_{i = 1}^n \text{sIDEA}^{(k)}_{\textbf{x}^{(i)}}(\tilde{\textbf{x}}_S) \right)
</code>
</p>

<p>where the c-th vector element is the average c-th vector element of local
sIDEA functions. The global hIDEA corresponds to:
</p>
<p style="text-align: center;"><code class="reqn">
\text{hIDEA}_X(\tilde{\textbf{x}}_S) =  \left(\frac{1}{n}\sum_{i = 1}^n
\mathbb{1}_{1}(\text{hIDEA}_{\textbf{x}^{(i)}}(\tilde{\textbf{x}}_S)), \dots,
\frac{1}{n}\sum_{i = 1}^n \mathbb{1}_{k}(\text{hIDEA}_{\textbf{x}^{(i)}}(\tilde{\textbf{x}}_S))\right)
</code>
</p>

<p>where the c-th vector element is the fraction of hard label
reassignments to the c-th cluster.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>predictor</code></dt>
<dd>
<p>ClustPredictor<br>
The object (created with <code>ClustPredictor$new()</code>) holding
the cluster algorithm and the data.</p>
</dd>
<dt><code>feature</code></dt>
<dd>
<p>(<code style="white-space: pre;">⁠character or list⁠</code>)<br>
Features/ feature sets to calculate the effect curves.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p><code>character(1)</code><br>
The <code>IDEA</code> method to be used.</p>
</dd>
<dt><code>mg</code></dt>
<dd>
<p><code>DataGenerator</code><br>
A <code>MarginalGenerator</code> object to sample and generate
the pseudo instances.</p>
</dd>
<dt><code>results</code></dt>
<dd>
<p><code>data.table</code><br>
The <code>IDEA</code> results.</p>
</dd>
<dt><code>noise.out</code></dt>
<dd>
<p>any <br>
Indicator for the noise variable.</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>type</code></dt>
<dd>
<p>function <br>
Detect the type in the predictor</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-IDEA-new"><code>IDEA$new()</code></a>
</p>
</li>
<li> <p><a href="#method-IDEA-plot"><code>IDEA$plot()</code></a>
</p>
</li>
<li> <p><a href="#method-IDEA-plot_globals"><code>IDEA$plot_globals()</code></a>
</p>
</li>
<li> <p><a href="#method-IDEA-clone"><code>IDEA$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-IDEA-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create an IDEA object.
</p>


<h5>Usage</h5>

<div class="r"><pre>IDEA$new(predictor, feature, method = "g+l", grid.size = 20L, noise.out = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>predictor</code></dt>
<dd>
<p>ClustPredictor<br>
The object (created with <code>ClustPredictor$new()</code>) holding
the cluster algorithm and the data.</p>
</dd>
<dt><code>feature</code></dt>
<dd>
<p>(<code style="white-space: pre;">⁠character or list⁠</code>)<br>
For which features do you want importance scores calculated. The default
value of <code>NULL</code> implies all features. Use a named list of character vectors
to define groups of features for which joint importance will be calculated.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p><code>character(1)</code><br>
The <code>IDEA</code> method to be used. Possible choices for the method are:<br><code>"g+l"</code> (default): store global and local <code>IDEA</code> results
</p>
<p><code>"local"</code>: store only local <code>IDEA</code> results
</p>
<p><code>"global"</code>: store only global <code>IDEA</code> results
</p>
<p><code>"init_local"</code>: store only local <code>IDEA</code> results and
additional reference for the observations initial
assigned cluster.
</p>
<p><code>"init_g+l"</code> store global and local <code>IDEA</code> results and
additional reference for the observations initial
assigned cluster.</p>
</dd>
<dt><code>grid.size</code></dt>
<dd>
<p><code style="white-space: pre;">⁠(numeric(1) or NULL)⁠</code> <br>
size of the grid to replace values. If grid size is
given, an equidistant grid is create. If <code>NULL</code>, values
are calculated at all present combinations of feature values.</p>
</dd>
<dt><code>noise.out</code></dt>
<dd>
<p>any <br>
Indicator for the noise variable. If not NULL, noise will
be excluded from the effect estimation.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>(data.frame)<br>
Values for the effect curves: <br>
One row per grid per instance for each local idea
estimation. If <code>method</code> includes global estimation, one
additional row per grid point.
</p>


<hr>
<a id="method-IDEA-plot"></a>



<h4>Method <code>plot()</code>
</h4>

<p>Plot an IDEA object.
</p>


<h5>Usage</h5>

<div class="r"><pre>IDEA$plot(c = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>c</code></dt>
<dd>
<p>indicator for the cluster to plot. If <code>NULL</code>,
all clusters are plotted.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>(ggplot)<br>
A ggplot object that depends on the <code>method</code> chosen.
</p>


<hr>
<a id="method-IDEA-plot_globals"></a>



<h4>Method <code>plot_globals()</code>
</h4>

<p>Plot the global sIDEA curves of all clusters.
</p>


<h5>Usage</h5>

<div class="r"><pre>IDEA$plot_globals(mass = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>mass</code></dt>
<dd>
<p>between 0 and 1. The percentage of local <code>IDEA</code>
curves to plot a certainty interval.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>(ggplot)<br>
A ggplot object.
</p>


<hr>
<a id="method-IDEA-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>IDEA$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p>iml::FeatureEffects, iml::FeatureEffects
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# load data and packages
require(factoextra)
require(FuzzyDBScan)
multishapes = as.data.frame(multishapes[, 1:2])
# Set up an train FuzzyDBScan
eps = c(0, 0.2)
pts = c(3, 15)
res = FuzzyDBScan$new(multishapes, eps, pts)
res$plot("x", "y")
# create soft label predictor
predict_prob = function(model, newdata) model$predict(new_data = newdata)
predictor = ClustPredictor$new(res, as.data.frame(multishapes), y = res$results,
                                    predict.function = predict_prob, type = "prob")
# Calculate `IDEA` global and local for feature "x"
idea_x = IDEA$new(predictor = predictor, feature = "x", grid.size = 5)
idea_x$plot_globals(0.5) # plot global effect of all clusters with 50 percent of local mass.

</code></pre>


</div>