<div class="container">

<table style="width: 100%;"><tr>
<td>make_full_rank_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a full rank matrix</h2>

<h3>Description</h3>

<p>First remove empty columns. Then discover linear dependent columns. For each set of linearly dependent columns, create orthogonal vectors that span the space. Add these vectors as columns to the final matrix to replace the linearly dependent columns.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_full_rank_matrix(mat, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mat</code></td>
<td>
<p>A matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Print how column numbers change with each operation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list containing:
</p>

<ul>
<li> <p><code>matrix</code>: A matrix of full rank. Column headers will be renamed to reflect how columns depend on each other.
</p>

<ul>
<li> <p><code>(c1_AND_c2)</code> If multiple columns are exactly identical, only a single instance is retained.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠SPACE_&lt;i&gt;_AXIS&lt;j&gt;⁠</code> For each set of linearly dependent columns, a space <code>i</code> with <code>max(j)</code> dimensions was created using orthogonal axes to replace the original columns.
</p>
</li>
</ul>
</li>
<li> <p><code>space_list</code>: A named list where each element corresponds to a space and contains the names of the original linearly dependent columns that are contained within that space.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># Create a 1-hot encoded (zero/one) matrix
c1 &lt;- rbinom(10, 1, .4)
c2 &lt;- 1-c1
c3 &lt;- integer(10)
c4 &lt;- c1
c5 &lt;- 2*c2
c6 &lt;- rbinom(10, 1, .8)
c7 &lt;- c5+c6
# Turn into matrix
mat &lt;- cbind(c1, c2, c3, c4, c5, c6, c7)
# Turn the matrix into full rank, this will:
# 1. remove empty columns (all zero)
# 2. merge columns with the same entries (duplicates)
# 3. identify linearly dependent columns
# 4. replace them with orthogonal vectors that span the same space
result &lt;- make_full_rank_matrix(mat)
# verbose=TRUE will give details on how many columns are removed in every step
result &lt;- make_full_rank_matrix(mat, verbose=TRUE)
# look at the create full rank matrix
mat_full &lt;- result$matrix
# check which linearly dependent columns spanned the identified spaces
spaces &lt;- result$space_list
</code></pre>


</div>