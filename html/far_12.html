<div class="container">

<table style="width: 100%;"><tr>
<td>far.cv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Cross Validation for FARX(1) model </h2>

<h3>Description</h3>

<p>Cross Validation for FAR(1) and FARX(1) models
</p>


<h3>Usage</h3>

<pre><code class="language-R">far.cv(data, y, x, kn, ncv, cvcrit, center=TRUE, na.rm=TRUE, joined=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p> A <code>fdata</code> object. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p> A vector giving the name(s) of the endogenous variable(s) of
the model. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> A vector giving the name(s) of the exogenous variable(s) of
the model. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kn</code></td>
<td>
<p> A vector giving the maximum values of the various
<code>kn</code> (dimension of plug-in in the algorithm). If it not supplied,
the number of discretization point is used. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncv</code></td>
<td>
<p> Number of observations used to the cross validation </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cvcrit</code></td>
<td>
<p> A vector of characters. Name of the variable used to
measure the errors (<code>y</code> by default). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p> Logical. Does the observation need to be centered. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p> Logical. Does the <code>n.a.</code> need to be removed. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>joined</code></td>
<td>
<p> Logical. If <code>TRUE</code>, the joined (whole) far model
is computed, otherwise the model work with the separated variables. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In order to perform good forecasting with a FAR or FARX model, you need
to determine the dimensions <code>kn</code> of the subspace in which the linear
operator is estimated (see <code>far</code> for more details).
</p>
<p>This function helps the user to do this choice by performing a cross
validation on a test sample. The usage is close of the
<code>far</code> function, so we will discuss about the options which
differ.
</p>
<p>First, the <code>kn</code> option is used to restrict the values searched:
this is a vector containing the maxima values. As in
<code>far</code>, the dimension of this vector is function of the
number of variables involved in the model and the type of estimation
done (joined or not).
</p>
<p><code>ncv</code> is the number of observation used to test the models. If it
is not provided, the function use the last fifth of the observations in
<code>data</code>. In such a case, the four first fifth are used to
estimates the models. This is in general a good compromise.
</p>
<p>Finally, <code>cvcrit</code> list the variables used to test the models. If
more than one variable is provided, the test is calculated as a mean
of the errors over all the variables.
</p>
<p>The criteria used to test the (functional) errors are the norms L1,
L2, L infinite, L1 on the maxima, L2 on the maxima, and L infinite on the
maxima.
</p>


<h3>Value</h3>

<p>It is a LIST with the following elements
</p>
<table>
<tr style="vertical-align: top;">
<td><code>cv </code></td>
<td>
<p>Matrix giving the various errors (L1, L2, L infinite, L1 on the
maxima, L2 on the maxima, L infinite on the maxima) for the tested
values of <code>kn</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minL1 </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L1 error minima is obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minL2 </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L2 error minima is obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minLinf </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L infinite error minima is obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minL1max </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L1 maxima's error minima is obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minL2max </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L2 maxima's error minima is obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minLinfmax </code></td>
<td>
<p>A vector corresponding to the row of <code>cv</code> where the
L infinite maxima's error minima is obtained</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p> J. Damon </p>


<h3>See Also</h3>

 <p><code>far</code>, <code>fdata</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">  # Simulation of a FARX process
  data1 &lt;- simul.farx(m=10,n=400,base=base.simul.far(20,5),
                base.exo=base.simul.far(20,5),
                d.a=matrix(c(0.5,0),nrow=1,ncol=2),
                alpha.conj=matrix(c(0.2,0),nrow=1,ncol=2),
                d.rho=diag(c(0.45,0.90,0.34,0.45)),
                alpha=diag(c(0.5,0.23,0.018)),
                d.rho.exo=diag(c(0.45,0.90,0.34,0.45)),
                cst1=0.0)

  # Cross validation (joined and separate)
  model1.cv &lt;- far.cv(data=data1, y="X", x="Z", kn=8, ncv=10, cvcrit="X",
                center=FALSE, na.rm=FALSE, joined=TRUE)
  model2.cv &lt;- far.cv(data=data1, y="X", x="Z", kn=c(4,4), ncv=10, cvcrit="X",
                center=FALSE, na.rm=FALSE, joined=FALSE)
  print(model1.cv)
  print(model2.cv)
  k1 &lt;- model1.cv$minL2[1]
  k2 &lt;- model2.cv$minL2[1:2]

  # Modelization of the FARX process (joined and separate)
  model1 &lt;- far(data=data1, y="X", x="Z", kn=k1,
                center=FALSE, na.rm=FALSE, joined=TRUE)
  model2 &lt;- far(data=data1, y="X", x="Z", kn=k2,
                center=FALSE, na.rm=FALSE, joined=FALSE)
  print(model1)
  print(model2)
</code></pre>


</div>