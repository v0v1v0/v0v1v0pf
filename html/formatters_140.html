<div class="container">

<table style="width: 100%;"><tr>
<td>paginate_indices</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Paginate a table-like object for rendering</h2>

<h3>Description</h3>

<p>These functions perform or diagnose bi-directional pagination on an object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">paginate_indices(
  obj,
  page_type = "letter",
  font_family = "Courier",
  font_size = 8,
  lineheight = 1,
  landscape = FALSE,
  pg_width = NULL,
  pg_height = NULL,
  margins = c(top = 0.5, bottom = 0.5, left = 0.75, right = 0.75),
  lpp = NA_integer_,
  cpp = NA_integer_,
  min_siblings = 2,
  nosplitin = list(rows = character(), cols = character()),
  colwidths = NULL,
  tf_wrap = FALSE,
  max_width = NULL,
  indent_size = 2,
  pg_size_spec = NULL,
  rep_cols = num_rep_cols(obj),
  col_gap = 3,
  fontspec = font_spec(font_family, font_size, lineheight),
  verbose = FALSE
)

paginate_to_mpfs(
  obj,
  page_type = "letter",
  font_family = "Courier",
  font_size = 8,
  lineheight = 1,
  landscape = FALSE,
  pg_width = NULL,
  pg_height = NULL,
  margins = c(top = 0.5, bottom = 0.5, left = 0.75, right = 0.75),
  lpp = NA_integer_,
  cpp = NA_integer_,
  min_siblings = 2,
  nosplitin = character(),
  colwidths = NULL,
  tf_wrap = FALSE,
  max_width = NULL,
  indent_size = 2,
  pg_size_spec = NULL,
  page_num = default_page_number(),
  rep_cols = NULL,
  col_gap = 3,
  fontspec = font_spec(font_family, font_size, lineheight),
  verbose = FALSE
)

diagnose_pagination(
  obj,
  page_type = "letter",
  font_family = "Courier",
  font_size = 8,
  lineheight = 1,
  landscape = FALSE,
  pg_width = NULL,
  pg_height = NULL,
  margins = c(top = 0.5, bottom = 0.5, left = 0.75, right = 0.75),
  lpp = NA_integer_,
  cpp = NA_integer_,
  min_siblings = 2,
  nosplitin = character(),
  colwidths = propose_column_widths(matrix_form(obj, TRUE), fontspec = fontspec),
  tf_wrap = FALSE,
  max_width = NULL,
  indent_size = 2,
  pg_size_spec = NULL,
  rep_cols = num_rep_cols(obj),
  col_gap = 3,
  verbose = FALSE,
  fontspec = font_spec(font_family, font_size, lineheight),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>(<code>ANY</code>)<br> object to be paginated. Must have a <code>matrix_form()</code> method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_type</code></td>
<td>
<p>(<code>string</code>)<br> name of a page type. See <code>page_types</code>. Ignored
when <code>pg_width</code> and <code>pg_height</code> are set directly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>font_family</code></td>
<td>
<p>(<code>string</code>)<br> name of a font family. An error will be thrown
if the family named is not monospaced. Defaults to <code>"Courier"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>font_size</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> font size. Defaults to <code>12</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lineheight</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> line height. Defaults to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>landscape</code></td>
<td>
<p>(<code>flag</code>)<br> whether the dimensions of <code>page_type</code> should be
inverted for landscape orientation. Defaults to <code>FALSE</code>, ignored when <code>pg_width</code> and
<code>pg_height</code> are set directly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pg_width</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> page width in inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pg_height</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> page height in inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margins</code></td>
<td>
<p>(<code>numeric(4)</code>)<br> named numeric vector containing <code>"bottom"</code>, <code>"left"</code>,
<code>"top"</code>, and <code>"right"</code> margins in inches. Defaults to <code>.5</code> inches for both vertical
margins and <code>.75</code> for both horizontal margins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpp</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br> lines per page. If <code>NA</code> (the default), this is calculated automatically
based on the specified page size). <code>NULL</code> indicates no vertical pagination should occur.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpp</code></td>
<td>
<p>(<code>numeric(1)</code> or <code>NULL</code>)<br> width (in characters) per page. If <code>NA</code> (the default), this is calculated
automatically based on the specified page size). <code>NULL</code> indicates no horizontal pagination should occur.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_siblings</code></td>
<td>
<p>(<code>numeric</code>)<br> minimum sibling rows which must appear on either side of pagination row for a
mid-subtable split to be valid. Defaults to 2 for tables. It is automatically turned off (set to 0) for listings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nosplitin</code></td>
<td>
<p>(<code>character</code>)<br> list of names of subtables where page breaks are not allowed, regardless of other
considerations. Defaults to none.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colwidths</code></td>
<td>
<p>(<code>numeric</code>)<br> vector of column widths (in characters) for use in vertical pagination.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tf_wrap</code></td>
<td>
<p>(<code>flag</code>)<br> whether the text for title, subtitles, and footnotes should be wrapped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_width</code></td>
<td>
<p>(<code>integer(1)</code>, <code>string</code> or <code>NULL</code>)<br> width that title and footer (including
footnotes) materials should be word-wrapped to. If <code>NULL</code>, it is set to the current print width of the
session (<code>getOption("width")</code>). If set to <code>"auto"</code>, the width of the table (plus any table inset) is
used. Parameter is ignored if <code>tf_wrap = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indent_size</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> indent size, in characters. Ignored when <code>x</code> is already
a <code>MatrixPrintForm</code> object in favor of information there.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pg_size_spec</code></td>
<td>
<p>(<code>page_size_spec</code>)<br>. a pre-calculated page size specification. Typically this is not set by
end users.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rep_cols</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> number of <em>columns</em> (not including row labels) to be repeated on every page.
Defaults to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_gap</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> The number of spaces to be placed between columns
in the rendered table (and assumed for horizontal pagination).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontspec</code></td>
<td>
<p>(<code>font_spec</code>)<br> a font_spec object specifying the font information to use for
calculating string widths and heights, as returned by <code>font_spec()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>(<code>flag</code>)<br> whether additional informative messages about the search for
pagination breaks should be shown. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_num</code></td>
<td>
<p>(<code>string</code>)<br> placeholder string for page numbers. See default_page_number for more
information. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed to individual methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>paginate_indices</code> renders <code>obj</code> into a <code>MatrixPrintForm</code> (MPF), then uses that representation to
calculate the rows and columns of <code>obj</code> corresponding to each page of the pagination of <code>obj</code>, but
simply returns these indices rather than paginating <code>obj</code> itself (see Details for an important caveat).
</p>
<p><code>paginate_to_mpfs</code> renders <code>obj</code> into its MPF intermediate representation, then paginates that MPF into
component MPFs each corresponding to an individual page and returns those in a <code>list</code>.
</p>
<p><code>diagnose_pagination</code> attempts pagination via <code>paginate_to_mpfs</code>, then returns diagnostic information
which explains why page breaks were positioned where they were, or alternatively why no valid pagination
could be found.
</p>
<p>All three of these functions generally support all classes which have a corresponding <code>matrix_form()</code>
method which returns a valid <code>MatrixPrintForm</code> object (including <code>MatrixPrintForm</code> objects themselves).
</p>
<p><code>paginate_indices</code> is directly called by <code>paginate_to_mpfs</code> (and thus <code>diagnose_pagination</code>). For most
classes, and most tables represented by supported classes, calling <code>paginate_to_mpfs</code> is equivalent to a
manual <code style="white-space: pre;">⁠paginate_indices -&gt; subset obj into pages -&gt; matrix_form⁠</code> workflow.
</p>
<p>The exception to this equivalence is objects which support "forced pagination", or pagination logic which
is built into the object itself rather than being a function of space on a page. Forced pagination
generally involves the creation of, e.g., page-specific titles which apply to these forced paginations.
<code>paginate_to_mpfs</code> and <code>diagnose_pagination</code> support forced pagination by automatically calling the
<code>do_forced_paginate()</code> generic on the object and then paginating each object returned by that generic
separately. The assumption here, then, is that page-specific titles and such are handled by the class'
<code>do_forced_paginate()</code> method.
</p>
<p><code>paginate_indices</code>, on the other hand, <em>does not support forced pagination</em>, because it returns only a
set of indices for row and column subsetting for each page, and thus cannot retain any changes, e.g.,
to titles, done within <code>do_forced_paginate()</code>. <code>paginate_indices</code> does call <code>do_forced_paginate()</code>, but
instead of continuing it throws an error in the case that the result is larger than a single "page".
</p>
<p><code>diagnose_pagination</code> attempts pagination and then, regardless of success or failure, returns diagnostic
information about pagination attempts (if any) after each row and column.
</p>
<p>The diagnostics data reflects the final time the pagination algorithm evaluated a page break at the
specified location, regardless of how many times the position was assessed in total.
</p>
<p>To get information about intermediate attempts, perform pagination with <code>verbose = TRUE</code> and inspect
the messages in order.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>paginate_indices</code> returns a <code>list</code> with two elements of the same length: <code>pag_row_indices</code> and <code>pag_col_indices</code>.
</p>
</li>
<li> <p><code>paginate_to_mpfs</code> returns a <code>list</code> of  <code>MatrixPrintForm</code> objects representing each individual page after
pagination (including forced pagination if necessary).
</p>
</li>
</ul>
<ul><li> <p><code>diagnose_pagination</code> returns a <code>list</code> containing:
</p>

<dl>
<dt><code>lpp_diagnostics</code></dt>
<dd>
<p>Diagnostic information regarding lines per page.</p>
</dd>
<dt><code>row_diagnostics</code></dt>
<dd>
<p>Basic information about rows, whether pagination was attempted
after each row, and the final result of such an attempt, if made.</p>
</dd>
<dt><code>cpp_diagnostics</code></dt>
<dd>
<p>Diagnostic information regarding columns per page.</p>
</dd>
<dt><code>col_diagnostics</code></dt>
<dd>
<p>Very basic information about leaf columns, whether pagination
was attempted after each leaf column, ad the final result of such attempts, if made.</p>
</dd>
</dl>
</li></ul>
<h3>Note</h3>

<p>For <code>diagnose_pagination</code>, the column labels are not displayed in the <code>col_diagnostics</code> element
due to certain internal implementation details; rather the diagnostics are reported in terms of
absolute (leaf) column position. This is a known limitation, and may eventually be changed, but the
information remains useful as it is currently reported.
</p>
<p><code>diagnose_pagination</code> is intended for interactive debugging use and <em>should not be programmed against</em>,
as the exact content and form of the verbose messages it captures and returns is subject to change.
</p>
<p>Because <code>diagnose_pagination</code> relies on <code>capture.output(type = "message")</code>, it cannot be used within the
<code>testthat</code> (and likely other) testing frameworks, and likely cannot be used within <code>knitr</code>/<code>rmarkdown</code>
contexts either, as this clashes with those systems' capture of messages.
</p>


<h3>Examples</h3>

<pre><code class="language-R">mpf &lt;- basic_matrix_form(mtcars)

paginate_indices(mpf, pg_width = 5, pg_height = 3)

paginate_to_mpfs(mpf, pg_width = 5, pg_height = 3)

diagnose_pagination(mpf, pg_width = 5, pg_height = 3)
clws &lt;- propose_column_widths(mpf)
clws[1] &lt;- floor(clws[1] / 3)
dgnost &lt;- diagnose_pagination(mpf, pg_width = 5, pg_height = 3, colwidths = clws)
try(diagnose_pagination(mpf, pg_width = 1)) # fails

</code></pre>


</div>