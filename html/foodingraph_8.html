<div class="container">

<table style="width: 100%;"><tr>
<td>graph_from_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Display a graph from an adjacency matrix</h2>

<h3>Description</h3>

<p>Given an adjacency matrix and a legend, displays the graph.
This is a shortcut function, rather than using <code>links_nodes_from_mat()</code>
and <code>graph_from_links_nodes()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">graph_from_matrix(adjacency_matrix, legend, threshold = 0,
  abs_threshold = TRUE, filter_nodes = TRUE, main_title = "",
  node_type = c("point", "label"), node_label_title = TRUE,
  family_palette = NULL, layout = "nicely", remove_null = TRUE,
  edge_alpha = TRUE, edge_color = c("#6DBDE6", "#FF8C69"),
  edge_width_range = c(0.2, 2), edge_alpha_range = c(0.4, 1),
  node_label_size = 3, legend_label_size = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>adjacency_matrix</code></td>
<td>
<p>: a matrix of size n x n, each element being
a number explaining the relationship (coefficient, information)
between two variables given in the column and row names
/!\ As this code is to draw undirected graphs, only the lower
triangular part of association matrix is used to extract the information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>: a data frame of columns in order :
1) name, str : name of the node in the adjacency matrix, e.g.
CRUDSAL_cat
2) title, str : name of the node, e.g. Raw vegetables
3) family, factor : (optional) the family the node belongs to,
e.g. Vegetables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>numeric) : a number defining the minimal threshold.
If the weights are less than this threshold, they will be set to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abs_threshold</code></td>
<td>
<p>(bool) : should the threshold keep negative values,
e.g. if <code>abs_threshold</code> is set to <code>TRUE</code>, and threshold is set
to 0.1, all weights between -0.1 and 0.1 will be set to 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_nodes</code></td>
<td>
<p>(bool) : should the variables not in the adjacency
matrix be displayed on the graph? Default is TRUE
CAREFUL : if set to <code>TRUE</code>, be sure to have the same colors in the
family legend of the graphs. A fixed palette can be set using
<code>family_palette</code>. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main_title</code></td>
<td>
<p>(string, optional) : the title of the network</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_type</code></td>
<td>
<p>: <code>point</code> (default) for the graph to display points
and the label outside the point, or <code>label</code> to have a node which is the
label itself (the text size will then be associated to the node degree)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_label_title</code></td>
<td>
<p>(bool, default F) : should the node labels be the
names or title column? (e.g. names : CRUDSAL_cat, title : Raw vegetables)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family_palette</code></td>
<td>
<p>(list of key = value) : the keys are the family codes
(from family column in the legend),  and the values are the corresponding
colors. Can be generated using <code>family_palette</code>.
USEFUL if there is a need to compare multiple graphs of the same families,
so the color is consistent.
If NULL (default), the palette will be automatically generated using viridis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>(chr) : the layout to be used to construct the graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_null</code></td>
<td>
<p>(bool) : should the nodes with 0 connections (degree 0)
be removed from the graph. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge_alpha</code></td>
<td>
<p>(bool) : should the edges have a transparent scale?
In addition to the width scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge_color</code></td>
<td>
<p>(list) : list of 2. The first element is the color of the
negative edges, the second the
positive. Default is <code>c("#6DBDE6", "#FF8C69")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge_width_range</code></td>
<td>
<p>: range of the edges width. (default is 0.2 to 2)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge_alpha_range</code></td>
<td>
<p>: if <code>edge_alpha</code> is TRUE, the range of the
alpha values (between 0 and 1). Default is 0.4 to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node_label_size</code></td>
<td>
<p>: the size of the node labels. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_label_size</code></td>
<td>
<p>: the size of the legend labels. Default is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>: other parameters to pass to ggraph 'create_layout'</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list of 3 : <code>igraph</code> : the igraph object, <code>net</code> the graph,
<code>deg</code> the degree table.
</p>


<h3>References</h3>

<p>Csardi et al. (2006) &lt;https://igraph.org&gt;
</p>
<p>Perdersen (2019) &lt;https://ggraph.data-imaginist.com&gt;
</p>


<h3>See Also</h3>

<p><code>graph_from_links_nodes</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">adj_matrix &lt;- cor(iris[,-5])
legend &lt;- data.frame(name = colnames(iris[,-5]),
                     title = colnames(iris[,-5]))
graph_from_matrix(adj_matrix, legend, main_title = "Iris graph")
</code></pre>


</div>