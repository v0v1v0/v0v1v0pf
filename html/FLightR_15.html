<div class="container">

<table style="width: 100%;"><tr>
<td>plot_util_distr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>plots resulting track over map with uncertainty shown by space utilisation distribution</h2>

<h3>Description</h3>

<p>May be use not only for the whole track but for a set of specific dates, e.g. to show spatial uncertainty during migration. Note that you can use it only after obtaining and registering in you current session Google Api Key. For details on the API key check [here](http://ornithologyexchange.org/forums/topic/38315-mapflightrggmap-error).
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_util_distr(
  Result,
  dates = NULL,
  map.options = NULL,
  percentiles = c(0.4, 0.6, 0.8),
  zoom = "auto",
  geom_polygon.options = NULL,
  save.options = NULL,
  color.palette = NULL,
  use.palette = TRUE,
  background = NULL,
  plot = TRUE,
  save = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Result</code></td>
<td>
<p>FLightR result object obtained from <code>run.particle.filter</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>Use NULL if all twilights will be used for plotting, one integer if specific twilight should be plotted (line number in Result$Results$Quantiles). Use data.frame with first column - start of the period and second - end of the period and each line represents a new period to plot specific periods, e.g. wintering or migration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map.options</code></td>
<td>
<p>options passed to <code>get_map</code>, note that <code>zoom</code> option is defined separately</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentiles</code></td>
<td>
<p>Probability breaks for utilisation distribution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom</code></td>
<td>
<p>Zoom for map. If 'auto' FLightR will try to find optimal zoom level by downloading different size maps and checking whether all the points fit the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geom_polygon.options</code></td>
<td>
<p>options passed to <code>geom_polygon</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.options</code></td>
<td>
<p>options passed to <code>ggsave</code>. Filename should be defined here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color.palette</code></td>
<td>
<p>colors for probability contours. Either NULL or <code>colorRampPalette</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.palette</code></td>
<td>
<p>should the same colors be used for polygon boundaries as for polygon filling?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>if provided will be used as a background. Must be created by <code>link[ggmap]{get_map}</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>should function produce a plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save</code></td>
<td>
<p>should function save results with <code>ggsave</code>?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with two parts 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>res_buffers</code></td>
<td>
<p>spatial buffers for defined probability values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p><code>ggplot</code> object</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Eldar Rakhimberdiev
</p>


<h3>Examples</h3>

<pre><code class="language-R">File&lt;-system.file("extdata", "Godwit_TAGS_format.csv", package = "FLightR")
# to run example fast we will cut the real data file by 2013 Aug 20
Proc.data&lt;-get.tags.data(File, end.date=as.POSIXct('2013-06-25', tz='GMT'))
Calibration.periods&lt;-data.frame(
       calibration.start=as.POSIXct(c(NA, "2014-05-05"), tz='GMT'),
       calibration.stop=as.POSIXct(c("2013-08-20", NA), tz='GMT'),
       lon=5.43, lat=52.93) 
       #use c() also for the geographic coordinates, if you have more than one calibration location
       # (e. g.,  lon=c(5.43, 6.00), lat=c(52.93,52.94))

# NB Below likelihood.correction is set to FALSE for fast run! 
# Leave it as default TRUE for real examples
Calibration&lt;-make.calibration(Proc.data, Calibration.periods, likelihood.correction=FALSE)

Grid&lt;-make.grid(left=0, bottom=50, right=10, top=56,
  distance.from.land.allowed.to.use=c(-Inf, Inf),
  distance.from.land.allowed.to.stay=c(-Inf, Inf))

all.in&lt;-make.prerun.object(Proc.data, Grid, start=c(5.43, 52.93),
                             Calibration=Calibration, threads=1)
# here we will run only 1e4 partilces for a very short track.
# One should use 1e6 particles for the full run
Result&lt;-run.particle.filter(all.in, threads=1,
           nParticles=1e3, known.last=TRUE,
           precision.sd=25, check.outliers=FALSE)

## Not run: 
plot_util_distr(Result, zoom=6, save=FALSE)

## End(Not run)

</code></pre>


</div>