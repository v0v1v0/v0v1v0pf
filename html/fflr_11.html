<div class="container">

<table style="width: 100%;"><tr>
<td>ffl_api</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Call the ESPN Fantasy API</h2>

<h3>Description</h3>

<p>Use <code>httr::GET()</code> to make a request to the ESPN API and return the parsed
list from the JSON data. The function uses <code>httr::RETRY()</code>, so the call will
repeat up to three times if there is a failure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ffl_api(
  leagueId = ffl_id(),
  view = NULL,
  leagueHistory = FALSE,
  seasonId = 2023,
  scoringPeriodId = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>leagueId</code></td>
<td>
<p>Numeric league ID or ESPN fantasy page URL. Defaults to
<code>getOption("fflr.leagueId")</code>. Function fails if no ID is found.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>view</code></td>
<td>
<p>Character vector of specific API "views" which describe the data
returned (e.g., "mRoster", "mSettings").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leagueHistory</code></td>
<td>
<p>logical; Should the <code>leagueHistory</code> version of the API
be called? If <code>TRUE</code>, a list of results is returned, with one element for
each historical year of the league.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seasonId</code></td>
<td>
<p>Integer year of NFL season. By default, the season is
currently set to 2023. Use a recent year or set <code>leagueHistory</code> to <code>TRUE</code>
to obtain all past data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoringPeriodId</code></td>
<td>
<p>Integer week of NFL season. By default, <code>NULL</code> will
use the current week (see <code>ffl_week()</code>). Scoring periods are always one
week in length, whereas matchups might be longer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional queries passed to <code>httr::GET()</code>. Arguments are
converted to a named list and passed to <code>query</code> alongside <code>view</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A single JSON string.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
ffl_api()

## End(Not run)
</code></pre>


</div>