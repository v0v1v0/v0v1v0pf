<div class="container">

<table style="width: 100%;"><tr>
<td>GapSPDF</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forest Canopy Gaps as Spatial Polygons</h2>

<h3>Description</h3>

<p>This function converts forest canopy gaps as <code>raster::RasterLayer</code> to
<code>sp::SpatialPointsDataFrame</code> objects
</p>


<h3>Usage</h3>

<pre><code class="language-R">GapSPDF(gap_layer)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>gap_layer</code></td>
<td>
<p>ALS-derived gap layer (output of <code>getForestGaps()</code> function).
An object of the class RasterLayer.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A <code>sp::SpatialPointsDataFrame</code> object of the forest canopy gaps.
The result can be exported as a ESRI shapefile using
<code>raster::shapefile()</code> function in the <em>raster</em> package.
</p>


<h3>Author(s)</h3>

<p>Carlos Alberto Silva.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Loading raster and viridis libraries
library(raster)
library(viridis)


# ALS-derived CHM over Adolpho Ducke Forest Reserve - Brazilian tropical forest
data(ALS_CHM_DUC)

# set height thresholds (e.g. 10 meters)
threshold &lt;- 10
size &lt;- c(1, 10^4) # m2

# Detecting forest gaps
gaps_duc &lt;- getForestGaps(chm_layer = ALS_CHM_DUC, threshold = threshold, size = size)

# Converting raster layer to SpatialPolygonsDataFrame
gaps_spdf &lt;- GapSPDF(gap_layer = gaps_duc)

# Plotting ALS-derived CHM and forest gaps
plot(ALS_CHM_DUC, col = viridis(10), xlim = c(173025, 173125), ylim = c(9673100, 96731200))
plot(gaps_spdf, add = TRUE, border = "red", lwd = 2)

# Populating the attribute table of Gaps_spdf with gaps statistics
gaps_stats &lt;- GapStats(gap_layer = gaps_duc, chm_layer = ALS_CHM_DUC)
gaps_spdf &lt;- merge(gaps_spdf, gaps_stats, by = "gap_id")
head(gaps_spdf@data)
</code></pre>


</div>