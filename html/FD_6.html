<div class="container">

<table style="width: 100%;"><tr>
<td>functcomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Functional Composition</h2>

<h3>Description</h3>

<p><code>functcomp</code> returns the functional composition of a set of communities, as measured by the community-level weighted means of trait values (CWM; e.g. Lavorel et al. 2008).  
</p>


<h3>Usage</h3>

<pre><code class="language-R">functcomp(x, a, CWM.type = c("dom", "all"), bin.num = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>matrix or data frame containing the functional traits. Traits can be <code>numeric</code>, <code>ordered</code>, or <code>factor</code>. Binary traits should be <code>numeric</code> and only contain 0 and 1. <code>character</code> traits will be converted to <code>factor</code>. For a given trait, species with <code>NA</code> are excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>matrix containing the abundances of the species in <code>x</code> (or presence-absence, i.e. 0 or 1). Rows are sites and species are columns. The number of species (columns) in <code>a</code> must match the number of species (rows) in <code>x</code>. In addition, the species labels in <code>a</code> and <code>x</code> must be identical and in the same order. <code>NAs</code> will be replaced by 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CWM.type</code></td>
<td>
<p>character string indicating how nominal, binary and ordinal traits should be handled. See ‘details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin.num</code></td>
<td>
<p>vector indicating binary traits to be treated as continuous.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>functcomp</code> computes the community-level weighted means of trait values for a set of communities (i.e. sites). For a continuous trait, CWM is the mean trait value of all species present in the community (after excluding species with <code>NAs</code>), weighted by their relative abundances.
</p>
<p>For ordinal, nominal and binary traits, either the dominant class is returned (when <code>CWM.type</code> is <code>"dom"</code>), or the abundance of each individual class is returned (when <code>CWM.type</code> is <code>"all"</code>).
</p>
<p>The default behaviour of binary traits being treated as nominal traits can be over-ridden by specifying <code>bin.num</code>, in which case they are treated as numeric traits.
</p>
<p>When <code>CWM.type = "dom"</code>, if the maximum abundance value is shared between two or more classes, then one of these classes is randomly selected for CWM. Because species with <code>NAs</code> for a given trait are excluded for that trait, it is possible that when <code>CWM.type</code> is set to <code>"all"</code>, the sum of the abundances of all classes for a given ordinal/nominal/binary trait does not equal the sum of the species abundances. Thus, it is definitely not recommended to have <code>NAs</code> for very abundant species, as this will lead to biased estimates of functional composition.  
</p>


<h3>Value</h3>

<p>a data frame containing the CWM values of each trait for each community.
</p>


<h3>Note</h3>

<p><code>functcomp</code> is implemented in <code>dbFD</code> and will be returned if <code>calc.CWM</code> is <code>TRUE</code>. 
</p>


<h3>Author(s)</h3>

<p>Etienne Laliberté <a href="mailto:etiennelaliberte@gmail.com">etiennelaliberte@gmail.com</a> <a href="https://www.elaliberte.info/">https://www.elaliberte.info/</a></p>


<h3>References</h3>

<p>Lavorel, S., K. Grigulis, S. McIntyre, N. S. G. Williams, D. Garden, J. Dorrough, S. Berman, F. Quétier, A. Thébault and A. Bonis (2008) Assessing functional diversity in the field - methodology matters! <em>Functional Ecology</em> <b>22</b>:134-147.
</p>


<h3>See Also</h3>

<p><code>dbFD</code> for measuring distance-based multidimensional functional diversity indices, including CWM.</p>


<h3>Examples</h3>

<pre><code class="language-R"># for ordinal, nominal and binary variables
# returns only the most frequent class
ex1 &lt;- functcomp(dummy$trait, dummy$abun)
ex1

# returns the frequencies of each class
ex2 &lt;- functcomp(dummy$trait, dummy$abun, CWM.type = "all")
ex2

# example with real data from New Zealand short-tussock grasslands
ex3 &lt;- functcomp(tussock$trait, tussock$abun)
ex3
</code></pre>


</div>