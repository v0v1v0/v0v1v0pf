<div class="container">

<table style="width: 100%;"><tr>
<td>top.percent.by</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subset the top percent of a dataframe by a specific column</h2>

<h3>Description</h3>

<p>Function that sorts a dataframe in descending order for a specific column, calculates the sum of all rows for that column, applies the chosen percentage to said sum, and subsets the minimum number of consecutive rows needed to reach this value.
</p>


<h3>Usage</h3>

<pre><code class="language-R">top.percent.by(df, percentage, by)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A dataframe object as downloaded from GFW's Google Big Data Query.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentage</code></td>
<td>
<p>Number. The 'x' in 'the top x percent of the dataframe'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>Character. The name of the column for which the percentage will be calculated.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataframe.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
dated &lt;- c("2020-01-01", "2020-01-02")
lat &lt;- c(40, 41)
lon &lt;- c(12,13)
mmsi &lt;- c("34534555", "25634555")
hours &lt;- c(0, 5)
fishing_hours &lt;- c(1,9)

df &lt;- data.frame(dated, lat, lon, mmsi, hours, fishing_hours)

who.fishs.the.most &lt;- top.percent.by(df, 90, "fishing_hours")

print(who.fishs.the.most)

</code></pre>


</div>