<div class="container">

<table style="width: 100%;"><tr>
<td>plot.fect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting</h2>

<h3>Description</h3>

<p>Visualizes estimation results of the matrix completion method.</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'fect'
plot(x, type = NULL, loo = "FALSE", 
            highlight = NULL, plot.ci = NULL, show.points = NULL,
            show.group = NULL, bound = NULL, vis = NULL,
            count = TRUE, proportion = 0.3, pre.periods = NULL,
            f.threshold = NULL, tost.threshold = NULL,
            effect.bound.ratio = FALSE, 
            stats = NULL, stats.labs = NULL, 
            main = NULL, 
            xlim = NULL, ylim = NULL, xlab = NULL, ylab = NULL, 
            gridOff = FALSE, legendOff = FALSE, legend.pos = NULL, legend.nrow = NULL,
            legend.labs = NULL, stats.pos = NULL, theme.bw = TRUE,
            nfactors = NULL, include.FE = TRUE,
            id = NULL,
            cex.main = NULL, cex.main.sub = NULL, cex.axis = NULL,
            cex.lab = NULL, cex.legend = NULL, cex.text = NULL,
            axis.adjust = FALSE, axis.lab = "both", axis.lab.gap = c(0, 0),
            start0 = FALSE,
            return.test = FALSE,
            balance = NULL,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>fect</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a string specifying the type of the plot. 
<code>"gap"</code> plots the estimated period-wise ATT (dynamic treatment effects), 
<code>"equiv"</code> shows the visualization of the equivalence test, 
<code>"exit"</code> plots the estimated period-wise switch-off effects,
<code>"status"</code> shows the treatment status of all observations, 
<code>"factors"</code> plots the estimated factor and time fixed effects,
<code>"loadings"</code> plots the estimated factor loadings and unit fixed effects,
<code>"calendar"</code> plots the estimated treatment effects for each calendar period,
and <code>"box"</code> visualizes the estimated individualistic treatment effects of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loo</code></td>
<td>
<p>a logical flag indicating whether to use the leave-one-period-out pre-treatment effects for the visualization and tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highlight</code></td>
<td>
<p>a logical flag indicating whether to highlight the periods for the carryover and placebo test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.ci</code></td>
<td>
<p>a string specifying the confidence interval. Choose from: "0.9", "0.95", or "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.points</code></td>
<td>
<p>a logical flag indicating whether to represent treatment effects by points or point-ranges. Default to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.group</code></td>
<td>
<p>a string indicating the group to be visualized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound</code></td>
<td>
<p>a string that specifies the bounds to be plotted for equivalence test 
for pre-treatment fit checking. Choose from: "both", "equiv", "min" and "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vis</code></td>
<td>
<p>A string specifying whether to plot the dots for placebo plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>count</code></td>
<td>
<p>a logical flag controlling whether to show the count of each term 
for gap plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportion</code></td>
<td>
<p>a positive value specifying periods at which observations equal to 
or greater than the proporation of the largest number of observations at a certain 
period. Default to 0.3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre.periods</code></td>
<td>
<p>a vector specifying the range of pre-treatment period used for goodness-of-fit test. If left blank, all 
pre-treatment periods specified by <code>proportion</code> will be used. Ignore if <code>se = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the F-statistic in the equivalent test.
Ignore if <code>se = FALSE</code>.  Deafult is <code>f.threshold = 0.5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tost.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the two-one-sided t-test.
If <code>alpha=0.05</code>, TOST checks whether the 90
The default value is 0.36 times the standard deviation of the outcome variable after two-way fixed effects are partialed out.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect.bound.ratio</code></td>
<td>
<p>a logical value specifiying whether to annotate 
the ratio of estimated average treatment effects / minimun bound.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stats</code></td>
<td>
<p>a string that specifices what statistics to be shown. For <code>"gap"</code> plot, choose from <code>c("none", "F.p", "equiv.p", "F.equiv.p",)</code>, for 
<code>"placebo"</code> plot, choose from <code>c("none", "placebo.p", "equiv.placebo.p")</code>, and for "carryover" plot, choose from <code>c("none", "carryover.p")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stats.labs</code></td>
<td>
<p>a string specifying the label for the statistics specified by <code>stats</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>a string that controls the title of the plot. If not
supplied, no title will be shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>a two-element numeric vector specifying the range of x-axis. When 
class of time varible is string, must specify not original value but a counting number e.g. <code>xlim=c(1,30)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>a two-element numeric vector specifying the range of y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>a string indicating the label of the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a string indicating the label of the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gridOff</code></td>
<td>
<p>a logical flag indicating whether to remove the grid lines for the status plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendOff</code></td>
<td>
<p>a logical flag controlling whether to show the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.pos</code></td>
<td>
<p>a string specifying the position of legend. If left blank, 
legend will be setted at the bottom.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.nrow</code></td>
<td>
<p>an integer speficying rows of legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.labs</code></td>
<td>
<p>a string vector for user-defined legends.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stats.pos</code></td>
<td>
<p>a numeric vector of length 2 specifying the postion for 
labels of test statistic value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme.bw</code></td>
<td>
<p>a logical flag specifying whether to use the black and 
white theme.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfactors</code></td>
<td>
<p>a integer controlling the number of factors to be shown when <code>type='factors'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include.FE</code></td>
<td>
<p>a loical flag indicating whether to keep the fixed effects when <code>type='factors'</code> or <code>type='loadings'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>a string vector specifying a sub-group of units that are to be 
plotted for treatment status(<code>type = "status"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.main</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the main title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.main.sub</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the subtitles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.axis</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the texts on the axes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.lab</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the axis titles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.legend</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.text</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.adjust</code></td>
<td>
<p>a logic flag indicating whether to adjust labels on x-axis. 
Useful when class of time variable is string and data magnitude is large.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.lab</code></td>
<td>
<p>a string indicating whether labels on the x- and y-axis will be shown. There are four options: <code>"both"</code> (default): labels on both axes will be shown; <code>"unit"</code>: only labels on y-axis will be shown; <code>"time"</code>: only labels on the x-axis will be shown; "none": no labels will be shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.lab.gap</code></td>
<td>
<p>a numeric vector setting the gaps between labels on the x- or y-axis for <code>"missing"</code> plot. Default is <code>axis.lab.gap = c(0, 0)</code>, which means that all labels will be shown. Useful for datasets with large N or T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start0</code></td>
<td>
<p>a logical flag indicating whether to index the start of the treatment as period 0 rather than period 1. Default to FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.test</code></td>
<td>
<p>a logical flag indicating whether to return the results of statistical tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance</code></td>
<td>
<p>a logical flag indicating whether to plot the dynamic treatment effects for the balance sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other argv.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>plot.fect</code> visualizes the estimation results obtained by <code>fect</code>.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>a ggplot2 object saving the graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.out</code></td>
<td>
<p>a list storing the results of statistical tests if <code>return.test=TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu, Ziyi Liu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. "Panel Data Models with Interactive Fixed Effects." Econometrica.
</p>
<p>Yiqing Xu. 2017. "Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models." Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 "Matrix completion methods for causal panel data models." Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. "A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data." American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code>fect</code> and <code>print.fect</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(fect)
data(fect)
out &lt;- fect(Y ~ D + X1 + X2, data = simdata1, 
            index = c("id","time"), force = "two-way",
            CV = TRUE, r = c(0, 5), se = 0, parallel = FALSE) 
plot(out)
plot(out,type='status')
plot(out,show.points = FALSE)
</code></pre>


</div>