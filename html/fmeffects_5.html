<div class="container">

<table style="width: 100%;"><tr>
<td>came</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes a partitioning for a <code>ForwardMarginalEffect</code>
</h2>

<h3>Description</h3>

<p>This is a wrapper function that creates the correct subclass of <code>Partitioning</code>.
It computes feature subspaces for semi-global interpretations of FMEs via recursive partitioning (RP).
</p>


<h3>Usage</h3>

<pre><code class="language-R">came(
  effects,
  number.partitions = NULL,
  max.sd = Inf,
  rp.method = "ctree",
  tree.control = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>effects</code></td>
<td>
<p>A <code>ForwardMarginalEffect</code> object with FMEs computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>number.partitions</code></td>
<td>
<p>The exact number of partitions required.
Either <code>number.partitions</code> or <code>max.sd</code> can be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.sd</code></td>
<td>
<p>The maximum standard deviation required in each partition.
Among multiple partitionings with this criterion identified, the one with lowest number of partitions is selected.
Either <code>number.partitions</code> or <code>max.sd</code> can be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rp.method</code></td>
<td>
<p>One of <code>"ctree"</code> or <code>"rpart"</code>. The RP algorithm used for growing the decision tree. Defaults to <code>"ctree"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tree.control</code></td>
<td>
<p>Control parameters for the RP algorithm. One of <code>"ctree.control(...)"</code> or <code>"rpart.control(...)"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>Partitioning</code> Object with identified feature subspaces.
</p>


<h3>References</h3>

<p>Scholbeck, C.A., Casalicchio, G., Molnar, C. et al. Marginal effects for non-linear prediction functions. Data Min Knowl Disc (2024). https://doi.org/10.1007/s10618-023-00993-x
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Train a model and compute FMEs:

library(mlr3verse)
library(ranger)
data(bikes, package = "fmeffects")
task = as_task_regr(x = bikes, id = "bikes", target = "count")
forest = lrn("regr.ranger")$train(task)
effects = fme(model = forest, data = bikes, features = list("temp" = 1), ep.method = "envelope")

# Find a partitioning with exactly 3 subspaces:
subspaces = came(effects, number.partitions = 3)

# Find a partitioning with a maximum standard deviation of 20, use `rpart`:
library(rpart)
subspaces = came(effects, max.sd = 200, rp.method = "rpart")

# Analyze results:
summary(subspaces)
plot(subspaces)

# Extract results:
subspaces$results
subspaces$tree
</code></pre>


</div>