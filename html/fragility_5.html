<div class="container">

<table style="width: 100%;"><tr>
<td>frag.ma</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Assessing Fragility of a Meta-Analysis With a Binary Outcome
</h2>

<h3>Description</h3>

<p>Produces results, such as fragility index, fragility quotient, and event status modifications for altering statistical significance, of a meta-analysis with a binary outcome.
</p>


<h3>Usage</h3>

<pre><code class="language-R">frag.ma(e0, n0, e1, n1, data, measure = "OR", alpha = 0.05,
        mod.dir = "both", OR = 1, RR = 1, RD = 0,
        method = "DL", test = "z", drop00 = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>e0</code></td>
<td>
<p>a numeric vector or the corresponding column name in the argument <code>data</code>, indicating event counts in group 0 among the studies in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n0</code></td>
<td>
<p>a numeric vector or the corresponding column name in the argument <code>data</code>, indicating sample sizes in group 0 among the studies in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e1</code></td>
<td>
<p>a numeric vector or the corresponding column name in the argument <code>data</code>, indicating event counts in group 1 among the studies in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n1</code></td>
<td>
<p>a numeric vector or the corresponding column name in the argument <code>data</code>, indicating sample sizes in group 1 among the studies in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional data frame containing the dataset of the collected studies in the meta-analysis with a binary outcome. If <code>data</code> is specified, the previous arguments, <code>e0</code>, <code>n0</code>, <code>e1</code>, and <code>n1</code>, should be specified as their corresponding column names in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>a character string indicating the measure of treatment effect (i.e., effect size) for the binary outcome. It should be one of <code>"OR"</code> (odds ratio, the default), <code>"RR"</code> (relative risk), and <code>"RD"</code> (risk difference).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>a numeric value between 0 and 1, indicating the statistical significance level (the default is 0.05). It determines the confidence level <code class="reqn">(1-\alpha)\times100\%</code> of the confidence interval when deriving the fragility index/quotient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mod.dir</code></td>
<td>
<p>a character string indicating the direction of the confidence interval change due to event status modifications when the original confidence interval covers the null value (i.e., non-significance altered to significance). It is not used when significance is altered to non-significance. It should be one of <code>"left"</code> (moving to the left side of the null value), <code>"right"</code> (moving to the right side of the null value), <code>"one"</code> (based on the direction of the point estimate of the original overall effect size), and <code>"both"</code> (both directions, the default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OR</code></td>
<td>
<p>a numeric positive value indicating the value of odds ratio under the null hypothesis (the default is 1). It is used only if the argument <code>measure</code> is <code>"OR"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR</code></td>
<td>
<p>a numeric positive value indicating the value of relative risk under the null hypothesis (the default is 1). It is used only if the argument <code>measure</code> is <code>"RR"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RD</code></td>
<td>
<p>a numeric value between <code class="reqn">-</code>1 indicating the value of risk difference under the null hypothesis (the default is 0). It is used only if the argument <code>measure</code> is <code>"RD"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string specifying the method for performing meta-analysis. It is passed to <code>rma.uni</code>. Options include the fixed-effect model by specifying <code>"FE"</code> and the random-effects model by specifying <code>"DL"</code> (DerSimonian–Laird estimator), <code>"HE"</code> (Hedges estimator), <code>"HS"</code> (Hunter–Schmidt estimator), <code>"SJ"</code> (Sidik–Jonkman estimator), <code>"ML"</code> (maximum likelihood estimator), <code>"REML"</code> (restricted maximum likelihood estimator), <code>"EB"</code> (empirical Bayes estimator), <code>"PM"</code> (Paule–Mandel estimator), or <code>"GENQ"</code> (generalized <code class="reqn">W</code>-statistic estimator) for different methods to estimate the heterogeneity variance. See details in the manual of the package <a href="https://CRAN.R-project.org/package=metafor"><span class="pkg">metafor</span></a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>a character string specifying how confidence intervals are derived. It is passed to <code>rma.uni</code>. Options include <code>"z"</code>, <code>"t"</code>, <code>"knha"</code> (Hartung–Knapp–Sidik–Jonkman method), and <code>"adhoc"</code>; the first indicates Wald-type confidence intervals based on the standard normal distribution (the default), while the latter three yield confidence intervals based on the t-distribution. See details in the manual of the package <a href="https://CRAN.R-project.org/package=metafor"><span class="pkg">metafor</span></a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop00</code></td>
<td>
<p>a logical value indicating whether studies with no events (or only events) in both groups should be dropped when calculating the observed effect sizes or outcomes. It is passed to <code>rma.uni</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments that can be passed to <code>rma.uni</code>. See details in the manual of the package <a href="https://CRAN.R-project.org/package=metafor"><span class="pkg">metafor</span></a>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"frag.ma"</code>. The object is a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>original data in the form of a data frame with six columns: event counts, non-event counts, and sample sizes in group 0 and those in group 1 among all studies in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>measure of treatment effect (i.e., effect size).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>pre-specified statistical significance level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>null</code></td>
<td>
<p>value of odds ratio, relative risk, or risk difference (specified by <code>measure</code>) under the null hypothesis. Note that odds ratio and relative risk are presented on a natural logarithmic scale in all output values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.ori</code></td>
<td>
<p>the point estimate of the overall effect size based on the original meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.ori</code></td>
<td>
<p>the confidence interval of the overall effect size based on the original meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval.ori</code></td>
<td>
<p>the p-value of the overall effect size based on the original meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mod.dir</code></td>
<td>
<p>the direction of the confidence interval change due to event status modifications when the original confidence interval covers the null value (i.e., non-significance altered to significance).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FI</code></td>
<td>
<p>fragility index.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FQ</code></td>
<td>
<p>fragility quotient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>direction of the change of statistical significance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sid.iter</code></td>
<td>
<p>study index(es) with event status modifications during the iterative algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g0.mod.iter</code></td>
<td>
<p>event status modification(s) in group 0 during the iterative algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g1.mod.iter</code></td>
<td>
<p>event status modification(s) in group 1 during the iterative algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.iter</code></td>
<td>
<p>point estimate(s) of the overall effect size during the iterative algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.iter</code></td>
<td>
<p>confidence interval(s) of the overall effect size during the iterative algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.mod</code></td>
<td>
<p>data with event status modification(s) that alter the significance or non-significance.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>If the significance or non-significance cannot be altered based on the given range of event status modifications, the fragility index and fragility quotient are defined to be <code>NA</code> (not available).
</p>


<h3>References</h3>

<p>Atal I, Porcher R, Boutron I, Ravaud P (2019). "The statistical significance of meta-analyses is frequently fragile: definition of a fragility index for meta-analyses." <em>Journal of Clinical Epidemiology</em>, <b>111</b>, 32–40. &lt;doi: <a href="https://doi.org/10.1016/j.jclinepi.2019.03.012">10.1016/j.jclinepi.2019.03.012</a>&gt;
</p>
<p>Lin L, Chu H (2022). "Assessing and visualizing fragility of clinical results with binary outcomes in R using the fragility package." <em>PLOS ONE</em>, <b>17</b>(6), e0268754. &lt;doi: <a href="https://doi.org/10.1371/journal.pone.0268754">10.1371/journal.pone.0268754</a>&gt;
</p>
<p>Lin L, Xing A, Chu H, Murad MH, Xu C, Baer BR, Wells MT, Sanchez-Ramos L (2023). "Assessing the robustness of results from clinical trials and meta-analyses with the fragility index." <em>American Journal of Obstetrics and Gynecology</em>, <b>228</b>(3), 276–282. &lt;doi: <a href="https://doi.org/10.1016/j.ajog.2022.08.053">10.1016/j.ajog.2022.08.053</a>&gt;
</p>


<h3>See Also</h3>

<p><code>frag.ma.alpha</code> for assessing fragility of a meta-analysis at multiple significance levels; <code>frag.mas</code> for assessing fragility of multiple meta-analyses; <code>frag.study</code> for assessing fragility of an individual study; and <code>frag.nma</code> for assessing fragility of a network meta-analysis.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Load datasets of meta-analyses on nutrition support
data(dat.ns)

## Assess fragility of the 11th meta-analysis
out1 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,])
out1

## Visualize the process of event status modifications
##  for altering the non-significance to significance
plot(out1)

## Assess fragility based on relative risk
out2 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,],
  measure = "RR")
out2

## Assess fragility based on risk difference
out3 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,],
  measure = "RD")
out3

## Use the REML method to estimate the heterogeneity variance
out4 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,],
  method = "REML")
out4

## Use the Hartung-Knapp-Sidik-Jonkman to derive
##  the confidence interval in meta-analysis
out5 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,],
  method = "REML", test = "knha")
out5

## Change the significance level to 0.005
out6 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 11,],
  alpha = 0.005)
out6
plot(out6)

## Reduce the distance between the two lines by breaking the y-axis
plot(out6, ybreaks = c(5, 9))

## Suppress the markers of study IDs around the lines
plot(out6, ybreaks = c(5, 9), study.marker = FALSE)

## Change the size of markers of study IDs
plot(out6, ybreaks = c(5, 9), cex.marker = 0.5)

## Change the distance between the markers of study IDs and the lines
plot(out6, ybreaks = c(5, 9), offset.marker = 0)

## Change the colors and width of the lines
plot(out6, ybreaks = c(5, 9), col.line = c("gray", "orange"), lwd = 2)

## Change the location of the legend
plot(out6, ybreaks = c(5, 9), x.legend = "topleft")


## Assess fragility of the first meta-analysis;
##  it takes longer time
out7 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 1,])
out7
plot(out7)
plot(out7, ybreaks = c(840, 880))

## Achieve significance by moving the CI based on the direction of the 
##  original overall effect size estimate
out8 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 1,],
  mod.dir = "one")
out8

## Achieve significance by moving the CI to the left side
out9 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 1,],
  mod.dir = "left")
out9

## Achieve significance by moving the CI to the right side;
##  it takes longer time than that moving the CI to the left side
##  as the original overall effect size estimate was less than the null
out10 &lt;- frag.ma(e0, n0, e1, n1, data = dat.ns[dat.ns$ma.id == 1,],
  mod.dir = "right")
out10
dev.new(width = 12, height = 6)
plot(out10, cex.marker = 0.5)

</code></pre>


</div>