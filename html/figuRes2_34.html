<div class="container">

<table style="width: 100%;"><tr>
<td>km.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>km.plot</h2>

<h3>Description</h3>

<p>A function for creating harmonized Kaplan-Meier plots and accompanying At Risk table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">km.plot(
  parent.df,
  censor.col = "CENSOR",
  centime.col = "CENTIME.DAY",
  category.col = "REGION",
  category.palette = rainbow(5),
  at.risk.palette = rainbow(5),
  category.label = "Treatment Group",
  nsubj.plot.label = "Number at Risk",
  linetype.palette = 1:6,
  x.label = "Time Since Randomization",
  y.label = "Percetage of Subjects",
  x.limits = c(0, 48),
  x.ticks = seq(0, 48, 3),
  y.ticks = seq(0, 0.01, 0.005),
  y.limits = c(0, 0.01),
  line.size = 0.75,
  fromthetop = FALSE,
  text.size = 4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parent.df</code></td>
<td>
<p>data.frame used by ggplot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censor.col</code></td>
<td>
<p>name of parent.df column associated with censor variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centime.col</code></td>
<td>
<p>name of parent.df column associated with censored time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>category.col</code></td>
<td>
<p>data.frame column associated with categorical variable (bar.plot, box.plot, cdf.plot, dot.plot, km.plot)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>category.palette</code></td>
<td>
<p>colors assoicated with categorical variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at.risk.palette</code></td>
<td>
<p>colors to be assocated with categorical variable in accompanying km.plot generated at.risk table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>category.label</code></td>
<td>
<p>passed to x-axis label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsubj.plot.label</code></td>
<td>
<p>used in km.plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linetype.palette</code></td>
<td>
<p>values passed to scale_linetype_manual</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.label</code></td>
<td>
<p>value gets passed to labs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.label</code></td>
<td>
<p>value gets passed to labs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.limits</code></td>
<td>
<p>value gets passed to scale_x_continuous</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.ticks</code></td>
<td>
<p>value gets passed to scale_x_continuous</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.ticks</code></td>
<td>
<p>passed to scale_y_continuous</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.limits</code></td>
<td>
<p>passed to scale_y_continuous</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.size</code></td>
<td>
<p>value gets passed to size within geom_line, geom_step</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fromthetop</code></td>
<td>
<p>logical. If TRUE KM curve decends from 1, if FALSE KM curve ascends from 0 Ensure you have an appropriate censor.col passed above!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.size</code></td>
<td>
<p>value gets passed to geom_text</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A ggplot object is returned.
</p>


<h3>Author(s)</h3>

<p>Greg Cicconetti
</p>


<h3>See Also</h3>

<p>sync.ylab.widths, nsubj.plot
</p>


<h3>Examples</h3>

<pre><code class="language-R">{
require(ggplot2); require(gridExtra)
data(km.data)
working.df &lt;- km.data
head(working.df)
km.M &lt;- km.plot(parent.df = subset(working.df, SEX== "M"),
      centime.col = "CENTIME.DAY",
      category.col = "TRTGRP",
      category.palette = c("red", "blue"),
      at.risk.palette = c("red","blue"),              
      linetype.palette = c("solid","dotted"), 
      y.limits=c(0,.01), 
      y.ticks=seq(0,.01,.005), 
      x.limits=c(-3,48),
      x.ticks=seq(0,48,6))
print(km.M[[1]])
print(km.M[[2]])
grid.arrange(km.M[[1]] + theme(legend.position= "bottom"), km.M[[2]], ncol=1)
comeback &lt;- sync.ylab.widths(list(km.M[[1]]+ theme(legend.position= "bottom"), km.M[[2]]))
grid.arrange(comeback[[1]] , comeback[[2]], ncol=1)
build.page(interior.h = c(.8, .2),
      interior.w = c(1),
       ncol=1, nrow=2,
       interior = list(comeback[[1]], 
           comeback[[2]]))
}
</code></pre>


</div>