<div class="container">

<table style="width: 100%;"><tr>
<td>read.fs.volume</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read volume file in MGH, MGZ or NIFTI format</h2>

<h3>Description</h3>

<p>Read multi-dimensional brain imaging data from a file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read.fs.volume(
  filepath,
  format = "auto",
  flatten = FALSE,
  with_header = FALSE,
  drop_empty_dims = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filepath</code></td>
<td>
<p>string. Full path to the input MGZ, MGH or NIFTI file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>character string, one one of 'auto', 'nii', 'mgh' or 'mgz'. The format to assume. If set to 'auto' (the default), the format will be derived from the file extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flatten</code></td>
<td>
<p>logical. Whether to flatten the return volume to a 1D vector. Useful if you know that this file contains 1D morphometry data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with_header</code></td>
<td>
<p>logical. Whether to return the header as well. If TRUE, return an instance of class 'fs.volume' for data with at least 3 dimensions, a named list with entries "data" and "header". The latter is another named list which contains the header data. These header entries exist: "dtype": int, one of: 0=MRI_UCHAR; 1=MRI_INT; 3=MRI_FLOAT; 4=MRI_SHORT. "voldim": integer vector. The volume (=data) dimensions. E.g., c(256, 256, 256, 1). These header entries may exist: "vox2ras_matrix" (exists if "ras_good_flag" is 1), "mr_params" (exists if "has_mr_params" is 1). See the 'mghheader.*' functions, like <code>mghheader.vox2ras.tkreg</code>, to compute more information from the header fields.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_empty_dims</code></td>
<td>
<p>logical, whether to drop empty dimensions of the returned data</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data, multi-dimensional array. The brain imaging data, one value per voxel. The data type and the dimensions depend on the data in the file, they are read from the header. If the parameter flatten is 'TRUE', a numeric vector is returned instead. Note: The return value changes if the parameter with_header is 'TRUE', see parameter description.
</p>


<h3>See Also</h3>

<p>To derive more information from the header, see the 'mghheader.*' functions, like <code>mghheader.vox2ras.tkreg</code>.
</p>
<p>Other morphometry functions: 
<code>fs.get.morph.file.ext.for.format()</code>,
<code>fs.get.morph.file.format.from.filename()</code>,
<code>read.fs.curv()</code>,
<code>read.fs.mgh()</code>,
<code>read.fs.morph.gii()</code>,
<code>read.fs.morph()</code>,
<code>read.fs.weight()</code>,
<code>write.fs.curv()</code>,
<code>write.fs.label.gii()</code>,
<code>write.fs.mgh()</code>,
<code>write.fs.morph.asc()</code>,
<code>write.fs.morph.gii()</code>,
<code>write.fs.morph.ni1()</code>,
<code>write.fs.morph.ni2()</code>,
<code>write.fs.morph.smp()</code>,
<code>write.fs.morph.txt()</code>,
<code>write.fs.morph()</code>,
<code>write.fs.weight.asc()</code>,
<code>write.fs.weight()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">    brain_image = system.file("extdata", "brain.mgz",
                               package = "freesurferformats",
                               mustWork = TRUE);
    vd = read.fs.volume(brain_image);
    cat(sprintf("Read voxel data with dimensions %s. Values: min=%d, mean=%f, max=%d.\n",
                 paste(dim(vd), collapse = ' '), min(vd), mean(vd), max(vd)));
    # Read it again with full header data:
    vdh = read.fs.volume(brain_image, with_header = TRUE);
    # Use the vox2ras matrix from the header to compute RAS coordinates at CRS voxel (0, 0, 0):
    vox2ras_matrix = mghheader.vox2ras(vdh)
    vox2ras_matrix %*% c(0,0,0,1);

</code></pre>


</div>