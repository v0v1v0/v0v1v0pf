<div class="container">

<table style="width: 100%;"><tr>
<td>update_instruments.instrument</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update instruments with metadata from another instrument.</h2>

<h3>Description</h3>

<p>Update instruments with metadata from another instrument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">update_instruments.instrument(Symbols, source_id, create.new = FALSE,
  ignore = "identifiers", assign_i = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Symbols</code></td>
<td>
<p>charcter vector of primary_ids or other instrument identifiers.
of instruments to be updated.  Alternatively, <code>Symbols</code> can be an
<code>instrument</code> or list of <code>instrument</code>s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_id</code></td>
<td>
<p>The primary_id (or other identifier) of an instrument, or
an instrument.  The <code>source_id</code> instrument will be used to update the
metadata of <code>Symbols</code>' instruments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create.new</code></td>
<td>
<p>If FALSE (Default), only attributes that exist but have 
empty values will be updated.  If TRUE, new attributes will be created if
<code>source_id</code> has them, but the <code>Symbols</code> do not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore</code></td>
<td>
<p>vector of names of instrument attributes that should not be
copied to the updated instruments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assign_i</code></td>
<td>
<p>TRUE/FALSE. If TRUE, the updated instruments will be assigned
back into the instrument environment.  If FALSE, a list of updated 
instruments will be returned</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default, only attributes that have a value of <code>""</code> will be given a 
new value.
</p>
<p>If <code>create.new</code> is <code>TRUE</code>, then if there are attributes in
<code>source_id</code> that are not in the <code>Symbols</code>' instrument, those 
attributes will be copied to the updated instruments unless they are in 
<code>ignore</code>.
</p>


<h3>Value</h3>

<p>if <code>isTRUE(assign_i)</code> a vector of primary_ids of the instruments
that were upated.  Otherwise, a list of updated instrument objects.
</p>


<h3>Note</h3>

<p>one way to overwrite attributes of one instrument with those of another
is to first set equal to <code>""</code> those attributes that you want to 
overwrite, then use <code>update_instruments.instrument</code> to copy the 
attributes.
</p>


<h3>Author(s)</h3>

<p>Garrett See
</p>


<h3>See Also</h3>

<p><code>update_instruments.yahoo</code>, 
<code>all.equal.instrument</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#rm_instruments()
currency("USD")
synthetic("SPX", "USD", identifiers=list(yahoo="GSPC"),
          tick_size=0.01,
         liquidHours="T08:30:00/T15:00:00", 
         extraField='something else', 
         assign_i=TRUE)
stock("SPY", "USD", liquidHours="", assign_i=TRUE)
all.equal(getInstrument("SPX"), getInstrument("SPY"))
getInstrument("SPY")
## update SPY metadata based on the metadata of SPX
## Only attributes that == "" are updated by default
update_instruments.instrument("SPY", "SPX", assign_i=FALSE) #liquidHours
update_instruments.instrument("SPY", "SPX", create.new=TRUE,
                              ignore=c("identifiers", "type"), 
                              assign_i=FALSE)
# Although you probably do NOT want to, this will
# copy everything new -- including identifiers and type!
update_instruments.instrument("SPY", "SPX", create.new=TRUE, ignore=NULL, 
                              assign_i=FALSE) 

## End(Not run)
</code></pre>


</div>