<div class="container">

<table style="width: 100%;"><tr>
<td>csbu</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-sectional bottom-up reconciliation</h2>

<h3>Description</h3>

<p>This function computes the cross-sectional bottom-up reconciled forecasts
(Dunn et al., 1976) for all series by appropriate summation of the bottom
base forecasts <code class="reqn">\widehat{\mathbf{b}}</code>:
</p>
<p style="text-align: center;"><code class="reqn">\widetilde{\mathbf{y}} = \mathbf{S}_{cs}\widehat{\mathbf{b}},</code>
</p>

<p>where <code class="reqn">\mathbf{S}_{cs}</code> is the cross-sectional structural matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">csbu(base, agg_mat, sntz = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>A (<code class="reqn">h \times n_b</code>) numeric matrix or multivariate time series
(<code>mts</code> class) containing bottom base forecasts; <code class="reqn">h</code> is the
forecast horizon, and <code class="reqn">n_b</code> is the total number of bottom variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agg_mat</code></td>
<td>
<p>A (<code class="reqn">n_a \times n_b</code>) numeric matrix representing the cross-sectional
aggregation matrix. It maps the <code class="reqn">n_b</code> bottom-level (free)
variables into the <code class="reqn">n_a</code> upper (constrained) variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sntz</code></td>
<td>
<p>If <code>TRUE</code>, the negative base forecasts are
set to zero before applying bottom-up.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A (<code class="reqn">h \times n</code>) numeric matrix of cross-sectional reconciled forecasts.
</p>


<h3>References</h3>

<p>Dunn, D. M., Williams, W. H. and Dechaine, T. L. (1976), Aggregate versus subaggregate
models in local area forecasting, <em>Journal of the American Statistical Association</em>
71(353), 68â€“71. <a href="https://doi.org/10.1080/01621459.1976.10481478">doi:10.1080/01621459.1976.10481478</a>
</p>


<h3>See Also</h3>

<p>Bottom-up reconciliation: 
<code>ctbu()</code>,
<code>tebu()</code>
</p>
<p>Cross-sectional framework: 
<code>csboot()</code>,
<code>cscov()</code>,
<code>cslcc()</code>,
<code>csmo()</code>,
<code>csrec()</code>,
<code>cstd()</code>,
<code>cstools()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
# (3 x 2) bottom base forecasts matrix (simulated), Z = X + Y
bts &lt;- matrix(rnorm(6, mean = c(10, 10)), 3, byrow = TRUE)

# Aggregation matrix for Z = X + Y
A &lt;- t(c(1,1))
reco &lt;- csbu(base = bts, agg_mat = A)

# Non negative reconciliation
bts[2,2] &lt;- -bts[2,2] # Making negative one of the base forecasts for variable Y
nnreco &lt;- csbu(base = bts, agg_mat = A, sntz = TRUE)

</code></pre>


</div>