<div class="container">

<table style="width: 100%;"><tr>
<td>otm.arxiv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Optimised Theta Method

</h2>

<h3>Description</h3>


<p>Functions for forecast univariate time series using the Optimised Theta Method presented in the arxiv paper (Fioruci et al, 2015).
If the theta parameter is not specified so the Generalised Rolling Origin Evaluation is used
for select the theta value over the thetaList argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">	otm.arxiv( y, h=5, s=NULL, theta=NULL, tLineExtrap=expSmoot, g="sAPE",
		approach="c", n1=NULL, m=NULL, H=NULL, p=NULL,
		thetaList=seq(from=1,to=5,by=0.5), mc.cores=1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>Object of time series class

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>

<p>Number of required forecasting periods

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>

<p>If <code>TRUE</code>, the multiplicative seasonal decomposition is used.
If <code>NULL</code>, quarterly and monthly time series are tested for statistically seasonal behaviour, with 95% of significance. Default is NULL.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>

<p>The value of theta parameter. If <code>theta = NULL</code> the theta parameter is estimated using the Generalised Rolling Origin Evaluation.


</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tLineExtrap</code></td>
<td>

<p>A forecasting function for extrapolation the second theta-line. Default is <code>expSmoot</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>

<p>The error type that will be used by <code>groe</code> function for select the <code>theta</code> value in the estimation process.
The possibility values for <code>g</code>	is <code>"sAPE", "APE", "AE"</code> and <code>"SE"</code>.
If <code>theta</code> is not <code>NULL</code> the <code>g</code> argument is not used. Default is "sAPE".

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>approach</code></td>
<td>

<p>The approach set-up for <code>groe</code> parameters (<code>n1, m, H, p</code>). One letter between <code>'a'</code> to <code>'h'</code> according to Fioruci et al (2015).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n1</code></td>
<td>

<p>The first origin for Generalised Rolling Origin Evaluation.
This argument is not used if <code>theta!=NULL</code> or <code>approach!=NULL</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>

<p>The number of movements of the origin in each step. This argument is not used if <code>theta!=NULL</code> or <code>approach!=NULL</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>H</code></td>
<td>

<p>The number of predictions in each step. This argument is not used if <code>theta!=NULL</code> or <code>approach!=NULL</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>

<p>The number of origin updates. This argument is not used if <code>theta!=NULL</code> or <code>approach!=NULL</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thetaList</code></td>
<td>

<p>A vector with the possible values for <code>theta</code>. This argument is not used if <code>theta</code> argument is not <code>NULL</code>.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>

<p>Number of cores that will be used for estimate the theta parameter. It is not accepted <code>mc.cores&gt;1</code> on Windows SO.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Additional arguments for <code>tLineExtrap</code>.

</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are fully automatic, you just need to pass your time series. Particular cases are obtained by:
If <code>theta = 1</code> the <code>tLineExtrapModel</code> method is computed;
If <code>theta = 2</code> so the Standard Theta Method of Assimakopoulos and Nikolopoulos (2000) is computed.
</p>
<p>By default (<code>s=NULL</code>), the 90% significance seasonal Z-test, used by Assimakopoulos and Nikolopoulos (2000), is applied for quarterly and monthly time series.
</p>


<h3>Value</h3>

<p>An list containing the elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>$y </code></td>
<td>
<p>The original time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$mean </code></td>
<td>
<p>A time series element with the forecasting points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$fitted </code></td>
<td>
<p>A time series element with the fitted points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$residuals </code></td>
<td>
<p>A time series element with the residual points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$theta </code></td>
<td>
<p>The estimated theta value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$tLineExtrap_par </code></td>
<td>
<p>The estimated parameters of <code>tLineExtrap</code> method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$weights </code></td>
<td>
<p>The estimated weights values.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The <code>thetaM</code> function is just a particular case of <code>otm</code> with <code>theta=2</code>.
</p>


<h3>Author(s)</h3>

<p>Jose Augusto Fiorucci, Francisco Louzada
</p>


<h3>References</h3>

<p>Fioruci J.A., Pellegrini T.R., Louzada F., Petropoulos F. (2015). <em>The Optimised Theta Method</em>. arXiv preprint, arXiv:1503.03529.
</p>
<p>Assimakopoulos, V. and Nikolopoulos k. (2000). <em>The theta model: a decomposition approach to forecasting</em>. International Journal of Forecasting 16, 4, 521-530.
</p>


<h3>See Also</h3>

<p><code>forecTheta-package</code>, <code>dotm</code>, <code>groe</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
y1 = 2+ 0.15*(1:20) + rnorm(20,2)
y2 = y1[20]+ 0.3*(1:30) + rnorm(30,2)
y =  as.ts(c(y1,y2))

otm.arxiv(y, h=10)

### running the M3-competition data base by OTM approach (a) ###
#require(Mcomp)
#data(M3)
#
#forec = matrix(NA, nrow=3003, ncol=18)
#obs = matrix(NA, nrow=3003, ncol=18) #matrix of the out-sample values
#
#for(i in 1:3003){
#	if(i %% 100 == 0){print(i)}
#	x=M3[[i]]$x
#	h=M3[[i]]$h
#	out = otm.arxiv(x,h,approach='a',tLineExtrap=ses)
#	forec[i,1:h] = out$mean
#	obs[i,1:h] = M3[[i]]$xx
#}
#
#sAPE = errorMetric(obs, forec, type="sAPE", statistic="N") ## sAPE matrix
#
##### sMAPE results ##
### Yearly
#mean( sAPE[1:645, 1:6] )
### QUARTERLY
#mean( sAPE[646:1401, 1:8] )
### MONTHLY
#mean( sAPE[1402:2829, 1:18] )
### Other
#mean( sAPE[2830:3003, 1:8] )
### ALL
#mean( sAPE, na.rm=TRUE )

</code></pre>


</div>