<div class="container">

<table style="width: 100%;"><tr>
<td>round_fmt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Round and prepare a value for display</h2>

<h3>Description</h3>

<p>This function is used within <code>format_value()</code> to prepare numeric values within
cells for formatting and display.
</p>


<h3>Usage</h3>

<pre><code class="language-R">round_fmt(x, digits, na_str = "NA")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> value to format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>(<code>numeric(1)</code>)<br> number of digits to round to, or <code>NA</code> to convert to a
character value with no rounding.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_str</code></td>
<td>
<p>(<code>string</code>)<br> the value to return if <code>x</code> is <code>NA</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function combines the rounding behavior of R's standards-compliant <code>round()</code>
function (see the Details section of that documentation) with the strict decimal display
of <code>sprintf()</code>. The exact behavior is as follows:
</p>

<ol>
<li>
<p>If <code>x</code> is <code>NA</code>, the value of <code>na_str</code> is returned.
</p>
</li>
<li>
<p>If <code>x</code> is non-<code>NA</code> but <code>digits</code> is <code>NA</code>, <code>x</code> is converted to a character and returned.
</p>
</li>
<li>
<p>If <code>x</code> and <code>digits</code> are both non-NA, <code>round()</code> is called first, and then <code>sprintf()</code>
is used to convert the rounded value to a character with the appropriate number of trailing
zeros enforced.
</p>
</li>
</ol>
<h3>Value</h3>

<p>A character value representing the value after rounding, containing any trailing zeros
required to display <em>exactly</em> <code>digits</code> elements.
</p>


<h3>Note</h3>

<p>This differs from the base R <code>round()</code> function in that <code>NA</code> digits indicate <code>x</code> should be converted
to character and returned unchanged whereas <code>round(x, digits=NA)</code> returns <code>NA</code> for all values of <code>x</code>.
</p>
<p>This behavior will differ from <code>as.character(round(x, digits = digits))</code> in the case where there are
not at least <code>digits</code> significant digits after the decimal that remain after rounding. It <em>may</em> differ from
<code>sprintf("\%.Nf", x)</code> for values ending in <code>5</code> after the decimal place on many popular operating systems
due to <code>round</code>'s stricter adherence to the IEC 60559 standard, particularly for R versions &gt; 4.0.0 (see
warning in <code>round()</code> documentation).
</p>


<h3>See Also</h3>

<p><code>format_value()</code>, <code>round()</code>, <code>sprintf()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">round_fmt(0, digits = 3)
round_fmt(.395, digits = 2)
round_fmt(NA, digits = 1)
round_fmt(NA, digits = 1, na_str = "-")
round_fmt(2.765923, digits = NA)

</code></pre>


</div>