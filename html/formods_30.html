<div class="container">

<table style="width: 100%;"><tr>
<td>FG_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluates Figure Generation Code</h2>

<h3>Description</h3>

<p>Takes the current state and rebuilds the active figure. If the
elements table has a row flagged for deletion, it will be deleted. If the
cmd input is not NULL it will attempt to append that element to the figure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FG_build(
  state,
  del_row = NULL,
  cmd = NULL,
  element = "unknown",
  desc = "unknown"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>state</code></td>
<td>
<p>FG state from <code>FG_fetch_state()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>del_row</code></td>
<td>
<p>Row number to be deleted (NULL if no rows need to be deleted)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmd</code></td>
<td>
<p>String containing the plotting command.  Set to NULL to initialize a
new figure or force a rebuild after a dataset update.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>element</code></td>
<td>
<p>Short name for the figure element being performed, eg. point</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desc</code></td>
<td>
<p>Verbose description for the action being performed</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with the following elements
</p>

<ul>
<li>
<p>isgood: Return status of the function.
</p>
</li>
<li>
<p>msgs:   Messages to be passed back to the user.
</p>
</li>
<li>
<p>pages:  List with each element containing a ggplot object (<code>p</code>) and the code to generate that object (<code>code</code>)
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
library(formods)
# Within shiny both session and input variables will exist,
# this creates examples here for testing purposes:
sess_res = FG_test_mksession(session=list(), full_session=FALSE)
session = sess_res$session
input   = sess_res$input

# This will create a populated FG state object:
state   = sess_res$state

# This sets the current active figure to Fig_1
state[["FG"]][["current_fig"]]  =  "Fig_1"

# This is a paginated figure, and we can access a specific
# figure using the following:
pg_1 = FG_extract_page(state, 1)
pg_2 = FG_extract_page(state, 2)

# This will give you access to the current figure directly:
current_fig = FG_fetch_current_fig(state)

# For example this will set the key for that figure:
current_fig$key = "Individual profiles by cohort (multiple pages)"

# Once you're done you can put it back into the state:
state = FG_set_current_fig(state, current_fig)

# If you made any changes to the actual figure, this will
# force a rebuild of the current figure:
state = FG_build( state=state, del_row = NULL, cmd = NULL)

# To create a new empty figure you can do this:
state = FG_new_fig(state)

</code></pre>


</div>