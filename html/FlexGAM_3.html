<div class="container">

<table style="width: 100%;"><tr>
<td>deviance.flexgam</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Deviance of FlexGAM model
</h2>

<h3>Description</h3>

<p>Calculating the (predictive) deviance of the model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'flexgam'
deviance(object, newdata=NULL, use_penalty=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>Object of class <code>flexgam</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>

<p>Data to estimate the (predictive) deviance.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_penalty</code></td>
<td>

<p>If the deviance should be penalized according to the smoothing penalties.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Currently not used
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Calculates the model deviance of the object for the given data. To get the same value as for <code>object$deviance</code> you need to set <code>use_penalty = TRUE</code>. This is due to the fact that the deviance element of the object is the penalized deviance used for step halving.
</p>


<h3>Value</h3>

<p>Estimated deviance
</p>


<h3>Note</h3>

<p>To get numeric stability the fitted values are truncated (<code>min_mu_k</code>) to achieve numeric stability.
</p>


<h3>Author(s)</h3>

<p>Elmar Spiegel
</p>


<h3>References</h3>

<p>Spiegel, Elmar, Thomas Kneib and Fabian Otto-Sobotka. Generalized additive models with flexible response functions. Statistics and Computing (2017). https://doi.org/10.1007/s11222-017-9799-6
</p>


<h3>See Also</h3>

<p><code>flexgam</code>, <code>predict.flexgam</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1)
n &lt;- 1000
x1 &lt;- runif(n)
x2 &lt;- runif(n)
x3 &lt;- runif(n)
eta_orig &lt;- -1 + 2*sin(6*x1) + exp(x2) + x3
pi_orig &lt;- pgamma(eta_orig, shape=2, rate=sqrt(2))
y &lt;- rbinom(n,size=1,prob=pi_orig)

Data &lt;- data.frame(y,x1,x2,x3)
formula &lt;- y ~ s(x1,k=20,bs="ps") + s(x2,k=20,bs="ps") + x3

# Fix smoothing parameters to save computational time.
control2 &lt;- list("fix_smooth" = TRUE, "quietly" = TRUE, "sm_par_vec" = 
                     c("lambda" = 100, "s(x1)" = 2000, "s(x2)" = 9000))
set.seed(2)
model_2 &lt;- flexgam(formula=formula, data=Data, type="FlexGAM2", 
                   family=binomial(link=logit), control = control2)
(deviance           &lt;- deviance(model_2, newdata=Data))
</code></pre>


</div>