<div class="container">

<table style="width: 100%;"><tr>
<td>getForestGaps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forest Canopy Gap Detection</h2>

<h3>Description</h3>

<p>This function detects forest canopy gaps on Airborne Laser Scanning(ALS)-derived Canopy Height Model (CHM).
</p>


<h3>Usage</h3>

<pre><code class="language-R">getForestGaps(chm_layer, threshold=10, size=c(1,10^4))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>chm_layer</code></td>
<td>
<p>ALS-derived Canopy Height Model (CHM) (<code>raster::RasterLayer</code>) object. An object of the class <code>raster::RasterLayer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Height threshold for gap detection. Default is 10 m.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>A vector containing the minimum and maximum gap size - area (m2).
Gaps with area &lt; size[1] or area &gt; size[2] are not considered. Default is 1 m2 and 1ha.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Forest Gaps. An object of the class RasterLayer.
</p>


<h3>Author(s)</h3>

<p>Carlos Alberto Silva.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# =======================================================================#
# Importing ALS-derived Canopy Height Model (CHM)
# =======================================================================#
# Loading raster and viridis libraries
library(raster)
library(viridis)


# ALS-derived CHM over Adolpho Ducke Forest Reserve - Brazilian tropical forest
data(ALS_CHM_DUC)

# Plotting chm
plot(ALS_CHM_DUC, col = viridis(10), main = "ALS CHM")
grid()
# =======================================================================#
# Example 1: Forest Gap detection using a fixed canopy height thresholds
# =======================================================================#

# set height thresholds (e.g. 10 meters)
threshold &lt;- 10
size &lt;- c(1, 10^4) # m2

# Detecting forest gaps
gaps_duc &lt;- getForestGaps(chm_layer = ALS_CHM_DUC, threshold = threshold, size = size)

# Ploting gaps
plot(gaps_duc, col = "red", add = TRUE, main = "Forest Canopy Gap", legend = FALSE)

# =======================================================================#
# Example 2: Gap detection using multiple canopy height thresholds
# =======================================================================#

# set the height thresholds
nthresholds &lt;- c(10, 15, 20, 25)
size &lt;- c(1, 10^4) # m2

# creating an empy raster stack to store multiple gaps as RasterLayers
gaps_stack &lt;- stack()

# Gap detection
for (i in nthresholds) {
  gaps_i &lt;- getForestGaps(chm_layer = ALS_CHM_DUC, threshold = i, size = size)
  names(gaps_i) &lt;- paste0("gaps_", i, "m")
  gaps_stack &lt;- stack(gaps_stack, gaps_i)
}

# plot gaps
oldpar &lt;- par(no.readonly = TRUE)
par(mfrow = c(2, 2))
plot(ALS_CHM_DUC, col = viridis(10), main = "Height threshold 10m")
plot(gaps_stack$gaps_10m, col = "red", add = TRUE, legend = FALSE)

plot(ALS_CHM_DUC, col = viridis(10), main = "Height threshold 15m")
plot(gaps_stack$gaps_15m, col = "red", add = TRUE, legend = FALSE)

plot(ALS_CHM_DUC, col = viridis(10), main = "Height threshold 20m")
plot(gaps_stack$gaps_20m, col = "red", add = TRUE, legend = FALSE)

plot(ALS_CHM_DUC, col = viridis(10), main = "Height threshold 25m")
plot(gaps_stack$gaps_25m, col = "red", add = TRUE, legend = FALSE)
par(oldpar)
</code></pre>


</div>