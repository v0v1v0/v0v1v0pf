<div class="container">

<table style="width: 100%;"><tr>
<td>spot_pkgs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Spot Packages</h2>

<h3>Description</h3>

<p>Extract all <code>pkg</code> called in either <code>library(pkg)</code>, <code>require(pkg)</code>
<code>requireNamespace("pkg")</code> or <code>pkg::fun()</code>. Will not identify packages loaded
in other ways not typically done in interactive R scripts (e.g. relying on a
DESCRIPTION file for a pkg or something like <code>source("lib-calls.R")</code>).
Inspiration: <a href="https://github.com/rstudio/blogdown/issues/647">blogdown#647</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spot_pkgs(
  file_path,
  show_explicit_funs = FALSE,
  copy_local = TRUE,
  as_yaml_tags = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file_path</code></td>
<td>
<p>String of path to file of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_explicit_funs</code></td>
<td>
<p>In cases where a function is called explicitly,
show both the package dependency and the function together. For example a
script containing <code>dplyr::select()</code> (as opposed to <code style="white-space: pre;">⁠library(dplyr); select()⁠</code>) would have <code>spot_pkgs(show_explicit_funs = TRUE)</code> return the
item as "dplyr::select" rather than just "dplyr")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copy_local</code></td>
<td>
<p>Logical, default is <code>TRUE</code>. If changed to <code>FALSE</code> will not
copy to a local temporary folder prior to doing analysis. Many processes
require file to already be a .R file and for the file to exist locally,
hence this should usually be set to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_yaml_tags</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If set to <code>TRUE</code> flattens
and puts into a format convenient for pasting in "tags" section of YAML
header of  a Rmd document for a blogdown post.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In cases where <code>show_explicit_funs = TRUE</code> and there are explicit calls in
the package, "pkg:fun" is returned instead.
</p>
<p>Packages are extracted solely based on text – not whether the
package actually exists or not. Hence even packages that you do not have
installed on your machine but show-up in the script will be returned in the
character vector.
</p>


<h3>Value</h3>

<p>Character vector of all packages loaded in file.
</p>


<h3>See Also</h3>

<p><code>spot_pkgs_used()</code>, <code>spot_pkgs_from_description()</code>,
<code>spot_pkgs_files()</code>, <code>renv::dependencies()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(funspotr)

file_lines &lt;- "
library(dplyr)
require(tidyr)
library(madeUpPkg)

as_tibble(mpg) %&gt;%
  group_by(class) %&gt;%
  nest() %&gt;%
  mutate(stats = purrr::map(data,
                            ~lm(cty ~ hwy, data = .x)))

made_up_fun()
"

file_output &lt;- tempfile(fileext = ".R")
writeLines(file_lines, file_output)

spot_pkgs(file_output)

# To view `purrr::map` as an explicit call
spot_pkgs(file_output, show_explicit_funs = TRUE)

# To output for blogdown post YAML header tags
cat(spot_pkgs(file_output, as_yaml_tags = TRUE))
</code></pre>


</div>