<div class="container">

<table style="width: 100%;"><tr>
<td>fmVaRDecomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Decompose VaR into individual factor contributions</h2>

<h3>Description</h3>

<p>Compute the factor contributions to Value-at-Risk (VaR) of 
assets' returns based on Euler's theorem, given the fitted factor model. 
The partial derivative of VaR w.r.t. factor beta is computed as the expected 
factor return given fund return is equal to its VaR and approximated by a
kernel estimator. Option to choose between non-parametric and Normal.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fmVaRDecomp(object, ...)

## S3 method for class 'ffm'
fmVaRDecomp(
  object,
  factor.cov,
  p = 0.05,
  type = c("np", "normal"),
  use = "pairwise.complete.obs",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>fit object of class <code>tsfm</code>, <code>sfm</code> or <code>ffm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other optional arguments passed to <code>quantile</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor.cov</code></td>
<td>
<p>optional user specified factor covariance matrix with 
named columns; defaults to the sample covariance matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>tail probability for calculation. Default is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>one of "np" (non-parametric) or "normal" for calculating VaR. 
Default is "np".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>method for computing covariances in the presence of missing 
values; one of "everything", "all.obs", "complete.obs", "na.or.complete", or 
"pairwise.complete.obs". Default is "pairwise.complete.obs".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The factor model for an asset's return at time <code>t</code> has the 
form <br><br><code>R(t) = beta'f(t) + e(t) = beta.star'f.star(t)</code> <br><br> 
where, <code>beta.star=(beta,sig.e)</code> and <code>f.star(t)=[f(t)',z(t)]'</code>. By 
Euler's theorem, the VaR of the asset's return is given by: 
<br><br><code>VaR.fm = sum(cVaR_k) = sum(beta.star_k*mVaR_k)</code> <br><br> 
where, summation is across the <code>K</code> factors and the residual, 
<code>cVaR</code> and <code>mVaR</code> are the component and marginal 
contributions to <code>VaR</code> respectively. The marginal contribution to VaR 
is defined as the expectation of <code>F.star</code>, conditional on the loss 
being equal to <code>VaR.fm</code>. This is approximated as described in 
Epperlein &amp; Smillie (2006); a triangular smoothing kernel is used here. 
</p>
<p>Refer to Eric Zivot's slides (referenced) for formulas pertaining to the 
calculation of Normal VaR (adapted from a portfolio context to factor models)
</p>


<h3>Value</h3>

<p>A list containing 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>VaR.fm</code></td>
<td>
<p>length-N vector of factor model VaRs of N-asset returns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.exceed</code></td>
<td>
<p>length-N vector of number of observations beyond VaR for 
each asset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idx.exceed</code></td>
<td>
<p>list of numeric vector of index values of exceedances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mVaR</code></td>
<td>
<p>N x (K+1) matrix of marginal contributions to VaR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cVaR</code></td>
<td>
<p>N x (K+1) matrix of component contributions to VaR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcVaR</code></td>
<td>
<p>N x (K+1) matrix of percentage component contributions to VaR.</p>
</td>
</tr>
</table>
<p>Where, <code>K</code> is the number of factors and N is the number of assets.
</p>


<h3>Author(s)</h3>

<p>Eric Zivot, Yi-An Chen and Sangeetha Srinivasan
</p>


<h3>References</h3>

<p>Hallerback (2003). Decomposing Portfolio Value-at-Risk: A General Analysis. 
The Journal of Risk, 5(2), 1-18.
</p>
<p>Meucci, A. (2007). Risk contributions from generic user-defined factors. 
RISK-LONDON-RISK MAGAZINE LIMITED-, 20(6), 84. 
</p>
<p>Yamai, Y., &amp; Yoshiba, T. (2002). Comparative analyses of expected shortfall 
and value-at-risk: their estimation error, decomposition, and optimization. 
Monetary and economic studies, 20(1), 87-121.
</p>


<h3>See Also</h3>

<p><code>fitFfm</code>
for the different factor model fitting functions.
</p>
<p><code>fmSdDecomp</code> for factor model SD decomposition.
<code>fmEsDecomp</code> for factor model ES decomposition.
</p>


</div>