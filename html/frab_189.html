<div class="container">

<table style="width: 100%;"><tr>
<td>sparsetable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generalized sparse tables: <code>sparsetable</code> objects</h2>

<h3>Description</h3>

<p>Package idiom for creating and manipulating
<code>sparsetable</code> objects</p>


<h3>Usage</h3>

<pre><code class="language-R">sparsetable(i,v=1)
rspar(n=15,l=3,d=3)
rspar2(n=15,l=6)
rsparr(n=20,d=6,l=5,s=4)
sparsetable_to_array(x)
array_to_sparsetable(x)
sparsetable_to_frab(x)
## S4 method for signature 'sparsetable'
index(x)
## S4 method for signature 'sparsetable'
values(x)
## S4 method for signature 'sparsetable'
dimnames(x)
## S4 method for signature 'sparsetable'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>In functions like <code>index()</code>, an object of class <code>sparsetable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i,v</code></td>
<td>
<p>In standard constructor function <code>sparsetable()</code>,
argument <code>i</code> is the index matrix of strings, and <code>v</code> a
numeric vector of values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n,l,d,s</code></td>
<td>
<p>In functions <code>rspar()</code>, <code>rspar2()</code>, and
<code>rsparr()</code>, <code>n</code> is the number of terms, <code>l</code> the
number of letters, <code>d</code> the dimensionality and <code>s</code> the
number of distinct marginal values to return</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Most functions here mirror their equivalent in the <a href="https://CRAN.R-project.org/package=spray"><span class="pkg">spray</span></a>
package [which the C code is largely copied from] or the
<code>frab</code> functionality.  So, for example, <code>num_eq_sparsetable()</code>
is the equivalent of <code>num_eq_spray()</code>.
</p>
<p>The print method treats arity-2 <code>sparsetable</code> objects differently
from other arities.  By default, arity-2 <code>sparsetable</code> objects are
displayed as two-dimensional tables.  Control this behaviour with option
<code>print_2dsparsetables_as_matrices</code>:
</p>
<pre>
  options("print_2dsparsetables_as_matrices" = FALSE)
</pre>
<p>The default value for this option, non-<code>FALSE</code> (including its
out-of-the-box status of “unset”), directs the print method to
coerce arity-2 <code>sparsetable</code> objects to two-dimensional tables
before printing.  If this option is <code>FALSE</code>, arity-2 sparsetables
are printed using matrix index form, just the same as any other arity.
</p>
<p>Functions <code>rspar()</code>, <code>rspar2()</code>, and <code>rsparr()</code> create
random <code>sparsetable</code> objects of increasing complexity.  The
defaults are chosen so that the returned frabs are of sensible sizes.
</p>
<p>Function <code>drop()</code> takes a sparsetable object of arity one and
coerces to a <code>frab</code> object.
</p>
<p>Function <code>dim()</code> returns a named vector, with names being the
<code>dimnames</code> of its argument.
</p>
<p>Extraction and replacement methods are a subset of <a href="https://CRAN.R-project.org/package=spray"><span class="pkg">spray</span></a>
methods, but most should work.  There is special dispensation so that
standard idiom for arrays [e.g. <code>x['a','b','a']</code> and
<code>x['a','b','a'] &lt;- 55</code>] should work as expected, although the
general expectation is that access and replacement use (character)
matrices and an index object.  However, indexing by <code>disord</code> and
<code>disindex</code> objects should also work [e.g. <code>x[x&gt;7]</code>].
</p>
<p>The <a href="https://CRAN.R-project.org/package=spray"><span class="pkg">spray</span></a> source code and the <code>sparsetable</code> functionality
have about 90% overlap; there were enough small differences between the
codes to make it worth maintaining two sets of source code, IMO.
</p>
<p>There is a discussion of package idiom in the vignette,
<code>vignette("frab")</code>.
</p>


<h3>Note</h3>

<p>The pronunciation of “sparsetable” has the emphasis on the
first syllable, so it rhymes with [British river-port town]
“Barnstaple”.
</p>


<h3>Author(s)</h3>

<p>Robin K. S. Hankin</p>


<h3>See Also</h3>

<p><code>frab-class</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
sparsetable(matrix(sample(letters[1:4],36,replace=TRUE),ncol=2),1:18)
sparsetable(matrix(sample(letters[1:4],39,replace=TRUE),ncol=3),1:13)

(x &lt;- rspar2(9))
(y &lt;- rspar2(9))
x + y

x["KT","FF"] &lt;- 100
x

rsparr()

a &lt;- rspar(d=4)
asum(a,"Feb")

</code></pre>


</div>