<div class="container">

<table style="width: 100%;"><tr>
<td>riskDecomp.ffm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Decompose Risk into individual factor contributions</h2>

<h3>Description</h3>

<p>Compute the factor contributions to Sd, VaR and ES of returns based on Euler's theorem, given 
the fitted factor model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">riskDecomp.ffm(
  object,
  risk,
  weights = NULL,
  portDecomp = TRUE,
  factor.cov,
  p = 0.05,
  type = c("np", "normal"),
  invert = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>fit object of class <code>tsfm</code>, or <code>ffm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>risk</code></td>
<td>
<p>one of "Sd" (Standard Deviation) or "VaR" (Value at Risk) or "ES" (Expected Shortfall)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a vector of weights of the assets in the portfolio, names of 
the vector should match with asset names. Default is NULL, in which case an 
equal weights will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>portDecomp</code></td>
<td>
<p>logical. If <code>True</code> the decomposition of risk is done for the portfolio based on the weights.
Else, the decomposition of risk is done for each asset. <code>Default</code> is <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor.cov</code></td>
<td>
<p>optional user specified factor covariance matrix with 
named columns; defaults to the sample covariance matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>tail probability for calculation. Default is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>one of "np" (non-parametric) or "normal" for calculating Es. 
Default is "np".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>invert</code></td>
<td>
<p>a logical variable to choose if change ES to positive number, default
is False</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other optional arguments passed to <code>quantile</code> and 
optional arguments passed to <code>cov</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>portES</code></td>
<td>
<p>factor model ES of portfolio returns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mES</code></td>
<td>
<p>length-(K + 1) vector of marginal contributions to Es.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cES</code></td>
<td>
<p>length-(K + 1) vector of component contributions to Es.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcES</code></td>
<td>
<p>length-(K + 1) vector of percentage component contributions to Es.</p>
</td>
</tr>
</table>
<p>Where, K is the number of factors.
</p>


<h3>Author(s)</h3>

<p>Eric Zivot, Yi-An Chen, Sangeetha Srinivasan, Lingjie Yi and Avinash Acharya
</p>


<h3>See Also</h3>

<p><code>fitFfm</code>
for the different factor model fitting functions.
</p>
<p><code>portSdDecomp</code> for factor model Sd decomposition.
<code>portVaRDecomp</code> for factor model VaR decomposition.
</p>


</div>