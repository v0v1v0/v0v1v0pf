<div class="container">

<table style="width: 100%;"><tr>
<td>fhir_get_resources_by_ids</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Resources by their IDs</h2>

<h3>Description</h3>

<p>Downloads FHIR resources represented by a vector of resource IDs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fhir_get_resources_by_ids(
  base_url,
  resource,
  ids,
  id_param = "_id",
  parameters = NULL,
  username = NULL,
  password = NULL,
  token = NULL,
  add_headers = NULL,
  verbose = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>base_url</code></td>
<td>
<p>A character vector of length one specifying the base URL of the FHIR server, e.g. <code>"http://hapi.fhir.org/baseR4"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resource</code></td>
<td>
<p>A character vector of length one or fhir_resource_type object with the resource type to be searched, e.g. <code>"Patient"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ids</code></td>
<td>
<p>A character vector containing the IDs of the resources that should be downloaded. In the default setting these should be resource (aka logical) IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_param</code></td>
<td>
<p>A character vector of length one containing the FHIR Search parameter belonging to the ids in <code>ids</code>. Defaults to <code>"_id"</code> meaning <code>ids</code> is interpreted as
containing resource (aka logical) ids. Could be changed to <code>"identifier"</code> if <code>ids</code> contains a vector of identifier values instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>FHIR Search parameters to further restrict the set of resources that is returned, e.g. <code>gender=male</code> to only download the resources from
the <code>ids</code> list that correspond to males. Can be either a length 1 character containing properly formatted FHIR search parameters, e.g.
<code>"gender=male"</code> or a named list or named character vector e.g. <code>list(gender="male")</code>or <code>c(gender="male")</code>. Defaults to <code>NULL</code> meaning no restriction on
the IDs provided in <code>ids</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>username</code></td>
<td>
<p>A character vector of length one containing the username for basic authentication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>password</code></td>
<td>
<p>A character vector of length one containing the password for basic authentication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>A character vector of length one or object of class httr::Token, for bearer token authentication (e.g. OAuth2). See <code>fhir_authenticate()</code>
for how to create this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_headers</code></td>
<td>
<p>A named character vector of custom headers to add to the HTTP request, e.g. <code>c(myHeader = "somevalue")</code> or
<code>c(firstHeader = "value1", secondHeader = "value2")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>An integer vector of length 1 containing the level of verbosity. Defaults to 0.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function takes a character vector <code>ids</code> containing logical Ids of resources of a given type (specified in <code>resource</code>) on a
FHIR server (specified in <code>base_url</code>) and downloads the corresponding resources from the server. The function will attempt to download the resources using a
FHIR search request via POST where the IDs are part of the body. See <code>fhir_search()</code> for details. If this fails
(e.g. because the server doesn't allow POST operations), the function falls back on a GET request. If the set of ids is too long to fit
into one GET request (i.e. if the request gets longer than 2083 characters), it will be spread across several requests.
</p>
<p>For more information on authentication options, please see the help page of <code>fhir_search()</code>
</p>


<h3>Value</h3>

<p>A fhir_bundle_list containing the downloaded resources.
</p>


<h3>See Also</h3>

<p><code>fhir_search()</code>, <code>fhir_get_resource_ids()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

#the try({}, silent = TRUE) statement is only there to catch errors when the server is down
#you can skip it when the server is reachable

try({

#find IDs of Patient resources representing Homer Simpson
ids &lt;- fhir_get_resource_ids(
  base_url   = 'https://hapi.fhir.org/baseR4',
  resource   = "Patient",
  parameters = "name=Homer&amp;name=Simpson")

#Download all corresponding resources
bundles &lt;- fhir_get_resources_by_ids(
  base_url = 'https://hapi.fhir.org/baseR4',
  resource = "Patient",
  ids      = ids)

#have a look at the resources
fhir_crack(
  bundles,
  fhir_table_description(
    resource = "Patient",
    cols     = list(
      ID      = "id",
      given   = "name/given",
      family  = "name/family")))

}, silent = TRUE)

</code></pre>


</div>