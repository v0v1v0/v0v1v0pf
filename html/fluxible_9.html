<div class="container">

<table style="width: 100%;"><tr>
<td>flux_calc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>calculates ecosystem gas fluxes</h2>

<h3>Description</h3>

<p>calculates a flux based on the rate of change
of gas concentration over time
</p>


<h3>Usage</h3>

<pre><code class="language-R">flux_calc(
  slopes_df,
  slope_col,
  datetime_col = "f_datetime",
  cut_col = c(),
  keep_arg = c(),
  chamber_volume = 24.5,
  tube_volume = 0.075,
  atm_pressure = 1,
  plot_area = 0.0625,
  cols_keep = c(),
  cols_ave = c(),
  fluxid_col = "f_fluxID",
  temp_air_col = "temp_air",
  temp_air_unit = "celsius",
  fit_type = c()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>slopes_df</code></td>
<td>
<p>dataframe of flux slopes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slope_col</code></td>
<td>
<p>column containing the slope to calculate the flux
(in ppm*s^(-1))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datetime_col</code></td>
<td>
<p>column containing the datetime of each gas concentration
measurements in slopes_df. The first one after cutting will be kept as
datetime of each flux in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut_col</code></td>
<td>
<p>column containing cutting information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_arg</code></td>
<td>
<p>name in cut_col of data to keep</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chamber_volume</code></td>
<td>
<p>volume of the flux chamber in L,
default for Three-D project chamber (25x24.5x40cm),
can also be a column in case it is a variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tube_volume</code></td>
<td>
<p>volume of the tubing in L, default for summer 2020 setup,
can also be a column in case it is a variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>atm_pressure</code></td>
<td>
<p>atmospheric pressure, assumed 1 atm,
can be a constant (numerical) or a variable (column name)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_area</code></td>
<td>
<p>area of the plot in m^2, default for Three-D</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols_keep</code></td>
<td>
<p>columns to keep from the input to the output.
Those columns need to have unique values for each flux,
as distinct() is applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols_ave</code></td>
<td>
<p>columns with values that should be averaged
for each flux in the output. Note that NA are removed in mean calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fluxid_col</code></td>
<td>
<p>column containing the fluxID</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temp_air_col</code></td>
<td>
<p>column containing the air temperature used
to calculate fluxes. Will be averaged with NA removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temp_air_unit</code></td>
<td>
<p>units in which air temperature was measured.
Has to be either Celsius, Fahrenheit or Kelvin.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_type</code></td>
<td>
<p>(optional) model used in flux_fitting, exponential,
quadratic or linear.
Will be automatically filled if slopes_df was produced using flux_quality().</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a dataframe containing fluxID, fluxes (in mmol*m^(-2)*h^(-1)),
temperature average for each flux,
slope used for each flux calculation,
the model used in <code>flux_fitting</code>,
and any columns specified in cols_keep and cols_ave.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(slopes0)
flux_calc(slopes0, slope_col = "f_slope")
</code></pre>


</div>