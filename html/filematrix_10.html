<div class="container">

<table style="width: 100%;"><tr>
<td>filematrix-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Manipulating file matrices (class <code>"filematrix"</code>)</h2>

<h3>Description</h3>

<p><code>filematrix</code> is a class for working with very large matrices
stored in files, not held in computer memory.
It is intended as a simple, efficient solution to handling big numeric data
(i.e., datasets larger than memory capacity) in R. <br>
A new filematrix can be created with <code>fm.create</code>.
It can be created from an existing R matrix
with <code>fm.create.from.matrix</code>.
A text file with a matrix can be scanned and converted into a filematrix
with <code>fm.create.from.text.file</code>.
An existing filematrix can be opened for read/write access
with <code>fm.open</code> or loaded fully in memory
with <code>fm.load</code>.
</p>
<p>A filematrix can be handled as an ordinary matrix in R.
</p>
<p>It can be read from and written to via usual indexing
with possible omission of indices.<br>
For example: <code>fm[1:3,2:4]</code> and <code>fm[,2:4]</code>.
</p>
<p>The values can also be accessed as a vector
with single indexing.<br>
For example: <code>fm[3:7]</code> and <code>fm[4:7] = 1:4</code>.
</p>
<p>A whole filematrix can be read memory as an ordinary R matrix 
with <code>as.matrix</code> function or empty indexing <code>fm[]</code>.
</p>
<p>The dimensions of filematrix can be obtained via <code>dim</code>, 
<code>nrow</code> and <code>ncol</code> functions and 
modified with <code>dim</code> function.<br>
For example: <code>dim(fm)</code> and <code>dim(fm) = c(10,100)</code>.
</p>
<p>The number of elements in filematrix is returned by <code>length</code> function.
</p>
<p>A filematrix can have row and column names.
They can be accessed using the standard functions
<code>rownames</code>, <code>colnames</code>, and <code>dimnames</code>.
</p>
<p>A filematrix can be closed after use with <code>close</code> command.
Note, however, that there is no risk of losing modifications 
to a filematrix if an object is not closed, 
as all changes are written to disk without delay.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'filematrix'
x[i,j]
## S3 replacement method for class 'filematrix'
x[i,j] &lt;- value

## S4 method for signature 'filematrix'
as.matrix(x)

## S4 method for signature 'filematrix'
dim(x)
## S4 replacement method for signature 'filematrix'
dim(x) &lt;- value

## S4 method for signature 'filematrix'
length(x)

## S4 method for signature 'filematrix'
rownames(x)
## S4 replacement method for signature 'filematrix'
rownames(x) &lt;- value

## S4 method for signature 'filematrix'
colnames(x)
## S4 replacement method for signature 'filematrix'
colnames(x) &lt;- value

## S4 method for signature 'filematrix'
dimnames(x)
## S4 replacement method for signature 'filematrix'
dimnames(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A filematrix object (<code>filematrix</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i,j</code></td>
<td>

<p>Row/column indices specifying elements to extract or replace.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>

<p>A new value to replace the indexed element(s).
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>length</code> function returns the number of elements in the filematrix.
</p>
<p>Functions <code>colnames</code>, <code>rownames</code>, and <code>dimnames</code> return 
the same values as their counterparts for the regular R matrices.
</p>


<h3>Methods</h3>


<dl>
<dt><code>isOpen</code></dt>
<dd>
<p>Returns <code>TRUE</code> is the filematrix is open.
</p>
</dd>
<dt>
<code>readAll()</code>:</dt>
<dd>
<p> Return the whole matrix. <br>
Same as <code>fm[]</code> or <code>as.matrix(fm)</code>
</p>
</dd>
<dt>
<code>writeAll(value)</code>:</dt>
<dd>
<p>Fill in the whole matrix. <br>    
Same as <code>fm[] = value</code>
</p>
</dd>
<dt>
<code>readSubCol(i, j, num)</code>:</dt>
<dd>
<p>Read <code>num</code> values in column <code>j</code> starting with row <code>i</code>.<br>
Same as <code>fm[i:(i+num-1), j]</code> 
</p>
</dd>
<dt>
<code>writeSubCol(i, j, value)</code>:</dt>
<dd>
<p>Write values in the column <code>j</code> starting with row <code>i</code>. <br>    
Same as <code>fm[i:(i+length(value)-1), j] = value</code>
</p>
</dd>
<dt>
<code>readCols(start, num)</code>:</dt>
<dd>
<p>Read <code>num</code> columns starting with column <code>start</code>. <br>
Same as <code>fm[, start:(start+num-1)] </code>
</p>
</dd>
<dt>
<code>writeCols(start, value)</code>:</dt>
<dd>
<p>Write columns starting with column <code>start</code>. <br>
Same as <code>fm[, start:(start+ncol(value)-1)] = value </code>
</p>
</dd>
<dt>
<code>readSeq(start, len)</code>:</dt>
<dd>
<p>Read <code>len</code> values from the matrix starting with 
<code>start</code>-th value. <br>
Same as <code>fm[start:(start+len-1)]</code> </p>
</dd>
<dt>
<code>writeSeq(start, value)</code>:</dt>
<dd>
<p>Write values in the matrix starting with <code>start</code>-th value. <br>
Same as <code>fm[start:(start+length(value)-1)] = value</code> 
</p>
</dd>
<dt><code>appendColumns(mat)</code></dt>
<dd>
<p>Increases filematrix by adding columns to the right side of the matrix.
Matrix <code>mat</code> must have the same number of rows. <br> 
Same as <code>fm = cbind(fm, mat)</code> for ordinary matrices.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Andrey A Shabalin <a href="mailto:andrey.shabalin@gmail.com">andrey.shabalin@gmail.com</a>
</p>


<h3>See Also</h3>

<p>For function creating and opening file matrices see
<code>fm.create</code>.
</p>
<p>Run <code>browseVignettes("filematrix")</code> for the list of vignettes.
</p>


</div>