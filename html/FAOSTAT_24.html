<div class="container">

<table style="width: 100%;"><tr>
<td>download_faostat_bulk</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download bulk data from the faostat website
https://www.fao.org/faostat/en/#data</h2>

<h3>Description</h3>


<ul>
<li> <p><code>get_faostat_bulk()</code> loads the given data set code and returns a data frame.
</p>
</li>
<li> <p><code>download_faostat_bulk()</code> loads data from the given url and saves it to a compressed zip file.
</p>
</li>
<li> <p><code>read_faostat_bulk()</code> Reads the compressed .csv .zip file into a data frame.
More precisely it unzips the archive. 
Reads the main csv file within the archive.
The main file has the same name as the name of the archive. 
Note: the zip archive might also contain metadata files about Flags and Symbols.
</p>
</li>
</ul>
<p>In general you should load the data with the function <code>get_faostat_bulk()</code> and a dataset code.
The other functions are lower level functions that you can use as an alternative. 
You can also explore the datasets and find their download URLs
on the FAOSTAT website. Explore the website to find out the data you are interested in
<a href="https://www.fao.org/faostat/en/#data">https://www.fao.org/faostat/en/#data</a>
Copy a "bulk download" url, 
for example they are located in the right menu on the "crops" page
<a href="https://www.fao.org/faostat/en/#data/QC">https://www.fao.org/faostat/en/#data/QC</a>
Note that faostat bulk files with names ending with "normalized" are in long format 
with a year column instead of one column for each year.
The long format is preferable for data analysis and this is the format 
returned by the  <code>get_faostat_bulk()</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download_faostat_bulk(url_bulk, data_folder = ".")

read_faostat_bulk(zip_file_name, encoding = "latin1", rename_element = TRUE)

get_faostat_bulk(code, data_folder = tempdir(), subset = "All Data Normalized")

read_bulk_metadata(dataset_code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>url_bulk</code></td>
<td>
<p>character url of the faostat bulk zip file to download</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_folder</code></td>
<td>
<p>character path of the local folder where to download the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zip_file_name</code></td>
<td>
<p>character name of the zip file to read</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>parameter passed to 'read.csv'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rename_element</code></td>
<td>
<p>boolean Rename the element column to snake case. To
facilitate the use of elements as column names later when the data frame
gets reshaped to a wider format. Replace non alphanumeric characters by
underscores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>character. Dataset code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>character. Use <code>read_bulk_metadata</code>. Request all data,
normalised data or region</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset_code</code></td>
<td>
<p>character. Dataset code</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data frame of FAOSTAT data
</p>
<p>data frame of FAOSTAT data
</p>
<p>data frame of FAOSTAT data
</p>


<h3>Author(s)</h3>

<p>Paul Rougieux
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Create a folder to store the data
data_folder &lt;- "data_raw"
dir.create(data_folder)

# Load crop production data
crop_production &lt;- get_faostat_bulk(code = "QCL", data_folder = data_folder)

# Cache the file i.e. save the data frame in the serialized RDS format for faster load time later.
saveRDS(crop_production, "data_raw/crop_production_e_all_data.rds")
# Now you can load your local version of the data from the RDS file
crop_production &lt;- readRDS("data_raw/crop_production_e_all_data.rds")


# Use the lower level functions to download zip files, 
# then read the zip files in separate function calls.
# In this example, to avoid a warning about "examples lines wider than 100 characters"
# the url is split in two parts: a common part 'url_bulk_site' and a .zip file name part.
# In practice you can enter the full url directly as the `url_bulk`  argument.
# Notice also that I have choosen to load global data in long format (normalized).
url_bulk_site &lt;- "https://fenixservices.fao.org/faostat/static/bulkdownloads"
url_crops &lt;- file.path(url_bulk_site, "crop_production_E_All_Data_(Normalized).zip")
url_forestry &lt;- file.path(url_bulk_site, "Forestry_E_All_Data_(Normalized).zip")
# Download the files
download_faostat_bulk(url_bulk = url_forestry, data_folder = data_folder)
download_faostat_bulk(url_bulk = url_crops, data_folder = data_folder)

# Read the files and assign them to data frames 
crop_production &lt;- read_faostat_bulk("data_raw/crop_production_E_All_Data_(Normalized).zip")
forestry &lt;- read_faostat_bulk("data_raw/Forestry_E_All_Data_(Normalized).zip")
 
# Save the data frame in the serialized RDS format for fast reuse later.
saveRDS(crop_production, "data_raw/crop_production_e_all_data.rds")
saveRDS(forestry,"data_raw/forestry_e_all_data.rds")

## End(Not run)
</code></pre>


</div>