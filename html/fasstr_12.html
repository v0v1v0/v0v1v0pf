<div class="container">

<table style="width: 100%;"><tr>
<td>calc_annual_cumulative_stats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate annual (and seasonal) total cumulative flows</h2>

<h3>Description</h3>

<p>Calculates annual and seasonal total flows, as volumetric discharge or water yields, from a daily streamflow data set.
For water year and seasonal data, the year is identified by the year in which the year or season ends. Two-seasons and 
four-seasons per year are calculated, with each 6 and 3-month seasons starting with the first month of the year (Jan for 
calendar year, specified for water year). Each season is designated by the calendar or water year in which it occurs.
Calculates statistics from all values from complete years, unless specified. Returns a tibble with statistics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc_annual_cumulative_stats(
  data,
  dates = Date,
  values = Value,
  groups = STATION_NUMBER,
  station_number,
  use_yield = FALSE,
  basin_area,
  water_year_start = 1,
  start_year,
  end_year,
  exclude_years,
  months = 1:12,
  include_seasons = FALSE,
  transpose = FALSE,
  complete_years = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame of daily data that contains columns of dates, flow values, and (optional) groups (e.g. station numbers).
Leave blank or set to <code>NULL</code> if using <code>station_number</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>Name of column in <code>data</code> that contains dates formatted YYYY-MM-DD. Only required if dates column name is not 
'Date' (default). Leave blank or set to <code>NULL</code> if using <code>station_number</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>Name of column in <code>data</code> that contains numeric flow values, in units of cubic metres per second.
Only required if values column name is not 'Value' (default). Leave blank if using <code>station_number</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>Name of column in <code>data</code> that contains unique identifiers for different data sets, if applicable. Only required 
if groups column name is not 'STATION_NUMBER'. Function will automatically group by a column named 'STATION_NUMBER' if 
present. Remove the 'STATION_NUMBER' column beforehand to remove this grouping. Leave blank if using <code>station_number</code> 
argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>station_number</code></td>
<td>
<p>Character string vector of seven digit Water Survey of Canada station numbers (e.g. <code>"08NM116"</code>) of
which to extract daily streamflow data from a HYDAT database. Requires <code>tidyhydat</code> package and a HYDAT database.
Leave blank if using <code>data</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_yield</code></td>
<td>
<p>Logical value indicating whether to calculate area-based water yield, in mm, instead of volumetric discharge. 
Default <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basin_area</code></td>
<td>
<p>Upstream drainage basin area, in square kilometres, to apply to observations. Three options:
</p>
<p>(1) Leave blank if <code>groups</code> is STATION_NUMBER with HYDAT station numbers to extract basin areas from HYDAT.
</p>
<p>(2) A single numeric value to apply to all observations.
</p>
<p>(3) List each basin area for each group/station in groups (can override HYDAT value if listed) as such <code>c("08NM116" = 795, 
"08NM242" = 10)</code>. If group is not listed the HYDAT area will be applied if it exists, otherwise it will be <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>water_year_start</code></td>
<td>
<p>Numeric value indicating the month (<code>1</code> through <code>12</code>) of the start of water year for
analysis. Default <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_year</code></td>
<td>
<p>Numeric value of the first year to consider for analysis. Leave blank or set well before start date (i.e.
<code>1800</code>) to use from the first year of the source data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_year</code></td>
<td>
<p>Numeric value of the last year to consider for analysis. Leave blank or set well after end date (i.e.
<code>2100</code>) to use up to the last year of the source data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude_years</code></td>
<td>
<p>Numeric vector of years to exclude from analysis. Leave blank or set to <code>NULL</code> to include all years.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>months</code></td>
<td>
<p>Numeric vector of months to include in analysis (e.g. <code>6:8</code> for Jun-Aug). Default summarizes all 
months (<code>1:12</code>). If not all months, seasonal total yield and volumetric flows will not be included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_seasons</code></td>
<td>
<p>Logical value indication whether to include seasonal yields or volumetric discharges. Default <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transpose</code></td>
<td>
<p>Logical value indicating whether to transpose rows and columns of results. Default <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete_years</code></td>
<td>
<p>Logical values indicating whether to include only years with complete data in analysis. Default <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble data frame with the following columns, ending with '_Volume_m3' or '_Yield_mm' based on selection:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Year</code></td>
<td>
<p>calendar or water year selected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Total_*</code></td>
<td>
<p>annual (or selected months) total flow, in m3 or mm</p>
</td>
</tr>
</table>
<p>Default seasonal columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>first of two season total flows, in m3 or mm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>second of two season total flows, in m3 or mm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>first of four season total flows, in m3 or mm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>second of four season total flows, in m3 or mm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>third of four season total flows, in m3 or mm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MMM-MMM_*</code></td>
<td>
<p>fourth of four season total flows, in m3 or mm</p>
</td>
</tr>
</table>
<p>Transposing data creates a column of 'Statistics' and subsequent columns for each year selected.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Run if HYDAT database has been downloaded (using tidyhydat::download_hydat())
if (file.exists(tidyhydat::hy_downloaded_db())) {

# Calculate annual total volumetric flow statistics
calc_annual_cumulative_stats(station_number = "08NM116") 

# Calculate annual total yield statistics with default HYDAT basin area
calc_annual_cumulative_stats(station_number = "08NM116",
                             use_yield = TRUE) 

# Calculate annual total yield statistics with a custom basin area
calc_annual_cumulative_stats(station_number = "08NM116",
                             use_yield = TRUE,
                             basin_area = 800,
                             start_year = 1980) 
                             
}
</code></pre>


</div>