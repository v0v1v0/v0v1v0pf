<div class="container">

<table style="width: 100%;"><tr>
<td>portfolio-riskPfolio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Risk and Related Measures for Portfolios</h2>

<h3>Description</h3>

<p>Computes Value-at-Risk and related measures 
for a portfolio of assets. 
</p>
<p>The functions are:
</p>

<table>
<tr>
<td style="text-align: left;">
    <code>pfolioVaR</code> </td>
<td style="text-align: left;"> computes Value-at-Risk for a portfolio of assets, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioCVaRplus</code> </td>
<td style="text-align: left;"> computes Value-at-Risk+ for a portfolio of assets, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioCVaR</code> </td>
<td style="text-align: left;"> computes Conditional Value-at-Risk for a PF of assets, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>lambdaCVaR</code> </td>
<td style="text-align: left;"> computes CVaR's atomic split value lambda, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioCVaRoptim</code> </td>
<td style="text-align: left;"> computes Conditional VaR from mean-CVaR optimization, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioMaxLoss</code> </td>
<td style="text-align: left;"> computes Maximum Loss for a portfolio of assets, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioReturn</code> </td>
<td style="text-align: left;"> computes return values of a portfolio, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioTargetReturn</code> </td>
<td style="text-align: left;"> computes the target return of a portfolio, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioTargetRisk</code> </td>
<td style="text-align: left;"> computes the target risk of a portfolio, </td>
</tr>
<tr>
<td style="text-align: left;">
    <code>pfolioHist</code> </td>
<td style="text-align: left;"> plots a histogram of the returns of a portfolio. </td>
</tr>
</table>
<h3>Usage</h3>

<pre><code class="language-R">pfolioVaR(x, weights = NULL, alpha = 0.05) 
pfolioCVaRplus(x, weights = NULL, alpha = 0.05) 
pfolioCVaR(x, weights = NULL, alpha = 0.05) 
lambdaCVaR(n, alpha = 0.05) 
pfolioCVaRoptim(x, weights = NULL, alpha = 0.05) 

pfolioMaxLoss(x, weights = NULL)
pfolioReturn(x, weights = NULL, geometric = FALSE) 
pfolioTargetReturn(x, weights = NULL)
pfolioTargetRisk(x, weights = NULL)
pfolioHist(x, weights = NULL, alpha = 0.05, range = NULL, details = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a 'timeSeries' object, data frame or any other rectangular
object which can be expressed as a matrix. The first 
dimension is the number of observations, we call it <code>n</code>,
and the second is the number of assets in the data set,
we call it <code>dim</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>

<p>usually a numeric vector which has the length of the number of 
assets. The weights measures the normalized weights of the 
individual assets. By default <code>NULL</code>, then an equally 
weighted set of assets is assumed. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geometric</code></td>
<td>

<p>a logical flag, should geometric returns be used, by default FALSE
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>a numeric value, the confidence interval, by default 0.05.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>details</code></td>
<td>

<p>a logical value, should details be printed?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>the number of observation from which the CVaR's atomic split 
value <code>lambda=1-floor(alpha*n)/(alpha*n)</code> will be 
evaluated.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>

<p>a numeric vector of two elements limiting the plot range of
the histogram. This is quite useful if one likes to compare
several plots on the same scale. If <code>range=NULL</code>, the
default value, then the range will be selected automatically.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>optional arguments to be passet to the function <code>hist</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The percentile measures of loss (or reward) are defined in the 
following way: Let <code class="reqn">f(x ,y)</code> be a loss functions depending 
upon a decision vector <code class="reqn">x = (x_1, ..., x_n )</code> and a random 
vector <code class="reqn">y = (y_1, ..., y_m)</code>, then 
</p>
<p><em>pfolioVaR</em> is the alpha-percentile of the loss distribution, a 
smallest value such that the probability that losses exceed or 
are equal to this value is greater or equal to alpha.
</p>
<p><em>pfolioCVaRplus</em> or "CVaR+" or the "upper CVaR" are the expected  
losses strictly exceeding VaR. This is also also called "Mean 
Excess Loss" and "Expected Shortfall".
</p>
<p><em>pfolioCVaR</em> is a weighted average of VaR and CVaRplus defined as
<code class="reqn">CVaR = lambda*VaR + (1-lambda)</code> CVaRplus, for 
<code class="reqn">0 &lt;= lambda &lt;= 1</code>.
</p>
<p>Note, CVaR is convex, but VaR and CVaRplus may be non-convex. The 
following inequalities are valid: <code class="reqn">VaR &lt;= CVaR &lt;= CVaRplus</code>.
</p>


<h3>Value</h3>

<p><code>pfolioVaR</code>
<br>
returns the value of risk, VaR,  for a portfolio of assets, a
numeric value.
<br></p>
<p><code>pfolioCVaRplus</code>
<br>
returns the conditional value of risk plus, CVaRplus, for a 
portfolio of assets, a numeric value.
<br></p>
<p><code>pfolioCVaR</code>
<br>
returns the conditional value of risk, CVaR, for a portfolio
of assets, a numeric value.
<br></p>
<p><code>lambdaCVaR</code>
<br>
returns CVaR's atomic split value <code>lambda</code>, a numeric value.
<br></p>
<p><code>pfolioMaxLoss</code>
<br>
returns the maximum loss value of the portfolio, a numeric value.
<br></p>
<p><code>pfolioReturn</code>
<br>
returns the total portfolio return computed from the set of
assets <code>x</code>, a numeric vector.
<br></p>
<p><code>pfolioTargetReturn</code>
<br>
returns the total return or target return computed from the set of
assets <code>x</code> and weights <code>weights</code>, a numeric value.
<br></p>
<p><code>pfolioTargetRisk</code>
<br>
returns the total risk (Sigma) or target risk computed from the set 
of assets <code>x</code> and <code>weights</code> via the formual
<code>sqrt(weights %*% cov(x) %*% weights)</code>, a numeric value.
<br></p>
<p><code>pfolioHist</code>
<br>
plots a histogram of portfolio returns and adds the values
for the VaR (blue), for the CVaRplus (red), and for the 
maximum loss (green) to the histogram plot. The function 
invisibly returns a list with the following elements: VaR,
VaRplus, maxLoss, mean, and sd. If <code>details</code> is <code>TRUE</code>, 
then the result is printed.
</p>


<h3>References</h3>

<p>Uryasev S. (2000);
<em>Conditional Value-at-Risk (CVaR): Algorithms and Applications</em>,
Risk Management and Financial Engineering Lab, University of Florida
</p>
<p>Wuertz, D., Chalabi, Y., Chen W., Ellis A. (2009);
<em>Portfolio Optimization with R/Rmetrics</em>, 
Rmetrics eBook, Rmetrics Association and Finance Online, Zurich.
</p>


</div>