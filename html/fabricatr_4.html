<div class="container">

<table style="width: 100%;"><tr>
<td>correlate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform generation of a correlated random variable.</h2>

<h3>Description</h3>

<p>This function is EXPERIMENTAL, and we cannot guarantee its properties for
all data structures. Be sure to diagnose your design and assess the
distribution of your variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">correlate(draw_handler, ..., given, rho)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>draw_handler</code></td>
<td>
<p>The unquoted name of a function to generate data.
Currently, <code>draw_binary</code>, <code>draw_binomial</code>, and <code>draw_count</code> are supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The arguments to draw_handler (e.g. <code>prob</code>, <code>mean</code>, etc.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>given</code></td>
<td>
<p>A vector that can be ordered; the reference distribution X that
Y will be correlated with.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>A rank correlation coefficient between -1 and 1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In order to generate a random variable of a specific distribution based on
another variable of any distribution and a correlation coefficient <code>rho</code>,
we map the first, known variable into the standard normal space via affine
transformation, generate the conditional distribution of the resulting
variable as a standard normal, and then map that standard normal back to
the target distribution. The result should ensure, in expectation, a rank-order
correlation of <code>rho</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Generate a variable of interest
exam_score &lt;- pmin(100, rnorm(n = 100, mean = 80, sd = 10))

# Generate a correlated variable using fabricatr variable generation
scholarship_offers &lt;- correlate(given = exam_score, rho = 0.7,
                                draw_count, mean = 3)

# Generate a correlated variable using base R distributions
final_grade &lt;- pmax(100, correlate(given = exam_score, rho = 0.7,
                                   rnorm, mean = 80, sd = 10))

</code></pre>


</div>