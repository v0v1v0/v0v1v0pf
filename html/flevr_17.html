<div class="container">

<table style="width: 100%;"><tr>
<td>pool_selected_sets</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pool selected sets from multiply-imputed data</h2>

<h3>Description</h3>

<p>Pool the selected sets from multiply-imputed or bootstrap + imputed data. Uses
the "stability" of the variables over the multiple selected sets to select
variables that are stable across the sets, where stability is determined by
presence in a certain fraction of the selected sets (and the fraction must be
above the specified threshold to be "stable").
</p>


<h3>Usage</h3>

<pre><code class="language-R">pool_selected_sets(sets = list(), threshold = 0.8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sets</code></td>
<td>
<p>a list of sets of selected variables from the multiply-imputed datasets.
Expects each set of selected variables to be a binary vector, where 1 denotes
that the variable was selected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a numeric threshold between 0 and 1 detemining the "stability"
of a feature; only features with stability above the threshold after pooling
will be in the final selected set of variables.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a vector denoting the final set of selected variables (1 denotes
selected, 0 denotes not selected)
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("biomarkers")
x &lt;- biomarkers[, !(names(biomarkers) %in% c("mucinous", "high_malignancy"))]
feature_nms &lt;- names(x)
library("dplyr")
library("SuperLearner")
# do multiple imputation (with a small number for illustration only)
library("mice")
n_imp &lt;- 2
set.seed(20231129)
mi_biomarkers &lt;- mice::mice(data = biomarkers, m = n_imp, printFlag = FALSE)
imputed_biomarkers &lt;- mice::complete(mi_biomarkers, action = "long") %&gt;%
  rename(imp = .imp, id = .id)
# set up a list to collect selected sets
all_selected_vars &lt;- vector("list", length = 5)
for (i in 1:n_imp) {
  # fit a Super Learner using simple library for illustration only
  these_data &lt;- imputed_biomarkers %&gt;%
    filter(imp == i)
  this_y &lt;- these_data$mucinous
  this_x &lt;- these_data %&gt;%
    select(starts_with("lab"), starts_with("cea"))
  this_x_df &lt;- as.data.frame(this_x)
  fit &lt;- SuperLearner::SuperLearner(Y = this_y, X = this_x_df,
                                  SL.library = "SL.glm",
                                  cvControl = list(V = 2),
                                  family = "binomial")
  # do extrinsic selection
  all_selected_vars[[i]] &lt;- extrinsic_selection(
    fit = fit, feature_names = feature_nms, threshold = 5, import_type = "all"
  )$selected
}
# perform extrinsic variable selection
selected_vars &lt;- pool_selected_sets(sets = all_selected_vars, threshold = 1 / n_imp)
feature_nms[selected_vars]

</code></pre>


</div>