<div class="container">

<table style="width: 100%;"><tr>
<td>tsCV</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time series cross-validation</h2>

<h3>Description</h3>

<p><code>tsCV</code> computes the forecast errors obtained by applying
<code>forecastfunction</code> to subsets of the time series <code>y</code> using a
rolling forecast origin.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tsCV(y, forecastfunction, h = 1, window = NULL, xreg = NULL, initial = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Univariate time series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forecastfunction</code></td>
<td>
<p>Function to return an object of class
<code>forecast</code>. Its first argument must be a univariate time series, and it
must have an argument <code>h</code> for the forecast horizon. If exogenous predictors are used,
then it must also have <code>xreg</code> and <code>newxreg</code> arguments corresponding to the
training and test periods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>Forecast horizon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>Length of the rolling window, if NULL, a rolling window will not be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xreg</code></td>
<td>
<p>Exogeneous predictor variables passed to the forecast function if required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial</code></td>
<td>
<p>Initial period of the time series where no cross-validation is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments are passed to <code>forecastfunction</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Let <code>y</code> contain the time series <code class="reqn">y_1,\dots,y_T</code>. Then
<code>forecastfunction</code> is applied successively to the time series
<code class="reqn">y_1,\dots,y_t</code>, for <code class="reqn">t=1,\dots,T-h</code>, making predictions
<code class="reqn">\hat{y}_{t+h|t}</code>. The errors are given by <code class="reqn">e_{t+h} =
y_{t+h}-\hat{y}_{t+h|t}</code>. If h=1, these are returned as a
vector, <code class="reqn">e_1,\dots,e_T</code>. For h&gt;1, they are returned as a matrix with
the hth column containing errors for forecast horizon h.
The first few errors may be missing as
it may not be possible to apply <code>forecastfunction</code> to very short time
series.
</p>


<h3>Value</h3>

<p>Numerical time series object containing the forecast errors as a vector (if h=1)
and a matrix otherwise. The time index corresponds to the last period of the training
data. The columns correspond to the forecast horizons.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p>CV, CVar, residuals.Arima, <a href="https://robjhyndman.com/hyndsight/tscv/">https://robjhyndman.com/hyndsight/tscv/</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#Fit an AR(2) model to each rolling origin subset
far2 &lt;- function(x, h){forecast(Arima(x, order=c(2,0,0)), h=h)}
e &lt;- tsCV(lynx, far2, h=1)

#Fit the same model with a rolling window of length 30
e &lt;- tsCV(lynx, far2, h=1, window=30)

#Example with exogenous predictors
far2_xreg &lt;- function(x, h, xreg, newxreg) {
  forecast(Arima(x, order=c(2,0,0), xreg=xreg), xreg=newxreg)
}

y &lt;- ts(rnorm(50))
xreg &lt;- matrix(rnorm(100),ncol=2)
e &lt;- tsCV(y, far2_xreg, h=3, xreg=xreg)

</code></pre>


</div>