<div class="container">

<table style="width: 100%;"><tr>
<td>get_observations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get weather observations from the "observation" resource in the Frost API</h2>

<h3>Description</h3>

<p><code>get_observations()</code> retrieves historical weather data
from the Frost API. This is the core resource for retrieving actual
observation data from MET Norway's data storage systems. The function
requires input for <code>client_id</code>, <code>sources</code>, <code>reference_time</code>,
and <code>elements</code>. The other function arguments are optional, and default
to <code>NULL</code>, which means that the response from the API is not
filtered on these parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_observations(client_id,
                 sources,
                 reference_time,
                 elements,
                 maxage = NULL,
                 limit = NULL,
                 time_offsets = NULL,
                 time_resolutions = NULL,
                 time_series_ids = NULL,
                 performance_categories = NULL,
                 exposure_categories = NULL,
                 qualities = NULL,
                 levels = NULL,
                 include_extra = NULL,
                 fields = NULL,
                 return_response = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>client_id</code></td>
<td>
<p>A string. The client ID to use to send requests to the Frost
API.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sources</code></td>
<td>
<p>A character vector. The station IDs of the data sources
to get observations for. For example, "SN18700" is the station ID for
"Blindern". The full list of station IDs can be retrieved with
<code>get_sources()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_time</code></td>
<td>
<p>A string. The time range to get observations for in
either extended ISO-8601 format or the single word "latest".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elements</code></td>
<td>
<p>A character vector. The elements to get observations for.
The full list of elements can be retrieved with the
<code>get_elements()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxage</code></td>
<td>
<p>A string. The maximum observation age as an ISO-8601 period,
e.g. <code>"P1D"</code>. This parameter is only applicable when <code>reference_time
= "latest"</code>. Defaults to "PT3H".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>A string or a positive integer. The maximum number of
observation times to be returned for each combination of source and
element, counting from the most recent time. This parameter is only
applicable when <code>reference_time = "latest"</code>. Set <code>limit = "all"</code>
to get all available times or a positive integer. Defaults to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_offsets</code></td>
<td>
<p>A character vector. The time offsets to get observations
for provided as a vector of ISO-8601 periods, e.g. <code>c("PT6H", "PT18H")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_resolutions</code></td>
<td>
<p>A character vector. The time resolutions to get
observations for provided as a vector of ISO-8601 periods e.g.
<code>c("PT6H", "PT18H")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_series_ids</code></td>
<td>
<p>A numeric vector. The internal time series IDs to get
observations for as a vector of integers, e.g. c(0, 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>performance_categories</code></td>
<td>
<p>A character vector. The performance categories
to get observations for as a vector of letters, e.g. <code>c("A", "C")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposure_categories</code></td>
<td>
<p>A numeric vector. The exposure categories to get
observations for as a vector of integers, e.g. <code>c(1, 2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qualities</code></td>
<td>
<p>A numeric vector. The qualities to get observations for as
a vector of integers, e.g. <code>c(1, 2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>A numeric vector. The sensor levels to get observations for as
a vector of integers, e.g. <code>c(1, 2, 10, 20)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_extra</code></td>
<td>
<p>An integer. If this parameter is set to 1, and extra
data is available, then this data is included in the response. Extra data
currently consists of the original observation value and the 16-character
control info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>A character vector. Fields to include in the response (i.e.
output). If this parameter is specified, then only these fields are
returned in the response. If not specified, then all fields will be
returned in the response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_response</code></td>
<td>
<p>A logical. If set to <code>TRUE</code>, then the function
returns the response from the GET request. If set to <code>FALSE</code> (default),
then the function returns a tibble (data frame) of the content in the
response.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns either a data frame of historical weather
observations, or the response of the GET request, depending on the
boolean value set for <code>return_response</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
frost_client_id &lt;- "&lt;YOUR FROST CLIENT ID&gt;"

# Get daily data for temperature, rain, and wind speed for 2018
sources &lt;- "SN18700"
reference_time &lt;- "2018-01-01/2018-12-31"
elements &lt;- c("mean(air_temperature P1D)",
              "sum(precipitation_amount P1D)",
              "mean(wind_speed P1D)")

observations_df &lt;- get_observations(client_id      = frost_client_id,
                                    sources        = sources,
                                    reference_time = reference_time,
                                    elements       = elements)

## End(Not run)

</code></pre>


</div>