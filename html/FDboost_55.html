<div class="container">

<table style="width: 100%;"><tr>
<td>hmatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A S3 class for univariate functional data on a common grid</h2>

<h3>Description</h3>

<p>The hmatrix class represents data for a functional historical effect. 
The class is basically a matrix containing the time and the id for the observations of the 
functional response. The functional covariate is contained as attribute.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hmatrix(
  time,
  id,
  x,
  argvals = 1:ncol(x),
  timeLab = "t",
  idLab = "wideIndex",
  xLab = "x",
  argvalsLab = "s"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>set of argument values of the response in long format, 
i.e. at which <code>t</code> the response curve is observed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>specify to which curve the point belongs to, id from 1, 2, ..., n.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>matrix of functional covariate, each trajectory is in one row</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>argvals</code></td>
<td>
<p>set of argument values, i.e., the common gird at which the functional covariate 
is observed, by default <code>1:ncol(x)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeLab</code></td>
<td>
<p>name of the time axis, by default <code>t</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idLab</code></td>
<td>
<p>name of the id variable, by default <code>wideIndex</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xLab</code></td>
<td>
<p>name of the functional variable, by default NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>argvalsLab</code></td>
<td>
<p>name of the argument for the covariate by default <code>s</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In the hmatrix class the id has to run from i=1, 2, ..., n including all integers from 1 to n. 
The rows of the functional covariate x correspond to those observations.
</p>


<h3>Value</h3>

<p>An matrix object of type <code>"hmatrix"</code>
</p>


<h3>See Also</h3>

<p><code>getTime.hmatrix</code> to extract attributes, 
and ?"[.hmatrix" for the extract method.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example for a hmatrix object
t1 &lt;- rep((1:5)/2, each = 3)
id1 &lt;- rep(1:3, 5)
x1 &lt;- matrix(1:15, ncol = 5) 
s1 &lt;- (1:5)/2 
myhmatrix &lt;- hmatrix(time = t1, id = id1, x = x1, argvals = s1, 
                     timeLab = "t1", argvalsLab = "s1", xLab = "test")

# extract with [ keeps attributes 
# select observations of subjects 2 and 3
myhmatrixSub &lt;- myhmatrix[id1 %in% c(2, 3), ]  
str(myhmatrixSub)
getX(myhmatrixSub)
getX(myhmatrix)

# get time
myhmatrix[ , 1] # as column matrix as drop = FALSE
getTime(myhmatrix) # as vector

# get id
myhmatrix[ , 2] # as column matrix as drop = FALSE
getId(myhmatrix) # as vector

# subset hmatrix on the basis of an index, which is defined on the curve level
reweightData(data = list(hmat = myhmatrix), vars = "hmat", index = c(1, 1, 2))
# this keeps only the unique x values in attr(,'x') but multiplies the corresponding
# ids and times in the time id matrix 
# for bhistx baselearner, there may be an additional id variable for the tensor product
newdat &lt;- reweightData(data = list(hmat = myhmatrix, 
  repIDx = rep(1:nrow(attr(myhmatrix,'x')), length(attr(myhmatrix,"argvals")))), 
  vars = "hmat", index = c(1,1,2), idvars="repIDx")
length(newdat$repIDx) 

## use hmatrix within a data.frame
mydat &lt;- data.frame(I(myhmatrix), z=rnorm(3)[id1])
str(mydat)
str(mydat[id1 %in% c(2, 3), ])
str(myhmatrix[id1 %in% c(2, 3), ])

</code></pre>


</div>