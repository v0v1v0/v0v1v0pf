<div class="container">

<table style="width: 100%;"><tr>
<td>STL</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Multiple seasonal decomposition by Loess</h2>

<h3>Description</h3>

<p>Decompose a time series into seasonal, trend and remainder components.
Seasonal components are estimated iteratively using STL. Multiple seasonal periods are
allowed. The trend component is computed for the last iteration of STL.
Non-seasonal time series are decomposed into trend and remainder only.
In this case, <code>supsmu</code> is used to estimate the trend.
Optionally, the time series may be Box-Cox transformed before decomposition.
Unlike <code>stl</code>, <code>mstl</code> is completely automated.
</p>


<h3>Usage</h3>

<pre><code class="language-R">STL(formula, iterations = 2, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Decomposition specification (see "Specials" section).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iterations</code></td>
<td>
<p>Number of iterations to use to refine the seasonal component.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed to <code>stats::stl()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>fabletools::dable()</code> containing the decomposed trend, seasonality
and remainder from the STL decomposition.
</p>


<h3>Specials</h3>



<h4>trend</h4>

<p>The <code>trend</code> special is used to specify the trend extraction parameters.
</p>
<pre>
trend(window, degree, jump)
</pre>

<table>
<tr>
<td style="text-align: left;">
<code>window</code> </td>
<td style="text-align: left;"> The span (in lags) of the loess window, which should be odd. If NULL, the default, nextodd(ceiling((1.5*period) / (1-(1.5/s.window)))), is taken.</td>
</tr>
<tr>
<td style="text-align: left;">
<code>degree</code> </td>
<td style="text-align: left;"> The degree of locally-fitted polynomial. Should be zero or one. </td>
</tr>
<tr>
<td style="text-align: left;">
<code>jump</code>   </td>
<td style="text-align: left;"> Integers at least one to increase speed of the respective smoother. Linear interpolation happens between every <code>jump</code>th value.
</td>
</tr>
</table>
<h4>season</h4>

<p>The <code>season</code> special is used to specify the season extraction parameters.
</p>
<pre>
season(period = NULL, window = NULL, degree, jump)
</pre>

<table>
<tr>
<td style="text-align: left;">
<code>period</code> </td>
<td style="text-align: left;"> The periodic nature of the seasonality. This can be either a number indicating the number of observations in each seasonal period, or text to indicate the duration of the seasonal window (for example, annual seasonality would be "1 year").</td>
</tr>
<tr>
<td style="text-align: left;">
<code>window</code> </td>
<td style="text-align: left;"> The span (in lags) of the loess window, which should be odd. If the <code>window</code> is set to <code>"periodic"</code> or <code>Inf</code>, the seasonal pattern will be fixed. The window size should be odd and at least 7, according to Cleveland et al. The default (NULL) will choose an appropriate default, for a dataset with one seasonal pattern this would be 11, the second larger seasonal window would be 15, then 19, 23, ... onwards.</td>
</tr>
<tr>
<td style="text-align: left;">
<code>degree</code> </td>
<td style="text-align: left;"> The degree of locally-fitted polynomial. Should be zero or one. </td>
</tr>
<tr>
<td style="text-align: left;">
<code>jump</code>   </td>
<td style="text-align: left;"> Integers at least one to increase speed of the respective smoother. Linear interpolation happens between every <code>jump</code>th value.
</td>
</tr>
</table>
<h4>lowpass</h4>

<p>The <code>lowpass</code> special is used to specify the low-pass filter parameters.
</p>
<pre>
lowpass(window, degree, jump)
</pre>

<table>
<tr>
<td style="text-align: left;">
<code>window</code> </td>
<td style="text-align: left;"> The span (in lags) of the loess window of the low-pass filter used for each subseries. Defaults to the smallest odd integer greater than or equal to the seasonal <code>period</code> which is recommended since it prevents competition between the trend and seasonal components. If not an odd integer its given value is increased to the next odd one. </td>
</tr>
<tr>
<td style="text-align: left;">
<code>degree</code> </td>
<td style="text-align: left;"> The degree of locally-fitted polynomial. Must be zero or one. </td>
</tr>
<tr>
<td style="text-align: left;">
<code>jump</code>   </td>
<td style="text-align: left;"> Integers at least one to increase speed of the respective smoother. Linear interpolation happens between every <code>jump</code>th value.
</td>
</tr>
</table>
<h3>References</h3>

<p>R. B. Cleveland, W. S. Cleveland, J.E. McRae, and I. Terpenning (1990) STL: A Seasonal-Trend Decomposition Procedure Based on Loess. Journal of Official Statistics, 6, 3â€“73.
</p>


<h3>See Also</h3>

<p><code>stl</code>, <code>supsmu</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">as_tsibble(USAccDeaths) %&gt;%
  model(STL(value ~ trend(window = 10))) %&gt;%
  components()

</code></pre>


</div>