<div class="container">

<table style="width: 100%;"><tr>
<td>stepByStep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Analyse and compare stepwise model predictions
</h2>

<h3>Description</h3>

<p>This function builds a generalized linear model with forward stepwise inclusion of variables, using AIC as the selection criterion, and provides the values predicted at each step, as well as their correlation with the final model predictions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stepByStep(data, sp.col, var.cols, family = binomial(link = "logit"), 
Favourability = FALSE, trace = 0, direction = "forward", k = 2, 
cor.method = "pearson")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>a data frame containing your target and predictor variables.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp.col</code></td>
<td>

<p>name or index number of the column of 'data' that contains the response variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.cols</code></td>
<td>

<p>names or index numbers of the columns of 'data' that contain the predictor variables.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>

<p>argument to be passed to the <code>glm</code> function indicating the family (and error distribution) to use in modelling. The default is binomial distribution with logit link (for binary response variables).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Favourability</code></td>
<td>

<p>logical, whether to apply the <code>Fav</code>ourability function to remove the effect of prevalence from predicted probability (Real et al. 2006). Applicable only to binomial GLMs. Defaults to FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trace</code></td>
<td>

<p>argument to pass to the <code>step</code> function. If positive, information is printed during the stepwise procedure. Larger values may give more detailed information. The default is 0 (silent).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction</code></td>
<td>

<p>argument to pass to the <code>step</code> function. Implementation contributed by Alba Estrada. Can be "forward" (the default, for back-compatibility with former versions of 'stepByStep'), "backward", or "both".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>

<p>argument to pass to the <code>step</code> function indicating the multiple of the number of degrees of freedom used for the penalty. The default is 2, which yields the original AIC. You can use larger values for a more stringent selectionâ€“ e.g., for a critical p-value of 0.05, use k = qchisq(0.05, 1, lower.tail = F).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor.method</code></td>
<td>

<p>character string to pass to <code>cor</code> indicating which coefficient to use for correlating predictions at each step with those of the final model. Can be "pearson" (the default), "kendall", or "spearman".
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Stepwise variable selection often includes more variables than would a model selected after examining all possible combinations of the variables (e.g. with package <span class="pkg">MuMIn</span> or <span class="pkg">glmulti</span>). The 'stepByStep' function can be useful to assess if a stepwise model with just the first few variables could already provide predictions very close to the final ones (see e.g. Fig. 3 in Munoz et al., 2005). It can also be useful to see which variables determine the more general trends in the model predictions, and which variables just provide additional (local) nuances.
</p>


<h3>Value</h3>

<p>This function returns a list of the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>predictions</code></td>
<td>
<p>a data frame with the model's fitted values at each step of the variable selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correlations</code></td>
<td>
<p>a numeric vector of the correlation between the predictions at each step and those of the final model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>a character vector of the variables in the final model, named with the step at which each was included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>the resulting model object.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>A. Marcia Barbosa
</p>


<h3>References</h3>

<p>Munoz, A.R., Real R., BARBOSA A.M. &amp; Vargas J.M. (2005) Modelling the distribution of Bonelli's Eagle in Spain: Implications for conservation planning. Diversity and Distributions 11: 477-486
</p>
<p>Real R., Barbosa A.M. &amp; Vargas J.M. (2006) Obtaining environmental favourability functions from logistic regression. Environmental and Ecological Statistics 13: 237-245.
</p>


<h3>See Also</h3>

<p><code>step</code>, <code>glm</code>, <code>modelTrim</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(rotif.env)

stepByStep(data = rotif.env, sp.col = 18, var.cols = 5:17, 
cor.method = "spearman")
 
stepByStep(data = rotif.env, sp.col = 18, var.cols = 5:17, 
cor.method = "spearman", Favourability = TRUE)
 
stepByStep(data = rotif.env, sp.col = 9, var.cols = c(5:8, 10:17), 
family = poisson)
</code></pre>


</div>