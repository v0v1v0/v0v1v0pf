<div class="container">

<table style="width: 100%;"><tr>
<td>write_png</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write PNG</h2>

<h3>Description</h3>

<p>Write PNG
</p>


<h3>Usage</h3>

<pre><code class="language-R">write_png(
  image,
  file = NULL,
  palette = NULL,
  use_filter = TRUE,
  compression_level = -1L,
  avoid_transpose = FALSE,
  bits = 8,
  trns = NULL,
  raw_spec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>image.  Supported image types:
</p>

<dl>
<dt>Numeric arrays</dt>
<dd>
<p>Numeric arrays with values in the range [0, 1], with
1, 2, 3 or 4 colour planes to represent gray, gray+alpha, rgb
and rgba pixels, respectively</p>
</dd>
<dt>Rasters</dt>
<dd>
<p>Rasters with a mixture of named colours (e.g. 'red'),
and hex colours of the form #RGB, #RGBA, #RRGGBB and #RRGGBBAA</p>
</dd>
<dt>Integer arrays</dt>
<dd>
<p>Integer arrays with values in [0,255] treated as
8-bit image data.  Integer arrays with values in [0, 65535] treated as
16-bit image data</p>
</dd>
<dt>Native rasters</dt>
<dd>
<p>Integer matrices containing colurs in native format
i.e. 8-bit RGBA values packed into a single integer</p>
</dd>
<dt>Integer matrix + an indexed palette of colors</dt>
<dd>
<p>Can be saved as 
an indexed PNG</p>
</dd>
<dt>Raw vectors</dt>
<dd>
<p>Vectors of raw bytes must be accompanied by a 
<code>raw_spec</code> which details how the bytes are to be interpreted
e.g. colour depth, width and height</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>If NULL (the default) then return PNG data as raw vector, otherwise write
to the given file path.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>character vector of up to 256 colors. If specified, and the
image is a 2D matrix of integer or numeric values, then an indexed 
PNG is written where the matrix values indicate the colour palette
value to use. The values in the matrix must range from 0 (for the 
first colour)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_filter</code></td>
<td>
<p>Use PNG filtering to help reduce size? Default: TRUE.
If FALSE, then filtering will be disabled which can make 
image writing faster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compression_level</code></td>
<td>
<p>compression level for PNG. Default: -1 means
to use the default compression level.  Other valid
values are in range [0, 9].  In general, lower compression levels
result in faster compression, but larger image sizes.  For fastest
image writing, set <code>compression_level</code>
to 0 to completely disable compression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avoid_transpose</code></td>
<td>
<p>Should transposition be avoided if possible so as to 
maximise the speed of writing the PNG?  Default: FALSE.  
PNG is a row-major image format, but R stores data in column-major
ordering.  When writing data to PNG, it is often necessary to transpose
the R data to match what PNG requires.  If this option is set 
to <code>TRUE</code> then the image is written without this transposition and 
should speed up PNG creation.  This option only has an effect
for 2D integer and numeric matrix formats.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bits</code></td>
<td>
<p>bit depth. default 8.  Valid values are 8 and 16.  This option
only has an effect when image to output is a numeric array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trns</code></td>
<td>
<p>color to be treated as transparent
in RGB and Greyscale images - without specifying a full alpha channel.  
Only a single color can be specified and it will be treated as a 
fully transparent color in the image.  This setting is only used 
when writing RGB and Greyscale images.  For 8-bit RGB images, the value
may be a hex color value i.e. <code>"#RRGGBB"</code> or a vector of 3 numeric
values in the range [0, 255].  For 8-bit greyscale images,
must be a single integer value in the range [0, 255].
For 16-bit RGB images, the value
may be a vector of 3 numeric
values in the range [0, 65535].  For 16-bit greyscale images,
must be a single integer value in the range [0, 65535].
Default: NULL - means to not add a transparency color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_spec</code></td>
<td>
<p>named list of image specifications for encoding a raw vector
to PNG. Use <code>raw_spec()</code> to create such a list in the correct format.
This argument is only required if the <code>image</code> argument is a 
raw vector.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>file</code> argument provided, function writes to file and returns 
nothing, otherwise it returns a raw vector holding the PNG
encoded data.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># create a small greyscale integer matrix, and write it to a PNG file
mat &lt;- matrix(c(0L, 255L), 3, 4)
pngfile &lt;- tempfile()
write_png(mat, file = pngfile)
im &lt;- read_png(pngfile, type = 'raster') 
plot(im, interpolate = FALSE)
</code></pre>


</div>