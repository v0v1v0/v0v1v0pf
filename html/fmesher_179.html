<div class="container">

<table style="width: 100%;"><tr>
<td>fm_crs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Obtain coordinate reference system object</h2>

<h3>Description</h3>

<p>Obtain an <code>sf::crs</code> or <code>fm_crs</code> object from a spatial object, or
convert crs information to construct a new <code>sf::crs</code> object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fm_crs(x, oblique = NULL, ..., crsonly = deprecated())

fm_crs_oblique(x)

## S3 method for class 'fm_crs'
st_crs(x, ...)

## S3 method for class 'fm_crs'
x$name

## Default S3 method:
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'crs'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_crs'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_CRS'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'character'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'Spatial'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'SpatVector'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'SpatRaster'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'sf'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'sfc'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'sfg'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_mesh_2d'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_lattice_2d'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_segm'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_list'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'matrix'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'fm_list'
fm_CRS(x, oblique = NULL, ...)

fm_wkt_predef()

## S3 method for class 'inla.CRS'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'inla.mesh'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'inla.mesh.lattice'
fm_crs(x, oblique = NULL, ...)

## S3 method for class 'inla.mesh.segment'
fm_crs(x, oblique = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object to convert to <code>crs</code> or  to extract <code>crs</code> information from.
If <code>character</code>, a string suitable for <code>sf::st_crs(x)</code>, or the name of a
predefined <code>wkt</code> string from “names(fm_wkt_predef())'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oblique</code></td>
<td>
<p>Numeric vector of length at most 4 of rotation angles (in degrees)
for an oblique projection, all values defaulting to zero. The values
indicate (longitude, latitude, orientation, orbit), as explained in the
Details section below. When
<code>oblique</code> is non-NULL, used to override the obliqueness parameters of a
<code>fm_crs</code> object. When <code>NA</code>, remove obliqueness from the object, resulting
in a return class of <code>sf::st_crs()</code>. When <code>NULL</code>, pass though any oblique
information in the object, returning an <code>fm_crs()</code> object if needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters. Not currently in use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crsonly</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> logical;
if TRUE, remove <code>oblique</code> information from <code>fm_crs</code>
objects and return a plain <code>crs</code> object instead. For <code>crsonly = TRUE</code>, use
<code>oblique = NA</code> instead. For <code>crsonly = FALSE</code>, use default, NULL, or non-NA
<code>oblique</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>element name</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The first two
elements of the <code>oblique</code> vector are the (longitude, latitude)
coordinates for the oblique centre point. The third value (orientation) is a
counter-clockwise rotation angle for an observer looking at the centre point
from outside the sphere. The fourth value is the quasi-longitude (orbit
angle) for a rotation along the oblique observers equator.
</p>
<p>Simple oblique: <code>oblique=c(0, 45)</code>
</p>
<p>Polar: <code>oblique=c(0, 90)</code>
</p>
<p>Quasi-transversal: <code>oblique=c(0, 0, 90)</code>
</p>
<p>Satellite orbit viewpoint: <code>oblique=c(lon0-time*v1, 0, orbitangle, orbit0+time*v2)</code>, where <code>lon0</code> is the longitude at which a satellite
orbit crosses the equator at <code>time=0</code>, when the satellite is at an
angle <code>orbit0</code> further along in its orbit.  The orbital angle relative
to the equatorial plane is <code>orbitangle</code>, and <code>v1</code> and <code>v2</code>
are the angular velocities of the planet and the satellite, respectively.
Note that "forward" from the satellite's point of view is "to the right" in
the projection.
</p>
<p>When <code>oblique[2]</code> or <code>oblique[3]</code> are non-zero, the resulting
projection is only correct for perfect spheres.
</p>


<h3>Value</h3>

<p>Either an <code>sf::crs</code> object or an <code>fm_crs</code> object,
depending on if the coordinate reference system described by the parameters
can be expressed with a pure <code>crs</code> object or not.
</p>
<p>A <code>crs</code> object (<code>sf::st_crs()</code>) or a <code>fm_crs</code> object.
An S3 <code>fm_crs</code> object is a list with elements <code>crs</code> and <code>oblique</code>.
</p>
<p><code>fm_wkt_predef</code> returns a WKT2 string defining a projection
</p>


<h3>Methods (by class)</h3>


<ul><li> <p><code>fm_crs(fm_list)</code>: returns a list of 'crs' objects, one for each list element
</p>
</li></ul>
<h3>Methods (by generic)</h3>


<ul>
<li> <p><code>st_crs(fm_crs)</code>: <code>st_crs(x, ...)</code> is equivalent to
<code style="white-space: pre;">⁠fm_crs(x, ... oblique = NA)⁠</code>
when <code>x</code> is a <code>fm_crs</code> object.
</p>
</li>
<li> <p><code>$</code>: For a <code>fm_crs</code> object <code>x</code>, <code>x$name</code> calls the accessor method for the
<code>crs</code> object inside it. If <code>name</code> is "crs", the internal crs object itself is returned.
If <code>name</code> is "oblique", the internal oblique angle parameter vector is returned.
</p>
</li>
</ul>
<h3>Functions</h3>


<ul>
<li> <p><code>fm_crs_oblique()</code>: Return <code>NA</code> for object with no oblique information,
and otherwise a length 4 numeric vector.
</p>
</li>
<li> <p><code>fm_CRS(fm_list)</code>: returns a list of 'CRS' objects, one for each list element
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Finn Lindgren <a href="mailto:finn.lindgren@gmail.com">finn.lindgren@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>sf::st_crs()</code>, <code>fm_crs_wkt</code>
</p>
<p>fm_crs_is_null
</p>
<p><code>fm_crs&lt;-()</code>, <code>fm_crs_oblique&lt;-()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">crs1 &lt;- fm_crs("longlat_globe")
crs2 &lt;- fm_crs("lambert_globe")
crs3 &lt;- fm_crs("mollweide_norm")
crs4 &lt;- fm_crs("hammer_globe")
crs5 &lt;- fm_crs("sphere")
crs6 &lt;- fm_crs("globe")
names(fm_wkt_predef())
</code></pre>


</div>