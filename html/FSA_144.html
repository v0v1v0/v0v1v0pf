<div class="container">

<table style="width: 100%;"><tr>
<td>psdCalc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convenience function for calculating PSD-X and PSD X-Y values.</h2>

<h3>Description</h3>

<p>Convenience function for calculating (traditional) PSD-X and (incremental) PSD X-Y values for all Gabelhouse lengths and increments thereof.
</p>


<h3>Usage</h3>

<pre><code class="language-R">psdCalc(
  formula,
  data,
  species,
  units = c("mm", "cm", "in"),
  method = c("multinomial", "binomial"),
  conf.level = 0.95,
  addLens = NULL,
  addNames = NULL,
  justAdds = FALSE,
  what = c("all", "traditional", "incremental", "none"),
  drop0Est = TRUE,
  showIntermediate = FALSE,
  digits = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A formula of the form <code>~length</code> where “length” generically represents a variable in <code>data</code> that contains the observed lengths. Note that this formula may only contain one variable and it must be numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame that minimally contains the observed lengths given in the variable in <code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>A string that contains the species name for which Gabelhouse lengths exist. See <code>psdVal</code> for details. See details for how to use this function for species for which Gabelhouse lengths are not defined.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>A string that indicates the type of units used for the lengths. Choices are <code>mm</code> for millimeters (DEFAULT), <code>cm</code> for centimeters, and <code>in</code> for inches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>A character that identifies the confidence interval method to use. See details in <code>psdCI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>A number that indicates the level of confidence to use for constructing confidence intervals (default is <code>0.95</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addLens</code></td>
<td>
<p>A numeric vector that contains minimum lengths for additional categories. See <code>psdVal</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addNames</code></td>
<td>
<p>A string vector that contains names for the additional lengths added with <code>addLens</code>. See <code>psdVal</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>justAdds</code></td>
<td>
<p>A logical that indicates whether just the values related to the length sin <code>addLens</code> should be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>
<p>A string that indicates the type of PSD values that will be printed. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop0Est</code></td>
<td>
<p>A logical that indicates whether the PSD values that are zero should be dropped from the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showIntermediate</code></td>
<td>
<p>A logical that indicates whether the number of fish in the category and the number of stock fish (i.e., “intermediate” values) should be included in the returned matrix. Default is to not include these values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>A numeric that indicates the number of decimals to round the result to. Default is zero digits following the recommendation of Neumann and Allen (2007).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Computes the (traditional) PSD-X and (incremental) PSD X-Y values, with associated confidence intervals, for each Gabelhouse length. All PSD-X and PSD X-Y values are printed if <code>what="all"</code> (DEFAULT), only PSD-X values are printed if <code>what="traditional"</code>, only PSD X-Y values are printed if <code>what="incremental"</code>, and nothing is printed (but the matrix is still returned) if <code>what="none"</code>.
</p>
<p>Confidence intervals can be computed with either the multinomial (Default) or binomial distribution as set in <code>method</code>See details in <code>psdCI</code> for more information.
This function may be used for species for which Gabelhouse length categories are not defined. In this case do not include a name in <code>species</code>, but define at least two lengths in <code>addLens</code> where the first category MUST be called “stock”.
</p>


<h3>Value</h3>

<p>A matrix with columns that contain the computed PSD-X or PSD X-Y values and associated confidence intervals. If <code>showIntermediate=TRUE</code> then the number of fish in the category and the number of stock fish will also be shown.
</p>


<h3>Testing</h3>

<p>Point estimate calculations match those constructed "by hand."
</p>


<h3>IFAR Chapter</h3>

<p>6-Size Structure.
</p>


<h3>Author(s)</h3>

<p>Derek H. Ogle, <a href="mailto:DerekOgle51@gmail.com">DerekOgle51@gmail.com</a>
</p>


<h3>References</h3>

<p>Ogle, D.H. 2016. <a href="https://fishr-core-team.github.io/fishR/pages/books.html#introductory-fisheries-analyses-with-r">Introductory Fisheries Analyses with R</a>Chapman &amp; Hall/CRC, Boca Raton, FL.
</p>
<p>Guy, C.S., R.M. Neumann, and D.W. Willis. 2006. New terminology for proportional stock density (PSD) and relative stock density (RSD): proportional size structure (PSS). Fisheries 31:86-87. [Was (is?) from http://pubstorage.sdstate.edu/wfs/415-F.pdf.]
</p>
<p>Guy, C.S., R.M. Neumann, D.W. Willis, and R.O. Anderson2006Proportional size distribution (PSD): A further refinement of population size structure index terminology. Fisheries. 32:348. [Was (is?) from http://pubstorage.sdstate.edu/wfs/450-F.pdf.]
</p>
<p>Neumann, R.M. and Allen, M.S. 2007. Size structure. In Guy, C.S. and Brown, M.L., editors, Analysis and Interpretation of Freshwater Fisheries Data, Chapter 9, pages 375-421. American Fisheries Society, Bethesda, MD.
</p>
<p>Willis, D.W., B.R. Murphy, and C.S. Guy. 1993. Stock density indices: development, use, and limitations. Reviews in Fisheries Science 1:203-222. [Was (is?) from http://web1.cnre.vt.edu/murphybr/web/Readings/Willis%20et%20al.pdf.]
</p>


<h3>See Also</h3>

<p>See <code>psdVal</code>, <code>psdPlot</code>, <code>psdAdd</code>, <code>PSDlit</code>, <code>tictactoe</code>, <code>lencat</code>, and <code>rcumsum</code> for related functionality.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Random length data
# suppose this is yellow perch to the nearest mm
yepdf &lt;- data.frame(yepmm=round(c(rnorm(100,mean=125,sd=15),
                                  rnorm(50,mean=200,sd=25),
                                  rnorm(20,mean=300,sd=40)),0),
                    species=rep("Yellow Perch",170))
psdCalc(~yepmm,data=yepdf,species="Yellow perch",digits=1)
psdCalc(~yepmm,data=yepdf,species="Yellow perch",digits=1,drop0Est=TRUE)

## add a length
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=150)

## add lengths with names
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=150,addNames="minLen")
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c("minLen"=150))
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c(150,275),addNames=c("minSlot","maxSlot"))
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c("minLen"=150,"maxslot"=275))

## add lengths with names, return just those values that use those lengths
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c("minLen"=150),justAdds=TRUE)
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c("minLen"=150),justAdds=TRUE,
        what="traditional")
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c(150,275),
        addNames=c("minSlot","maxSlot"),justAdds=TRUE)
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=c(150,275),
        addNames=c("minSlot","maxSlot"),justAdds=TRUE,what="traditional")

## different output types
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=150,what="traditional")
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=150,what="incremental")
psdCalc(~yepmm,data=yepdf,species="Yellow perch",addLens=150,what="none")

## Show intermediate values
psdCalc(~yepmm,data=yepdf,species="Yellow perch",showInterm=TRUE)
psdCalc(~yepmm,data=yepdf,species="Yellow perch",what="traditional",showInterm=TRUE)
psdCalc(~yepmm,data=yepdf,species="Yellow perch",what="incremental",showInterm=TRUE)

## Control the digits
psdCalc(~yepmm,data=yepdf,species="Yellow perch",digits=1)

## Working with a species not in PSDlit ... same data, but don't give species
psdCalc(~yepmm,data=yepdf,addLens=c("stock"=130,"quality"=200,"preferred"=250,
                                    "memorable"=300,"trophy"=380))
psdCalc(~yepmm,data=yepdf,addLens=c("stock"=130,"quality"=200,
                                    "preferred"=250,"name1"=220))
                                    
</code></pre>


</div>