<div class="container">

<table style="width: 100%;"><tr>
<td>match_control</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Function to check the control parameters
</h2>

<h3>Description</h3>

<p>Controls if the values of the control parameters are correct. If any control parameters are missing those are set to default. For internal use only.
</p>


<h3>Usage</h3>

<pre><code class="language-R">match_flexgam_control(control = NULL, formula = formula, data=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>

<p>List of control parameters or NULL.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>Formula of the model to calculate the initial smoothing parameters.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data of the model to calculate the initial smoothing parameters.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Controls if the values of the control parameters are correct. If control parameters are missing they are set to default:
</p>

<ul>
<li> <p><code>"max_iter_in"</code>          =  <code>100</code>         Maximal number of inner iterations. 
</p>
</li>
<li> <p><code>"max_iter_out"</code>         =  <code>100</code>        Maximal number of outer iterations.
</p>
</li>
<li> <p><code>"delta_in"</code>             =  <code>1e-06</code>      Convergence of inner iterations. 
</p>
</li>
<li> <p><code>"delta_out"</code>            =  <code>1e-06</code>       Convergence of outer iterations. 
</p>
</li>
<li> <p><code>"min_mu_k"</code>             =  <code>1e-06</code>       Minimal value  of the fitted value. Also used to generate the upper limit for binomial data. Used to truncate the fitted values for numeric stability. (Occurrence can be read in the details). 
</p>
</li>
<li> <p><code>"min_Psi_d"</code>            =  <code>1e-06</code>      Minimal value of the derivative of the outer function. Used to truncate the derivatives for numeric stability. (Occurrence can be read in the details). 
</p>
</li>
<li> <p><code>"min_increase"</code>         =  <code>1e-04</code>       Minimal increase of the outer function.  



</p>
</li>
<li> <p><code>"delta_halving"</code>        =  <code>1e-06</code>       Minimal difference at step-halving. 
</p>
</li>
<li> <p><code>"min_iter_halving_in"</code>  =  <code>1</code>           From which inner iteration should step halving be possible? 
</p>
</li>
<li> <p><code>"min_iter_halving_out"</code>  =  <code>2</code>          From which outer iteration the deviance stopping criterion should be applied? The minimum value is 2, to get the algorithm always starting.
</p>
</li>
<li> <p><code>"opt_function"</code>         =  <code>"optim"</code>    Which optimization function should be used to optimize the smoothing parameters? (<code>nlminb</code> or <code>optim(Nelder-Mead)</code>) 


</p>
</li>
<li> <p><code>"initial_sm"</code>            =  <code>TRUE</code>        Should the smoothing parameters of the standard <code>mgcv::gam</code> be used as initial values for the covariates smoothing parameters and a grid search be applied to get initial values for the smoothing parameter of the outer function?
</p>
</li>
<li> <p><code>"fix_smooth"</code>           =  <code>FALSE</code>       Should the initial smoothing parameters (<code>sm_par_vec</code>) be used without optimization?  
</p>
</li>
<li> <p><code>"sm_par_vec"</code>           = <code>c("lambda"=1,"s(x1)"=...)</code>    Initial smoothing parameters. Vector must start with <code>"lambda"</code> for the response function. The names of the covariate effects must fit to the <code>mgcv</code> output of the specified formula.  There is no need to specify the initial parameters, if <code>initial_sm = TRUE</code> and <code>fix_smooth = FALSE</code>.
</p>
</li>
<li> <p><code>"sp_range"</code>             =  <code>c(1e-8, 1e15)</code>   Range of all smoothing parameters. 


</p>
</li>
<li> <p><code>"reltol_opt"</code>         =  <code>1e-06</code>       Relative tolerance for optimizing the smoothing parameters. 

</p>
</li>
<li> <p><code>"quietly"</code>              =  <code>FALSE</code>       Should the algorithm print steps of optimizing the smoothing parameters and iteration procedure for the final model? 
</p>
</li>
<li> <p><code>"save_step_response"</code>   =  <code>FALSE</code>       Should the steps of the algorithm be saved for convergences checks? 
</p>
</li>
<li> <p><code>"initial_model"</code>        =  <code>c("with_intercept","no_intercept")</code>       Whether the initial model should be estimated with or without intercept.
</p>
</li>
</ul>
<h3>Value</h3>

<p>List of control parameters to fit the <code>flexgam</code> model.
</p>


<h3>Note</h3>

<p>The function is designed for internal usage.
</p>


<h3>Author(s)</h3>

<p>Elmar Spiegel
</p>


<h3>References</h3>

<p>Spiegel, Elmar, Thomas Kneib and Fabian Otto-Sobotka. Generalized additive models with flexible response functions. Statistics and Computing (2017). https://doi.org/10.1007/s11222-017-9799-6
</p>


<h3>See Also</h3>

<p><code>flexgam</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># Only for internal usage.
</code></pre>


</div>