<div class="container">

<table style="width: 100%;"><tr>
<td>boot.paired.roc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bootstrap paired ROC curves</h2>

<h3>Description</h3>

<p>Given two numerical predictors for the same outcome on the same set of samples, this functions
enables the bootstrapping of the paired ROC curves of the two prediction models. While bootstrapping
the same set of samples are used for both curves in each iteration, preserving the correlation
between the two models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">boot.paired.roc(pred1, pred2, true.class, stratify = TRUE,
  n.boot = 1000, use.cache = FALSE, tie.strategy = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pred1</code></td>
<td>
<p>Numerical predictions for the first classifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred2</code></td>
<td>
<p>Numerical predictions for the second classifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>true.class</code></td>
<td>
<p>A logical vector. TRUE indicates the sample belonging to the
positive class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratify</code></td>
<td>
<p>Logical. Indicates whether we use stratified bootstrap.
Default to TRUE. Non-stratified bootstrap is not yet implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.boot</code></td>
<td>
<p>A number that will be coerced to integer. Specified the 
number of bootstrap replicates. Defaults to 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.cache</code></td>
<td>
<p>If true the bootstrapping results for the
ROC curve will be pre-cached. This increases speed when the object is used often, but also
takes up more memory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tie.strategy</code></td>
<td>
<p>How to handle ties. See details below.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of class <code>fbroc.paired.roc</code>, containing the elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>prediction1</code></td>
<td>
<p>Input predictions for first model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction2</code></td>
<td>
<p>Input predictions for second model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>true.class</code></td>
<td>
<p>Input classes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.thresholds1</code></td>
<td>
<p>Number of thresholds of the first predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.thresholds2</code></td>
<td>
<p>Number of thresholds of the second predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.boot</code></td>
<td>
<p>Number of bootstrap replicates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.cache</code></td>
<td>
<p>Indicates if cache is used for this ROC object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tie.strategy</code></td>
<td>
<p>Used setting how to handle ties in predictors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.pos</code></td>
<td>
<p>Number of positive observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.neg</code></td>
<td>
<p>Number of negative observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roc1</code></td>
<td>
<p>A data.frame containing the thresholds of the first ROC curve and the TPR and FPR at these
thresholds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roc2</code></td>
<td>
<p>A data.frame containing the thresholds of the second ROC curve and the TPR and FPR at these
thresholds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc1</code></td>
<td>
<p>The AUC of the first ROC curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auc2</code></td>
<td>
<p>The AUC of the second ROC curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.tpr1</code></td>
<td>
<p>If the cache is enabled, a matrix containing the bootstrapped TPR at the thresholds
for the first predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.fpr1</code></td>
<td>
<p>If the cache is enabled, a matrix containing the bootstrapped FPR at the thresholds
for the first predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.tpr2</code></td>
<td>
<p>If the cache is enabled, a matrix containing the bootstrapped TPR at the thresholds
for the second predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.fpr2</code></td>
<td>
<p>If the cache is enabled, a matrix containing the bootstrapped FPR at the thresholds
for the second predictor.</p>
</td>
</tr>
</table>
<h3>Caching</h3>

<p>If you enable caching, <code>boot.roc</code> calculates the requested number of bootstrap samples and
saves the TPR and FPR values for each iteration. This can take up a sizable portion of memory,
but it speeds up subsequent operations. This can be useful if you plan to use the ROC curve
multiple <code>fbroc</code> functions.
</p>


<h3>Ties</h3>

<p>You can set this parameter to either 1 or 2. If your numerical predictor has no ties, both settings
will produce the same results. 
If you set <code>tie.strategy</code> to 1 the ROC curve is built by connecting the TPR/FPR pairs for
neighboring thresholds. A tie.strategy of 2 indicates that the TPR calculated at a specific FPR
is the best TPR at a FPR smaller than or equal than the FPR specified. Defaults to 2.
</p>


<h3>See Also</h3>

<p><code>boot.roc</code>, 
<code>plot.fbroc.paired.roc</code>,
<code>perf.fbroc.paired.roc</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(roc.examples)
# Do not use cache
example &lt;- boot.paired.roc(roc.examples$Cont.Pred, roc.examples$Cont.Pred.Outlier,
                          roc.examples$True.Class, n.boot = 500)
perf(example, "auc") # estimate difference in auc
perf(example, "tpr", fpr = 0.5) # estimate difference in TPR at a FPR of 50%
plot(example) # show plot
# Cached mode
example &lt;- boot.paired.roc(roc.examples$Cont.Pred, roc.examples$Cont.Pred.Outlier,
                          roc.examples$True.Class, n.boot = 1000, use.cache = TRUE)
conf(example, conf.for = "tpr", steps = 10) # get confidence regions for TPR at FPR
conf(example, conf.for = "fpr", steps = 10) # get confidence regions for FPR at TPR
perf(example, "fpr", tpr = 0.9) # estimate difference in FPR at a TPR of 90%                     
</code></pre>


</div>