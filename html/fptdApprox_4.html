<div class="container">

<table style="width: 100%;"><tr>
<td>diffproc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diffusion Processes</h2>

<h3>Description</h3>

<p><code>diffproc</code> creates an object of class “diffproc” from the given set of values.
</p>
<p><code>as.diffproc</code> attempts to turn its argument into an object of class “diffproc”. 
</p>
<p><code>is.diffproc</code> tests if its argument is an object of class “diffproc”.
</p>
<p><code>print</code> shows an object of class “diffproc”.
</p>


<h3>Usage</h3>

<pre><code class="language-R">diffproc(text)
as.diffproc(text)
is.diffproc(obj)

## S3 method for class 'diffproc'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text</code></td>
<td>
<p>a character vector or list of length four to be coerced, containing the infinitesimal mean, infinitesimal variance, 
transition probability density function and transition probability distribution function of a diffusion process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object to be tested.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class “diffproc”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments potentially passed (currently none is considered).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The main goal of the <code>diffproc</code> function is to validate the mathematical expressions in the given character string vector or list.
If no errors happen, the function converts the input into an object of class “diffproc”. Otherwise, the function reports the errors.
</p>
<p>The mathematical expressions of the infinitesimal mean and variance should be expressions in <code class="reqn">x</code> and <code class="reqn">t</code>, <code class="reqn">A_1(x,t)</code> 
and <code class="reqn">A_2(x,t)</code>, respectively.
</p>
<p>The mathematical expressions of the transition probability density and distribution functions should be expressions in <code class="reqn">x</code>, <code class="reqn">t</code>, <code class="reqn">y</code> 
and <code class="reqn">s</code>, <code class="reqn">f(x,t|y,s)</code> and <code class="reqn">F(x,t|y,s)</code>, respectively.
</p>
<p>In addition, all mathematical expressions may depend on generic parameters and functions of <code class="reqn">t</code>, or <code class="reqn">s</code> and <code class="reqn">t</code>,
referred by name. To name the expression of a function <code class="reqn">h(u)</code> we can use <code>`h(u)` = value</code> if we want to show its dependence on <code class="reqn">u</code>, or <code>h</code> otherwise. <br></p>
<p>The function checks if the mathematical expressions show syntax errors and if <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> can compute the symbolic derivative with respect 
to <code class="reqn">x</code> for the infinitesimal variance and transition probability density function. 
</p>


<h3>Value</h3>

<p>If possible, this function returns an object of class “diffproc” that defines a family of diffusion processes.
It is a four-component list:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>character of length 1 with the mathematical expression of the infinitesimal mean of the process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>character of length 1 with the mathematical expression of the infinitesimal variance of the process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tpdf</code></td>
<td>
<p>character of length 1 with the mathematical expression of the transition probability density function of the process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tpdF</code></td>
<td>
<p>character of length 1 with the mathematical expression of the transition probability distribution function of the process.</p>
</td>
</tr>
</table>
<p><code>is.diffproc</code> returns <code>TRUE</code> or <code>FALSE</code> depending on whether its argument is an object of class “diffproc” or not.
</p>


<h3>Note</h3>

<p>The transition probability density functions specified by the <code>dnorm</code> function should be expressed in terms of the standard 
normal distribution, since only its derivative is considered in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. 
</p>


<h3>Author(s)</h3>

<p>Patricia Román-Román, Juan J. Serrano-Pérez and Francisco Torres-Ruiz.</p>


<h3>References</h3>

<p>P. Román-Román, J.J. Serrano-Pérez, F. Torres-Ruiz. (2012) An R package for an efficient approximation of first-passage-time densities for diffusion processes based on the FPTL function. <em>Applied Mathematics and Computation</em>, <b>218</b>, 8408–8428.
</p>
<p>P. Román-Román, J.J. Serrano-Pérez, F. Torres-Ruiz. (2014) More general problems on first-passage times for diffusion processes: A new version of the fptdApprox R package. <em>Applied Mathematics and Computation</em>, <b>244</b>, 432–446.
</p>


<h3>See Also</h3>

<p><code>D</code> to know more about the simple functions and expressions that support symbolic derivative in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, and in 
particular about the functions provided in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> to evaluate probability density functions. 
</p>
<p><code>FPTL</code> to locate the first-passage-time of a diffusion process through a continuous boundary.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Creating a diffproc object for the lognormal diffusion process
x &lt;- c("m*x", "sigma^2*x^2",
       "dnorm((log(x)-(log(y)+(m-sigma^2/2)*(t-s)))/(sigma*sqrt(t-s)),0,1)/
       (sigma*sqrt(t-s)*x)", "plnorm(x,log(y)+(m-sigma^2/2)*(t-s),
       sigma*sqrt(t-s))") 

Lognormal &lt;- diffproc(x)
Lognormal

## Creating a diffproc object for the Ornstein Uhlenbeck diffusion process
x &lt;- c("alpha*x + beta", "sigma^2", "dnorm((x-(y*exp(alpha*(t-s))-beta*
       (1-exp(alpha*(t-s)))/alpha))/(sigma*sqrt((exp(2*alpha*(t-s)) - 1)/
       (2*alpha))),0,1)/(sigma*sqrt((exp(2*alpha*(t-s)) - 1)/(2*alpha)))",
       "pnorm(x, y*exp(alpha*(t-s)) - beta*(1 - exp(alpha*(t-s)))/alpha,
       sigma*sqrt((exp(2*alpha*(t-s)) - 1)/(2*alpha)))")
			 
OU &lt;- diffproc(x)
OU

## Creating a diffproc object for the lognormal diffusion process with exogenous factors
x &lt;- c("`h(t)`*x", "sigma^2*x^2", "dnorm((log(x)-(log(y)+`H(s,t)`-(sigma^2/2)*
       (t - s)))/(sigma*sqrt(t-s)),0,1)/(sigma*sqrt(t-s)*x)", "plnorm(x,log(y)+
       `H(s,t)`-(sigma^2/2)*(t-s),sigma*sqrt(t-s))")
    
LognormalFEx &lt;- diffproc(x)
LognormalFEx

## Testing diffproc objects
is.diffproc(Lognormal)
is.diffproc(OU)
is.diffproc(LognormalFEx)
</code></pre>


</div>