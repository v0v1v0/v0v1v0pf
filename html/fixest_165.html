<div class="container">

<table style="width: 100%;"><tr>
<td>vcov_cluster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clustered VCOV</h2>

<h3>Description</h3>

<p>Computes the clustered VCOV of <code>fixest</code> objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">vcov_cluster(x, cluster = NULL, ssc = NULL, vcov_fix = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>fixest</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>Either i) a character vector giving the names of the variables onto which to
cluster, or ii) a formula giving those names, or iii) a vector/list/data.frame giving the hard
values of the clusters. Note that in cases i) and ii) the variables are fetched directly in the
data set used for the estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssc</code></td>
<td>
<p>An object returned by the function <code>ssc</code>. It specifies how to perform the small
sample correction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov_fix</code></td>
<td>
<p>Logical scalar, default is <code>TRUE</code>. If the VCOV ends up not being
positive definite, whether to "fix" it using an eigenvalue decomposition
(a la Cameron, Gelbach &amp; Miller 2011).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If the first argument is a <code>fixest</code> object, then a VCOV is returned (i.e. a symmetric matrix).
</p>
<p>If the first argument is not a <code>fixest</code> object, then a) implicitly the arguments are shifted to
the left (i.e. <code>vcov_cluster(~var1 + var2)</code> is equivalent to
<code>vcov_cluster(cluster = ~var1 + var2)</code>) and b) a VCOV-<em>request</em> is returned and NOT a VCOV.
That VCOV-request can then be used in the argument <code>vcov</code> of various <code>fixest</code>
functions (e.g. <code>vcov.fixest</code> or even in the estimation calls).
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>References</h3>

<p>Cameron AC, Gelbach JB, Miller DL (2011). "Robust Inference with Multiway Clustering." <em>Journal of Business &amp; Economic Statistics</em>, 29(2), 238-249. doi:10.1198/jbes.2010.07136.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
base = iris
names(base) = c("y", "x1", "x2", "x3", "species")
base$clu = rep(1:5, 30)

est = feols(y ~ x1, base)

# VCOV: using a formula giving the name of the clusters
vcov_cluster(est, ~species + clu)

# works as well with a character vector
vcov_cluster(est, c("species", "clu"))

# you can also combine the two with '^'
vcov_cluster(est, ~species^clu)

#
# Using VCOV requests
#

# per se: pretty useless...
vcov_cluster(~species)

# ...but VCOV-requests can be used at estimation time:
# it may be more explicit than...
feols(y ~ x1, base, vcov = vcov_cluster("species"))

# ...the equivalent, built-in way:
feols(y ~ x1, base, vcov = ~species)

# The argument vcov does not accept hard values,
# so you can feed them with a VCOV-request:
feols(y ~ x1, base, vcov = vcov_cluster(rep(1:5, 30)))


</code></pre>


</div>