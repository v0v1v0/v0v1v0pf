<div class="container">

<table style="width: 100%;"><tr>
<td>merge_plus</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Merge two datasets either by exact, fuzzy, or multivar-based matching</h2>

<h3>Description</h3>

<p><code>merge_plus</code> is a wrapper for a standard merge, a fuzzy string match,
and a a “multivar” match based on several columns of the data. Parameters allow
for control for fine-tuning of the match. This is primarily used as the
workhorse for the <code>tier_match</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">merge_plus(
  data1,
  data2,
  by = NULL,
  by.x = NULL,
  by.y = NULL,
  suffixes = c("_1", "_2"),
  check_merge = TRUE,
  unique_key_1,
  unique_key_2,
  match_type = "exact",
  fuzzy_settings = build_fuzzy_settings(),
  score_settings = NULL,
  filter = NULL,
  filter.args = list(),
  evaluate = match_evaluate,
  evaluate.args = list(),
  allow.cartesian = FALSE,
  multivar_settings = build_multivar_settings()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data1</code></td>
<td>
<p>data.frame. First to-merge dataset (ordering matters - see Fuzzy Matching vignette.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data2</code></td>
<td>
<p>data.frame. Second to-merge dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character string. Variables to merge on (common across data 1 and
data 2). See <code>merge</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by.x</code></td>
<td>
<p>length-1 character vector. Variable to merge on in data1. See <code>merge</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by.y</code></td>
<td>
<p>length-1 character vector. Variable to merge on in data2. See <code>merge</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffixes</code></td>
<td>
<p>character vector with length==2. Suffix to add to like named
variables after the merge. See <code>merge</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_merge</code></td>
<td>
<p>logical. Checks that your unique_keys are indeed unique.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unique_key_1</code></td>
<td>
<p>character vector. Primary key of data1 that uniquely
identifies each row (can be multiple fields)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unique_key_2</code></td>
<td>
<p>character vector. Primary key of data2 that uniquely
identifies each row (can be multiple fields)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match_type</code></td>
<td>
<p>string. If 'exact', match is exact, if 'fuzzy', match is
fuzzy. If 'multivar,' match is multivar-based. See <code>multivar_match</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fuzzy_settings</code></td>
<td>
<p>additional arguments for amatch, to be used if match_type
= 'fuzzy'. Suggested defaults provided. See <code>build_fuzzy_settings</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score_settings</code></td>
<td>
<p>list. Score settings for post-hoc matchscores. See <code>build_score_settings</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>function or numeric. Filters a merged data1-data2 dataset. If a
function, should take in a data.frame (data1 and data2 merged by name1 and
name2) and spit out a trimmed version of the data.frame (fewer rows). Think
of this function as applying other conditions to matches, other than a
match by name. The first argument of filter should be the data.frame. If
numeric, will drop all observations with a matchscore lower than or equal
to filter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter.args</code></td>
<td>
<p>list. Arguments passed to filter, if a function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>evaluate</code></td>
<td>
<p>Function to evaluate merge_plus output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>evaluate.args</code></td>
<td>
<p>list. Arguments passed to evaluate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow.cartesian</code></td>
<td>
<p>whether or not to allow many-many matches, see data.table::merge()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multivar_settings</code></td>
<td>
<p>list of settings to go to the multivar match if match_type
== 'multivar'. See <code>multivar-match</code> and <code>build_multivar_settings</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with matches, filtered matches (if applicable), data1 and data2
minus matches, and match evaluation
</p>


<h3>See Also</h3>

<p>match_evaluate
</p>


</div>