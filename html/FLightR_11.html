<div class="container">

<table style="width: 100%;"><tr>
<td>map.FLightR.ggmap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>plots result over map</h2>

<h3>Description</h3>

<p>plots track over map with probability cloud. Can plot only part of the track if dates are specified. Note that you can use it only after obtaining and registering in you current session Google Api Key. For details on the API key check [here](http://ornithologyexchange.org/forums/topic/38315-mapflightrggmap-error).
</p>


<h3>Usage</h3>

<pre><code class="language-R">map.FLightR.ggmap(
  Result,
  dates = NULL,
  plot.cloud = TRUE,
  map.options = NULL,
  plot.options = NULL,
  save.options = NULL,
  zoom = "auto",
  return.ggobj = FALSE,
  seasonal.colors = TRUE,
  seasonal.donut.location = "topleft",
  seasonal.donut.proportion = 0.5,
  save = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Result</code></td>
<td>
<p>FLightR result object obtained from <code>run.particle.filter</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>either NULL if all twilights should be included or data.frame with first column - start of the period and second end of the period. Each line represents a new period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.cloud</code></td>
<td>
<p>Should probability cloud be plotted? If TRUE cloud is estimated by <code>stat_density2d</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map.options</code></td>
<td>
<p>options passed to <code>get_map</code>, note that <code>zoom</code> option is defined separately</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.options</code></td>
<td>
<p>plotting options. Not defined yet!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.options</code></td>
<td>
<p>options passed to <code>ggsave</code>. Filename should be defined here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom</code></td>
<td>
<p>Zoom for map. If 'auto' FLightR will try to find optimal zoom level by downloading different size maps and checking whether all the points fit the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.ggobj</code></td>
<td>
<p>Should ggobj be returned for subsequent checks and/or replotting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seasonal.colors</code></td>
<td>
<p>if true points of the track will have seasonal colors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seasonal.donut.location</code></td>
<td>
<p>if NULL - no color wheel placed, otherwise select one of 'bottomleft', 'bottomright', 'topleft'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seasonal.donut.proportion</code></td>
<td>
<p>how much of X axis should color wheel occupy.
return either NULL or ggplot2 class object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save</code></td>
<td>
<p>should function save results with <code>ggsave</code>?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>if 'return.ggobj=TRUE' return ggplot object otherwise returns 'NULL'.
</p>


<h3>Author(s)</h3>

<p>Eldar Rakhimberdiev
</p>


<h3>Examples</h3>

<pre><code class="language-R">File&lt;-system.file("extdata", "Godwit_TAGS_format.csv", package = "FLightR")
# to run example fast we will cut the real data file by 2013 Aug 20
Proc.data&lt;-get.tags.data(File, end.date=as.POSIXct('2013-06-25', tz='GMT'))
Calibration.periods&lt;-data.frame(
       calibration.start=as.POSIXct(c(NA, "2014-05-05"), tz='GMT'),
       calibration.stop=as.POSIXct(c("2013-08-20", NA), tz='GMT'),
       lon=5.43, lat=52.93) 
       #use c() also for the geographic coordinates, if you have more than one calibration location
       # (e. g.,  lon=c(5.43, 6.00), lat=c(52.93,52.94))

# NB Below likelihood.correction is set to FALSE for fast run! 
# Leave it as default TRUE for real examples
Calibration&lt;-make.calibration(Proc.data, Calibration.periods, likelihood.correction=FALSE)

Grid&lt;-make.grid(left=0, bottom=50, right=10, top=56,
  distance.from.land.allowed.to.use=c(-Inf, Inf),
  distance.from.land.allowed.to.stay=c(-Inf, Inf))

all.in&lt;-make.prerun.object(Proc.data, Grid, start=c(5.43, 52.93),
                             Calibration=Calibration, threads=2)
# here we will run only 1e4 partilces for a very short track.
# One should use 1e6 particles for the full run
Result&lt;-run.particle.filter(all.in, threads=1,
           nParticles=1e3, known.last=TRUE,
           precision.sd=25, check.outliers=FALSE)

## Not run: 
map.FLightR.ggmap(Result, seasonal.donut.location=NULL, zoom=6, save=FALSE)

## End(Not run) 
# for this short track without variance seasonal donut does not work,
# but for normall track it will.
</code></pre>


</div>